{"version":3,"file":"vendor.common-cc35aa30.bundle.js","mappings":";;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;;;;;;;ACrBa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB;AACpB,8BAA8B,mBAAO,CAAC,KAAiC;AACvE,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,8CAA8C,mBAAO,CAAC,KAAiD;AACvG,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E,+BAA+B,mBAAO,CAAC,KAAwB;AAC/D,4BAA4B,mBAAO,CAAC,KAAqB;AACzD,0BAA0B,mBAAO,CAAC,KAAmB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,WAAW;AACtE;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,SAAS;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,SAAS;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,0BAA0B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,0BAA0B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,0BAA0B;AAClD;AACA;AACA;AACA;AACA;AACA,4BAA4B,4BAA4B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,0BAA0B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,0BAA0B;AAClE;AACA;AACA;AACA;AACA;AACA,4CAA4C,0BAA0B;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iCAAiC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,0BAA0B;AAClE;AACA;AACA;AACA;AACA;AACA,4CAA4C,0BAA0B;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA,4BAA4B,2BAA2B;AACvD;AACA,gCAAgC,2BAA2B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA,oBAAoB;AACpB;AACA;;;;;;;ACrTa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;;;;;;ACzCa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,0BAA0B,mBAAO,CAAC,KAA6B;AAC/D,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E,2BAA2B,mBAAO,CAAC,KAAwB;AAC3D,iBAAiB,mBAAO,CAAC,KAAc;AACvC,wBAAwB,mBAAO,CAAC,KAAqB;AACrD,2BAA2B,mBAAO,CAAC,KAAoC;AACvE,8BAA8B,mBAAO,CAAC,KAAiC;AACvE,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E,iBAAiB,mBAAO,CAAC,GAAc;AACvC,+BAA+B,mBAAO,CAAC,KAAwB;AAC/D,uBAAuB,mBAAO,CAAC,KAAgB;AAC/C,oBAAoB,mBAAO,CAAC,KAAiB;AAC7C,6BAA6B,mBAAO,CAAC,KAAsC;AAC3E,sBAAsB,mBAAO,CAAC,KAAe;AAC7C,0BAA0B,mBAAO,CAAC,KAAmB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sHAAsH,oBAAoB;AAC1I,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iDAAiD;AAC9E,0BAA0B;AAC1B;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,wCAAwC;AACxC;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,+FAA+F,oBAAoB;AACxJ;AACA;AACA;AACA,iDAAiD,QAAQ;AACzD;AACA,0CAA0C,iGAAiG,oBAAoB;AAC/J;AACA;AACA;AACA;AACA,8IAA8I,oBAAoB;AAClK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,QAAQ,mDAAmD,qCAAqC;AAC7I,uCAAuC,iGAAiG,oBAAoB;AAC5J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,4BAA4B;AAC5B,iBAAiB;AACjB;AACA,+IAA+I,oBAAoB;AACnK;AACA;AACA;AACA,2CAA2C,iGAAiG,oBAAoB;AAChK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,kJAAkJ,oBAAoB;AACtK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,QAAQ;AACtD,6GAA6G,oBAAoB;AACjI,mCAAmC,+FAA+F,oBAAoB;AACtJ;AACA;AACA;AACA;AACA;AACA,yFAAyF,QAAQ;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,kJAAkJ,oBAAoB;AACtK;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6FAA6F,QAAQ;AACrG,qBAAqB;AACrB;AACA;AACA;AACA;AACA,sCAAsC,+FAA+F,oBAAoB;AACzJ;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iCAAiC,+FAA+F,oBAAoB;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,aAAa;AACb;AACA;AACA,+BAA+B,+FAA+F,oBAAoB;AAClJ;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uKAAuK;AACvK;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+GAA+G,WAAW,cAAc,mCAAmC;AAC3K;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+GAA+G,kHAAkH;AACjO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,8CAA8C;AAC3E,0BAA0B;AAC1B;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,wCAAwC;AACxC;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA,2FAA2F,QAAQ;AACnG;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,QAAQ;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,2BAA2B;AAC/D;AACA,sDAAsD,sCAAsC;AAC5F;AACA,0DAA0D,0CAA0C;AACpG;AACA,8CAA8C,SAAS,IAAI,QAAQ;AACnE;AACA;AACA;AACA;AACA;AACA,oCAAoC,2BAA2B;AAC/D;AACA,sDAAsD,sCAAsC;AAC5F;AACA,0DAA0D,0CAA0C;AACpG;AACA,8CAA8C,SAAS,IAAI,QAAQ;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD,kCAAkC,+FAA+F,oBAAoB;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iHAAiH,QAAQ;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,oBAAoB,uCAAuC,qBAAqB;AACrK;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,qBAAqB;AACrB;AACA;;;;;;;AC3vDa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;;;;;;ACzCa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;;;;;;;AClCa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB;AACxB,oBAAoB,mBAAO,CAAC,KAAa;AACzC,8BAA8B,mBAAO,CAAC,KAAiC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;;;;;;;AC1Ca;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc;AACd,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,8BAA8B,mBAAO,CAAC,KAAiC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,qFAAqF,8CAA8C,oDAAoD,gCAAgC;AACvN;AACA;AACA,yFAAyF,8CAA8C;AACvI;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;;;;;;ACxMa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,mCAAmC,mBAAO,CAAC,KAAoC;AAC/E,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,oBAAoB,mBAAO,CAAC,KAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,QAAQ,uHAAuH,YAAY;AAChP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iGAAiG,QAAQ,uHAAuH,YAAY;AAC5O;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6FAA6F,QAAQ,yDAAyD,SAAS,mCAAmC,YAAY;AACtN;AACA;AACA;AACA,wCAAwC,oBAAoB;AAC5D;AACA,sFAAsF,MAAM;AAC5F,wFAAwF,QAAQ;AAChG;AACA,SAAS;AACT;AACA;AACA,qBAAqB;AACrB;AACA;;;;;;;ACvJa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc;AACd,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,6BAA6B;AACzD,gCAAgC,wBAAwB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,QAAQ,KAAK,+CAA+C;AACzI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;;;;;;AC3Ma;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,mCAAmC,mBAAO,CAAC,KAAoC;AAC/E,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,8BAA8B,mBAAO,CAAC,KAAiC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;;;;;;AClPa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB;AACxB,8BAA8B,mBAAO,CAAC,KAAiC;AACvE,oBAAoB,mBAAO,CAAC,KAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;;;;;;;ACrEa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,8BAA8B,mBAAO,CAAC,KAAiC;AACvE,oBAAoB,mBAAO,CAAC,KAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;;;;;;;ACzDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,GAAG,wBAAwB,GAAG,wBAAwB,GAAG,0BAA0B,GAAG,qBAAqB,GAAG,iBAAiB,GAAG,cAAc,GAAG,qBAAqB,GAAG,yBAAyB,GAAG,mBAAmB;AACxO,2BAA2B,mBAAO,CAAC,KAAuC;AAC1E,oDAAmD,EAAE,qCAAqC,+CAA+C,EAAC;AAC1I,iBAAiB,mBAAO,CAAC,KAA6B;AACtD,0CAAyC,EAAE,qCAAqC,2BAA2B,EAAC;AAC5G,wBAAwB,mBAAO,CAAC,KAAoC;AACpE,iDAAgD,EAAE,qCAAqC,yCAAyC,EAAC;AACjI,2BAA2B,mBAAO,CAAC,KAAmD;AACtF,oDAAmD,EAAE,qCAAqC,+CAA+C,EAAC;AAC1I,iBAAiB,mBAAO,CAAC,GAA6B;AACtD,0CAAyC,EAAE,qCAAqC,2BAA2B,EAAC;AAC5G,oBAAoB,mBAAO,CAAC,KAAgC;AAC5D,6CAA4C,EAAE,qCAAqC,iCAAiC,EAAC;AACrH,6BAA6B,mBAAO,CAAC,KAAqD;AAC1F,sDAAqD,EAAE,qCAAqC,mDAAmD,EAAC;AAChJ,sBAAsB,mBAAO,CAAC,KAA8B;AAC5D,+CAA8C,EAAE,qCAAqC,qCAAqC,EAAC;AAC3H,wBAAwB,mBAAO,CAAC,KAAgC;AAChE,iDAAgD,EAAE,qCAAqC,yCAAyC,EAAC;AACjI,4BAA4B,mBAAO,CAAC,KAAoC;AACxE,qDAAoD,EAAE,qCAAqC,iDAAiD,EAAC;AAC7I;;;;;;;ACvBa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,iEAAiE;AACnL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,4DAA4D;AAC9K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,iEAAiE;AACnL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,2DAA2D;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,6DAA6D;AAC/K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,uGAAuG,MAAM;AAC7G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;;;;;;AC3Ia;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,wBAAwB,mBAAO,CAAC,KAAsB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,iEAAiE;AACnL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,4DAA4D;AAC9K;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,4DAA4D;AAC9K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,2DAA2D;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,MAAM;AACzG;AACA,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,6DAA6D;AAC/K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,MAAM;AAC7G;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,gFAAgF,MAAM,IAAI,OAAO,iBAAiB,MAAM;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,MAAM;AAC7G,uGAAuG,MAAM;AAC7G;AACA,SAAS;AACT;AACA;AACA,iBAAiB;AACjB;AACA;;;;;;;ACpKa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,iDAAiD,mBAAO,CAAC,KAAoD;AAC7G,+CAA+C,mBAAO,CAAC,IAAkD;AACzG,8BAA8B,mBAAO,CAAC,KAAiC;AACvE,oBAAoB,mBAAO,CAAC,KAAa;AACzC,2BAA2B,mBAAO,CAAC,KAA8B;AACjE,4CAA4C,mBAAO,CAAC,KAA+C;AACnG,8BAA8B,mBAAO,CAAC,KAAiC;AACvE,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,oBAAoB,mBAAO,CAAC,KAAa;AACzC,uBAAuB,mBAAO,CAAC,KAA0B;AACzD,gCAAgC,mBAAO,CAAC,KAAmC;AAC3E,yBAAyB,mBAAO,CAAC,KAAuB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,wCAAwC;AACxC,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA,kFAAkF,MAAM,IAAI,OAAO,aAAa,MAAM;AACtH;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA,kFAAkF,MAAM,IAAI,OAAO,aAAa,MAAM;AACtH;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA,kFAAkF,MAAM,IAAI,OAAO,aAAa,MAAM;AACtH;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA,kFAAkF,MAAM,IAAI,OAAO,aAAa,MAAM;AACtH;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA,kFAAkF,MAAM,IAAI,OAAO,aAAa,MAAM;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA,kFAAkF,MAAM,IAAI,OAAO,aAAa,MAAM;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA,kFAAkF,MAAM,IAAI,OAAO,aAAa,MAAM;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG,MAAM;AAC/G;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,kFAAkF,MAAM,IAAI,OAAO,iBAAiB,MAAM;AAC1H;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kCAAkC;AAC1E,SAAS;AACT;AACA;AACA;AACA;AACA,yGAAyG,MAAM;AAC/G,yGAAyG,MAAM;AAC/G;AACA,SAAS;AACT;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yGAAyG,MAAM;AAC/G,yGAAyG,MAAM;AAC/G,yGAAyG,MAAM;AAC/G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG,MAAM;AAC/G;AACA,sFAAsF,MAAM,IAAI,OAAO,aAAa,MAAM;AAC1H;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kBAAkB;AAClB;AACA;;;;;;;ACnYa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;;;;;;AClDa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;;;;;;;AClDa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,uBAAuB,mBAAO,CAAC,KAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;;;;;;;ACpCa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB;AACxB,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,uBAAuB,mBAAO,CAAC,KAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;;;;;;;ACjDa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,uBAAuB,mBAAO,CAAC,KAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;;;;;;;ACzDa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB;AACpB,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG,MAAM;AAC/G;AACA,sFAAsF,MAAM,IAAI,OAAO,aAAa,uEAAuE;AAC3L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG,MAAM;AAC/G;AACA,sFAAsF,MAAM,IAAI,OAAO,aAAa,kEAAkE;AACtL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG,MAAM;AAC/G;AACA,sFAAsF,MAAM,IAAI,OAAO,aAAa,iEAAiE;AACrL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,MAAM,IAAI,OAAO,aAAa,iEAAiE;AACrL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG,MAAM;AAC/G;AACA,sFAAsF,MAAM,IAAI,OAAO,aAAa,mEAAmE;AACvL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,MAAM,IAAI,OAAO,aAAa,iEAAiE;AACrL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG,MAAM;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;;;;;;;AC9Ia;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B,uBAAuB,mBAAO,CAAC,KAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;;;;;;;AChDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB,GAAG,sCAAsC,GAAG,0BAA0B,GAAG,yBAAyB,GAAG,4BAA4B,GAAG,gDAAgD,GAAG,cAAc,GAAG,WAAW,GAAG,sBAAsB,GAAG,+BAA+B,GAAG,yBAAyB,GAAG,6BAA6B,GAAG,0BAA0B,GAAG,yBAAyB,GAAG,uBAAuB,GAAG,2BAA2B,GAAG,2BAA2B,GAAG,wBAAwB,GAAG,wBAAwB,GAAG,iBAAiB,GAAG,iBAAiB,GAAG,6BAA6B,GAAG,qBAAqB,GAAG,yBAAyB,GAAG,wBAAwB,GAAG,qBAAqB,GAAG,wBAAwB,GAAG,sBAAsB,GAAG,qBAAqB,GAAG,sBAAsB,GAAG,qBAAqB,GAAG,2BAA2B,GAAG,+BAA+B,GAAG,mBAAmB,GAAG,sBAAsB,GAAG,gBAAgB,GAAG,YAAY,GAAG,eAAe,GAAG,sBAAsB,GAAG,iBAAiB,GAAG,sBAAsB,GAAG,mBAAmB,GAAG,gBAAgB,GAAG,qBAAqB,GAAG,qBAAqB,GAAG,sBAAsB,GAAG,mCAAmC,GAAG,mCAAmC,GAAG,qCAAqC,GAAG,uCAAuC;AAC30C,2BAA2B,GAAG,0BAA0B,GAAG,6BAA6B,GAAG,4BAA4B,GAAG,6BAA6B,GAAG,0BAA0B,GAAG,mCAAmC,GAAG,mCAAmC,GAAG,4BAA4B,GAAG,qBAAqB,GAAG,kDAAkD,GAAG,8CAA8C,GAAG,6CAA6C,GAAG,sCAAsC,GAAG,yCAAyC,GAAG,wCAAwC,GAAG,uCAAuC,GAAG,mCAAmC,GAAG,kCAAkC,GAAG,+BAA+B,GAAG,oCAAoC,GAAG,qCAAqC,GAAG,oCAAoC,GAAG,qCAAqC,GAAG,kCAAkC,GAAG,2CAA2C,GAAG,2CAA2C,GAAG,6BAA6B,GAAG,iCAAiC,GAAG,yBAAyB,GAAG,mBAAmB,GAAG,8BAA8B,GAAG,oBAAoB,GAAG,yBAAyB,GAAG,0BAA0B,GAAG,wBAAwB,GAAG,kBAAkB,GAAG,6BAA6B,GAAG,kCAAkC,GAAG,iCAAiC,GAAG,mCAAmC,GAAG,4BAA4B,GAAG,qBAAqB,GAAG,qBAAqB,GAAG,oBAAoB,GAAG,qBAAqB,GAAG,eAAe,GAAG,6BAA6B,GAAG,8BAA8B,GAAG,yBAAyB;AACtpD,iBAAiB,GAAG,eAAe,GAAG,4CAA4C,GAAG,2CAA2C,GAAG,2CAA2C,GAAG,oCAAoC,GAAG,iCAAiC,GAAG,gCAAgC,GAAG,+BAA+B,GAAG,iBAAiB;AAClV,6BAA6B,mBAAO,CAAC,KAAgC;AACrE,+CAA8C,EAAE,qCAAqC,4CAA4C,EAAC;AAClI,kDAAiD,EAAE,qCAAqC,+CAA+C,EAAC;AACxI,kDAAiD,EAAE,qCAAqC,+CAA+C,EAAC;AACxI,6CAA4C,EAAE,qCAAqC,0CAA0C,EAAC;AAC9H,2CAA0C,EAAE,qCAAqC,wCAAwC,EAAC;AAC1H,8BAA8B,mBAAO,CAAC,KAAiC;AACvE,iDAAgD,EAAE,qCAAqC,+CAA+C,EAAC;AACvI,iDAAgD,EAAE,qCAAqC,+CAA+C,EAAC;AACvI,8CAA6C,EAAE,qCAAqC,4CAA4C,EAAC;AACjI,gDAA+C,EAAE,qCAAqC,8CAA8C,EAAC;AACrI,+DAA8D,EAAE,qCAAqC,6DAA6D,EAAC;AACnK,yDAAwD,EAAE,qCAAqC,uDAAuD,EAAC;AACvJ,8DAA6D,EAAE,qCAAqC,4DAA4D,EAAC;AACjK,6DAA4D,EAAE,qCAAqC,2DAA2D,EAAC;AAC/J,+DAA8D,EAAE,qCAAqC,6DAA6D,EAAC;AACnK,+DAA8D,EAAE,qCAAqC,6DAA6D,EAAC;AACnK,mEAAkE,EAAE,qCAAqC,iEAAiE,EAAC;AAC3K,iEAAgE,EAAE,qCAAqC,+DAA+D,EAAC;AACvK,2CAA0C,EAAE,qCAAqC,yCAAyC,EAAC;AAC3H,kDAAiD,EAAE,qCAAqC,gDAAgD,EAAC;AACzI,oDAAmD,EAAE,qCAAqC,kDAAkD,EAAC;AAC7I,iDAAgD,EAAE,qCAAqC,+CAA+C,EAAC;AACvI,iDAAgD,EAAE,qCAAqC,+CAA+C,EAAC;AACvI,yDAAwD,EAAE,qCAAqC,uDAAuD,EAAC;AACvJ,mDAAkD,EAAE,qCAAqC,iDAAiD,EAAC;AAC3I,0DAAyD,EAAE,qCAAqC,wDAAwD,EAAC;AACzJ,qDAAoD,EAAE,qCAAqC,mDAAmD,EAAC;AAC/I,sDAAqD,EAAE,qCAAqC,oDAAoD,EAAC;AACjJ,kEAAiE,EAAE,qCAAqC,gEAAgE,EAAC;AACzK,wDAAuD,EAAE,qCAAqC,sDAAsD,EAAC;AACrJ,qDAAoD,EAAE,qCAAqC,mDAAmD,EAAC;AAC/I,wDAAuD,EAAE,qCAAqC,sDAAsD,EAAC;AACrJ,kDAAiD,EAAE,qCAAqC,gDAAgD,EAAC;AACzI,2DAA0D,EAAE,qCAAqC,yDAAyD,EAAC;AAC3J,kDAAiD,EAAE,qCAAqC,gDAAgD,EAAC;AACzI,iDAAgD,EAAE,qCAAqC,+CAA+C,EAAC;AACvI,iDAAgD,EAAE,qCAAqC,+CAA+C,EAAC;AACvI,qDAAoD,EAAE,qCAAqC,mDAAmD,EAAC;AAC/I,sDAAqD,EAAE,qCAAqC,oDAAoD,EAAC;AACjJ,gDAA+C,EAAE,qCAAqC,8CAA8C,EAAC;AACrI,oDAAmD,EAAE,qCAAqC,kDAAkD,EAAC;AAC7I,0DAAyD,EAAE,qCAAqC,wDAAwD,EAAC;AACzJ,6CAA4C,EAAE,qCAAqC,2CAA2C,EAAC;AAC/H,qDAAoD,EAAE,qCAAqC,mDAAmD,EAAC;AAC/I,oDAAmD,EAAE,qCAAqC,kDAAkD,EAAC;AAC7I,6BAA6B,mBAAO,CAAC,KAAgC;AACrE,uCAAsC,EAAE,qCAAqC,oCAAoC,EAAC;AAClH,0CAAyC,EAAE,qCAAqC,uCAAuC,EAAC;AACxH,eAAe,mBAAO,CAAC,KAAQ;AAC/B,iDAAgD,EAAE,qCAAqC,gCAAgC,EAAC;AACxH,4CAA2C,EAAE,qCAAqC,2BAA2B,EAAC;AAC9G,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,6CAA4C,EAAE,qCAAqC,8CAA8C,EAAC;AAClI,oDAAmD,EAAE,qCAAqC,qDAAqD,EAAC;AAChJ,2DAA0D,EAAE,qCAAqC,4DAA4D,EAAC;AAC9J,qDAAoD,EAAE,qCAAqC,sDAAsD,EAAC;AAClJ,yDAAwD,EAAE,qCAAqC,0DAA0D,EAAC;AAC1J,oDAAmD,EAAE,qCAAqC,qDAAqD,EAAC;AAChJ,uDAAsD,EAAE,qCAAqC,wDAAwD,EAAC;AACtJ,uDAAsD,EAAE,qCAAqC,wDAAwD,EAAC;AACtJ,mDAAkD,EAAE,qCAAqC,oDAAoD,EAAC;AAC9I,qDAAoD,EAAE,qCAAqC,sDAAsD,EAAC;AAClJ,kDAAiD,EAAE,qCAAqC,mDAAmD,EAAC;AAC5I,sDAAqD,EAAE,qCAAqC,uDAAuD,EAAC;AACpJ,6CAA4C,EAAE,qCAAqC,8CAA8C,EAAC;AAClI,2CAA0C,EAAE,qCAAqC,4CAA4C,EAAC;AAC9H,uDAAsD,EAAE,qCAAqC,wDAAwD,EAAC;AACtJ,+DAA8D,EAAE,qCAAqC,gEAAgE,EAAC;AACtK,6DAA4D,EAAE,qCAAqC,8DAA8D,EAAC;AAClK,+DAA8D,EAAE,qCAAqC,gEAAgE,EAAC;AACtK,iDAAgD,EAAE,qCAAqC,kDAAkD,EAAC;AAC1I,gEAA+D,EAAE,qCAAqC,iEAAiE,EAAC;AACxK,uEAAsE,EAAE,qCAAqC,wEAAwE,EAAC;AACtL,uEAAsE,EAAE,qCAAqC,wEAAwE,EAAC;AACtL,wEAAuE,EAAE,qCAAqC,yEAAyE,EAAC;AACxL,4DAA2D,EAAE,qCAAqC,6DAA6D,EAAC;AAChK,sDAAqD,EAAE,qCAAqC,uDAAuD,EAAC;AACpJ,wDAAuD,EAAE,qCAAqC,yDAAyD,EAAC;AACxJ,yDAAwD,EAAE,qCAAqC,0DAA0D,EAAC;AAC1J,wDAAuD,EAAE,qCAAqC,yDAAyD,EAAC;AACxJ,2DAA0D,EAAE,qCAAqC,4DAA4D,EAAC;AAC9J,yDAAwD,EAAE,qCAAqC,0DAA0D,EAAC;AAC1J,sDAAqD,EAAE,qCAAqC,uDAAuD,EAAC;AACpJ,iDAAgD,EAAE,qCAAqC,kDAAkD,EAAC;AAC1I,yDAAwD,EAAE,qCAAqC,0DAA0D,EAAC;AAC1J,kEAAiE,EAAE,qCAAqC,mEAAmE,EAAC;AAC5K,yEAAwE,EAAE,qCAAqC,0EAA0E,EAAC;AAC1L,0EAAyE,EAAE,qCAAqC,2EAA2E,EAAC;AAC5L,8EAA6E,EAAE,qCAAqC,+EAA+E,EAAC;AACpM,2DAA0D,EAAE,qCAAqC,4DAA4D,EAAC;AAC9J,+DAA8D,EAAE,qCAAqC,gEAAgE,EAAC;AACtK,uEAAsE,EAAE,qCAAqC,wEAAwE,EAAC;AACtL,qEAAoE,EAAE,qCAAqC,sEAAsE,EAAC;AAClL,uEAAsE,EAAE,qCAAqC,wEAAwE,EAAC;AACtL,yDAAwD,EAAE,qCAAqC,0DAA0D,EAAC;AAC1J,6DAA4D,EAAE,qCAAqC,8DAA8D,EAAC;AAClK,oEAAmE,EAAE,qCAAqC,qEAAqE,EAAC;AAChL,8DAA6D,EAAE,qCAAqC,+DAA+D,EAAC;AACpK,gEAA+D,EAAE,qCAAqC,iEAAiE,EAAC;AACxK,iEAAgE,EAAE,qCAAqC,kEAAkE,EAAC;AAC1K,gEAA+D,EAAE,qCAAqC,iEAAiE,EAAC;AACxK,mEAAkE,EAAE,qCAAqC,oEAAoE,EAAC;AAC9K,iEAAgE,EAAE,qCAAqC,kEAAkE,EAAC;AAC1K,8DAA6D,EAAE,qCAAqC,+DAA+D,EAAC;AACpK,6CAA4C,EAAE,qCAAqC,8CAA8C,EAAC;AAClI,0CAA0C,mBAAO,CAAC,IAA6C;AAC/F,uDAAsD,EAAE,qCAAqC,iEAAiE,EAAC;AAC/J,+CAA+C,mBAAO,CAAC,IAAkD;AACzG,+CAA8C,EAAE,qCAAqC,8DAA8D,EAAC;AACpJ,qDAAoD,EAAE,qCAAqC,oEAAoE,EAAC;AAChK,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E,wCAAuC,EAAE,qCAAqC,0CAA0C,EAAC;AACzH,4CAA2C,EAAE,qCAAqC,8CAA8C,EAAC;AACjI,wBAAwB,mBAAO,CAAC,KAAqC;AACrE,iDAAgD,EAAE,qCAAqC,yCAAyC,EAAC;AACjI,yBAAyB,mBAAO,CAAC,KAAsC;AACvE,kDAAiD,EAAE,qCAAqC,2CAA2C,EAAC;AACpI,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E,4EAA2E,EAAE,qCAAqC,8EAA8E,EAAC;AACjM,kCAAkC,mBAAO,CAAC,KAAqC;AAC/E,+CAA8C,EAAE,qCAAqC,4EAA4E,EAAC;AAClK;;;;;;;AC/Ha;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,gBAAgB;AACxC,iDAAiD,mBAAO,CAAC,KAAoD;AAC7G,iCAAiC,mBAAO,CAAC,IAAoC;AAC7E,qBAAqB,mBAAO,CAAC,KAA6B;AAC1D,6BAA6B,mBAAO,CAAC,KAAgC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,mGAAmG;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,eAAe;AACnC;AACA,sLAAsL,YAAY;AAClM,sHAAsH,gBAAgB,0DAA0D,cAAc;AAC9M,2DAA2D,oGAAoG;AAC/J;AACA;AACA;AACA,uGAAuG,yBAAyB;AAChI;AACA,4GAA4G,gCAAgC;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,2BAA2B;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB","sources":["webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/OutputDelayException.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/OutputLoader.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/SessionData.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/SessionEngine.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/SessionOutputData.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/SessionTreeNode.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/dto/DrawingParameter.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/dto/Export.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/dto/FileParameter.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/dto/Output.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/dto/Parameter.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/dto/interaction/GumballParameter.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/implementation/dto/interaction/SelectionParameter.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session-engine.session-engine/dist/index.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/ExportApi.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/OutputApi.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/SessionApi.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/data/OutputApiData.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/data/SessionApiData.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/parameter/DrawingParameterApi.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/parameter/FileParameterApi.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/parameter/GumballParameterApi.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/parameter/ParameterApi.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/implementation/parameter/SelectionParameterApi.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/index.js","webpack://spinlio-workspace/./node_modules/@shapediver/viewer.session/dist/main.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutputDelayException = void 0;\r\nclass OutputDelayException extends Error {\r\n    // #region Constructors (1)\r\n    /**\r\n     * Exception that is thrown when there is an output with a delay property.\r\n     *\r\n     * @param _delay the milliseconds to wait\r\n     */\r\n    constructor(_delay) {\r\n        super();\r\n        this._delay = _delay;\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (1)\r\n    get delay() {\r\n        return this._delay;\r\n    }\r\n}\r\nexports.OutputDelayException = OutputDelayException;\r\n//# sourceMappingURL=OutputDelayException.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutputLoader = void 0;\r\nconst viewer_shared_types_1 = require(\"@shapediver/viewer.shared.types\");\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst viewer_shared_global_access_objects_1 = require(\"@shapediver/viewer.shared.global-access-objects\");\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nconst OutputDelayException_1 = require(\"./OutputDelayException\");\r\nconst SessionOutputData_1 = require(\"./SessionOutputData\");\r\nconst SessionTreeNode_1 = require(\"./SessionTreeNode\");\r\n// #endregion Type aliases (1)\r\n// #region Classes (1)\r\nclass OutputLoader {\r\n    // #endregion Properties (6)\r\n    // #region Constructors (1)\r\n    /**\r\n     * The output loader takes care of loading the outputs of a session, storing them and returning stored or newly loaded nodes.\r\n     *\r\n     * @param _session the session for this output loader\r\n     */\r\n    constructor(_sessionEngine) {\r\n        this._sessionEngine = _sessionEngine;\r\n        // #region Properties (6)\r\n        this._eventEngine = viewer_shared_services_1.EventEngine.instance;\r\n        this._globalAccessObjects = viewer_shared_global_access_objects_1.GlobalAccessObjects.instance;\r\n        this._lastOutputNodes = {};\r\n        this._loadedOutputNodes = {};\r\n        this._performanceEvaluator = viewer_shared_services_1.PerformanceEvaluator.instance;\r\n        this._reloadSdtf = false;\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (1)\r\n    set reloadSdtf(value) {\r\n        this._reloadSdtf = value;\r\n    }\r\n    // #endregion Public Getters And Setters (1)\r\n    // #region Public Methods (2)\r\n    getCurrentOutputVersions() {\r\n        const versions = {};\r\n        for (const o in this._lastOutputNodes)\r\n            versions[o] = Object.keys(this._lastOutputNodes[o])[0];\r\n        return versions;\r\n    }\r\n    /**\r\n     * Load the outputs and return the scene graph node of the result.\r\n     * In case the outputs have a delay property, it throws an OutputDelayException.\r\n     *\r\n     * @param outputs the outputs to load\r\n     * @returns promise with a scene graph node\r\n     */\r\n    loadOutputs(nodeName, outputs, outputsFreeze, taskEventInfo, throwDelay = true) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._performanceEvaluator.startSection('outputLoading');\r\n            const node = new SessionTreeNode_1.SessionTreeNode(nodeName);\r\n            const currentNodes = {};\r\n            const outputInfo = {};\r\n            const promises = [];\r\n            const promisesNodes = [];\r\n            let maxDelay = 0;\r\n            const progress = {};\r\n            const outputIDs = Object.keys(outputs);\r\n            const cb = (e) => {\r\n                const taskEvent = e;\r\n                if (outputIDs.find(oId => taskEvent.id.startsWith(oId))) {\r\n                    progress[taskEvent.id] = taskEvent.progress;\r\n                    let sum = 0;\r\n                    Object.values(progress).forEach(p => { sum += p; });\r\n                    const outputLoadingProgress = (taskEventInfo.progressRange.max - taskEventInfo.progressRange.min) * (sum / outputIDs.length) + taskEventInfo.progressRange.min;\r\n                    const eventProgressUpdate = { type: taskEventInfo.type, id: taskEventInfo.eventId, progress: outputLoadingProgress, data: taskEventInfo.data, status: 'Output content loading progress.' };\r\n                    this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_PROCESS, eventProgressUpdate);\r\n                }\r\n            };\r\n            const listenerTokens = [];\r\n            listenerTokens.push(this._eventEngine.addListener(viewer_shared_services_1.EVENTTYPE.TASK.TASK_START, cb));\r\n            listenerTokens.push(this._eventEngine.addListener(viewer_shared_services_1.EVENTTYPE.TASK.TASK_PROCESS, cb));\r\n            listenerTokens.push(this._eventEngine.addListener(viewer_shared_services_1.EVENTTYPE.TASK.TASK_CANCEL, cb));\r\n            listenerTokens.push(this._eventEngine.addListener(viewer_shared_services_1.EVENTTYPE.TASK.TASK_END, cb));\r\n            for (const outputID in outputs) {\r\n                // we store some necessary information as this data may have been changed after the await (see warning below)\r\n                outputInfo[outputID] = {\r\n                    version: outputs[outputID].version,\r\n                    contentFormat: outputs[outputID].content ? outputs[outputID].content.map(c => c.format) : []\r\n                };\r\n                currentNodes[outputID] = {};\r\n                if (!this._loadedOutputNodes[outputID])\r\n                    this._loadedOutputNodes[outputID] = {};\r\n                if (this._reloadSdtf && outputs[outputID].content) {\r\n                    const sdtfContents = (_a = outputs[outputID].content) === null || _a === void 0 ? void 0 : _a.filter(c => c.format === 'sdtf');\r\n                    if (sdtfContents && sdtfContents.length > 0)\r\n                        delete this._loadedOutputNodes[outputID][outputInfo[outputID].version];\r\n                }\r\n                if (outputsFreeze[outputID]) {\r\n                    currentNodes[outputID][outputInfo[outputID].version] = this._lastOutputNodes[outputID][outputInfo[outputID].version];\r\n                    // no loading necessary, progress done\r\n                    progress[outputID] = 1;\r\n                }\r\n                else if (outputs[outputID].delay) {\r\n                    maxDelay = Math.max(maxDelay, outputs[outputID].delay);\r\n                }\r\n                else if (!this._loadedOutputNodes[outputID][outputInfo[outputID].version]) {\r\n                    currentNodes[outputID][outputInfo[outputID].version] = new SessionTreeNode_1.SessionTreeNode(outputID);\r\n                    currentNodes[outputID][outputInfo[outputID].version].data.push(new SessionOutputData_1.SessionOutputData(outputs[outputID]));\r\n                    if (outputs[outputID].content) {\r\n                        for (let i = 0, len = outputs[outputID].content.length; i < len; i++) {\r\n                            if (outputs[outputID].content[i].format === 'sdtf' && !this._sessionEngine.loadSdtf)\r\n                                continue;\r\n                            if (this._globalAccessObjects.loadContent)\r\n                                promises.push(this._globalAccessObjects.loadContent(outputs[outputID].content[i], this._sessionEngine.jwtToken, outputID + '_' + outputInfo[outputID].version + '_' + i));\r\n                            promisesNodes.push(currentNodes[outputID][outputInfo[outputID].version]);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    currentNodes[outputID][outputInfo[outputID].version] = this._loadedOutputNodes[outputID][outputInfo[outputID].version];\r\n                    // no loading necessary, progress done\r\n                    progress[outputID] = 1;\r\n                }\r\n            }\r\n            if (maxDelay && throwDelay)\r\n                throw new OutputDelayException_1.OutputDelayException(maxDelay);\r\n            /**\r\n             * WARNING: After this point outputs object cannot be used anymore.\r\n             * This can happen when fast consecutive scene updates are done.\r\n             * Therefore, we stored the data in the outputInfo.\r\n             */\r\n            yield Promise.all(promises);\r\n            listenerTokens.forEach(t => this._eventEngine.removeListener(t));\r\n            // all promises are resolved, await in the next lines is just for structural purposes\r\n            for (let i = 0; i < promises.length; i++)\r\n                promisesNodes[i].addChild(yield promises[i]);\r\n            // here we assign all outputs just to the node and return it\r\n            for (const outputID in outputInfo)\r\n                if (currentNodes[outputID][outputInfo[outputID].version])\r\n                    node.addChild(currentNodes[outputID][outputInfo[outputID].version]);\r\n            // save the nodes as the last available version\r\n            for (const outputID in outputInfo) {\r\n                if (!currentNodes[outputID][outputInfo[outputID].version])\r\n                    continue;\r\n                this._loadedOutputNodes[outputID] = {};\r\n                this._loadedOutputNodes[outputID][outputInfo[outputID].version] = currentNodes[outputID][outputInfo[outputID].version];\r\n                this._lastOutputNodes[outputID] = {};\r\n                this._lastOutputNodes[outputID][outputInfo[outputID].version] = currentNodes[outputID][outputInfo[outputID].version];\r\n            }\r\n            for (const outputID in outputInfo) {\r\n                if (!currentNodes[outputID][outputInfo[outputID].version])\r\n                    continue;\r\n                if (currentNodes[outputID][outputInfo[outputID].version].children.length > 1) {\r\n                    for (let i = 0, len = outputInfo[outputID].contentFormat.length; i < len; i++) {\r\n                        if (outputInfo[outputID].contentFormat[i] === 'sdtf' && this._sessionEngine.loadSdtf === true) {\r\n                            this.mergeContentNodes(currentNodes[outputID][outputInfo[outputID].version]);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.assignMaterials(node);\r\n            this._performanceEvaluator.endSection('outputLoading');\r\n            return node;\r\n        });\r\n    }\r\n    // #endregion Public Methods (2)\r\n    // #region Private Methods (2)\r\n    assignMaterials(node) {\r\n        const addMaterialToGeometry = (node, material) => {\r\n            for (let i = 0; i < node.data.length; i++) {\r\n                if (node.data[i] instanceof viewer_shared_types_1.GeometryData) {\r\n                    const geometry = node.data[i];\r\n                    const currentMaterial = geometry.material;\r\n                    if (currentMaterial === null || currentMaterial.materialOutput === true) {\r\n                        geometry.material = material;\r\n                    }\r\n                }\r\n            }\r\n            for (let i = 0; i < node.children.length; i++) {\r\n                const child = node.children[i];\r\n                if (child)\r\n                    addMaterialToGeometry(child, material);\r\n            }\r\n        };\r\n        const getMaterialData = (node, materials = []) => {\r\n            for (let k = 0; k < node.data.length; k++) {\r\n                if (node.data[k] instanceof viewer_shared_types_1.AbstractMaterialData) {\r\n                    const material = node.data[k];\r\n                    material.materialOutput = true;\r\n                    materials.push(material);\r\n                }\r\n            }\r\n            for (let k = 0; k < node.children.length; k++) {\r\n                const child = node.children[k];\r\n                if (!child)\r\n                    continue;\r\n                materials.push(...getMaterialData(child));\r\n            }\r\n            return materials;\r\n        };\r\n        for (let m = 0; m < node.children.length; m++) {\r\n            // per output node, we go through the material assignment process\r\n            const outputNode = node.children[m];\r\n            if (!outputNode)\r\n                continue;\r\n            // we go through all data properties, normally, there should ony one, but we just make sure\r\n            for (let i = 0; i < outputNode.data.length; i++) {\r\n                if (!(outputNode.data[i] instanceof SessionOutputData_1.SessionOutputData))\r\n                    continue;\r\n                // the session output data contains information about this Output\r\n                // most importantly the SessionOutput property with the material and content in it\r\n                const sessionOutputData = outputNode.data[i];\r\n                // case 1: we have a specific material id defined, let's use that\r\n                if (sessionOutputData.responseOutput.material) {\r\n                    let materialNodes = [];\r\n                    // now we have id\r\n                    // get material with it    \r\n                    for (let n = 0; n < node.children.length; n++) {\r\n                        const materialNode = node.children[n];\r\n                        if (!materialNode)\r\n                            continue;\r\n                        if (materialNode.name === sessionOutputData.responseOutput.material)\r\n                            materialNodes = materialNode.children;\r\n                    }\r\n                    const geometryNodes = outputNode.children;\r\n                    if (materialNodes.length >= geometryNodes.length) {\r\n                        for (let n = 0; n < geometryNodes.length; n++) {\r\n                            addMaterialToGeometry(geometryNodes[n], getMaterialData(materialNodes[n])[0]);\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (materialNodes.length >= 1)\r\n                            for (let n = 0; n < geometryNodes.length; n++) {\r\n                                addMaterialToGeometry(geometryNodes[n], getMaterialData(materialNodes[0])[0]);\r\n                            }\r\n                    }\r\n                }\r\n                // case 2: there is no specific material id defined, maybe in the content we can match geometries to ids\r\n                else {\r\n                    // now we hope that in our content, there are exactly the amount of geometries and material, this will be interesting :)\r\n                    const sessionOutputContent = sessionOutputData.responseOutput.content;\r\n                    if (sessionOutputContent === undefined)\r\n                        continue;\r\n                    const materialNodes = [];\r\n                    const geometryNodes = [];\r\n                    for (let i = 0; i < sessionOutputContent.length; i++) {\r\n                        if (sessionOutputContent[i].format === 'material') {\r\n                            if (outputNode.children[i])\r\n                                materialNodes.push(outputNode.children[i]);\r\n                        }\r\n                        else {\r\n                            if (outputNode.children[i])\r\n                                geometryNodes.push(outputNode.children[i]);\r\n                        }\r\n                    }\r\n                    if (materialNodes.length >= geometryNodes.length) {\r\n                        for (let n = 0; n < geometryNodes.length; n++) {\r\n                            addMaterialToGeometry(geometryNodes[n], getMaterialData(materialNodes[n])[0]);\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (materialNodes.length >= 1)\r\n                            for (let n = 0; n < geometryNodes.length; n++) {\r\n                                addMaterialToGeometry(geometryNodes[n], getMaterialData(materialNodes[0])[0]);\r\n                            }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    mergeContentNodes(node) {\r\n        if (!(node.children.length > 1))\r\n            return;\r\n        const children = [];\r\n        while (node.children.length > 0) {\r\n            children.push(...node.children[0].children);\r\n            node.removeChild(node.children[0]);\r\n        }\r\n        const mergeNodes = (node1, node2) => {\r\n            for (let i = 0; i < node1.data.length; i++)\r\n                node2.data.push(node1.data[i]);\r\n            for (let i = 0; i < node1.children.length; i++) {\r\n                let childNode;\r\n                for (let j = 0; j < node2.children.length; j++) {\r\n                    if (node1.children[i].name === node2.children[j].name) {\r\n                        childNode = node2.children[j];\r\n                        break;\r\n                    }\r\n                }\r\n                if (!childNode) {\r\n                    childNode = new viewer_shared_node_tree_1.TreeNode(node1.children[i].name);\r\n                    node2.addChild(childNode);\r\n                }\r\n                mergeNodes(node1.children[i], childNode);\r\n            }\r\n        };\r\n        const newChild = new viewer_shared_node_tree_1.TreeNode('content_array');\r\n        node.addChild(newChild);\r\n        for (let i = 0; i < children.length; i++)\r\n            mergeNodes(children[i], newChild);\r\n    }\r\n}\r\nexports.OutputLoader = OutputLoader;\r\n// #endregion Classes (1)\r\n//# sourceMappingURL=OutputLoader.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _SessionData_responseDto;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionData = void 0;\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nclass SessionData extends viewer_shared_node_tree_1.AbstractTreeNodeData {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    constructor(responseDto, id, version) {\r\n        super(id, version);\r\n        // #region Properties (1)\r\n        _SessionData_responseDto.set(this, void 0);\r\n        __classPrivateFieldSet(this, _SessionData_responseDto, responseDto, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (2)\r\n    get responseDto() {\r\n        return __classPrivateFieldGet(this, _SessionData_responseDto, \"f\");\r\n    }\r\n    set responseDto(value) {\r\n        __classPrivateFieldSet(this, _SessionData_responseDto, value, \"f\");\r\n    }\r\n    // #endregion Public Getters And Setters (2)\r\n    // #region Public Methods (1)\r\n    clone() {\r\n        return new SessionData(this.responseDto, this.id, this.version);\r\n    }\r\n}\r\nexports.SessionData = SessionData;\r\n_SessionData_responseDto = new WeakMap();\r\n//# sourceMappingURL=SessionData.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar _SessionEngine_customizationBusyModes, _SessionEngine_customizationProcess, _SessionEngine_parameterHistory, _SessionEngine_parameterHistoryCall, _SessionEngine_parameterHistoryForward;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionEngine = void 0;\r\nconst viewer_settings_1 = require(\"@shapediver/viewer.settings\");\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst sdk_geometry_api_sdk_v2_1 = require(\"@shapediver/sdk.geometry-api-sdk-v2\");\r\nconst DrawingParameter_1 = require(\"./dto/DrawingParameter\");\r\nconst Export_1 = require(\"./dto/Export\");\r\nconst FileParameter_1 = require(\"./dto/FileParameter\");\r\nconst GumballParameter_1 = require(\"./dto/interaction/GumballParameter\");\r\nconst viewer_shared_types_1 = require(\"@shapediver/viewer.shared.types\");\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nconst Output_1 = require(\"./dto/Output\");\r\nconst OutputDelayException_1 = require(\"./OutputDelayException\");\r\nconst OutputLoader_1 = require(\"./OutputLoader\");\r\nconst Parameter_1 = require(\"./dto/Parameter\");\r\nconst SelectionParameter_1 = require(\"./dto/interaction/SelectionParameter\");\r\nconst SessionData_1 = require(\"./SessionData\");\r\nconst SessionTreeNode_1 = require(\"./SessionTreeNode\");\r\n/* eslint-disable @typescript-eslint/no-empty-function */\r\nclass SessionEngine {\r\n    // #endregion Properties (50)\r\n    // #region Constructors (1)\r\n    /**\r\n     * Can be use to initialize a session with the ticket/guid and modelViewUrl and returns a scene graph node with the result.\r\n     * Can be use to customize the session with updated parameters to get the updated scene graph node.\r\n     */\r\n    constructor(properties) {\r\n        // #region Properties (50)\r\n        this._converter = viewer_shared_services_1.Converter.instance;\r\n        this._eventEngine = viewer_shared_services_1.EventEngine.instance;\r\n        this._exports = {};\r\n        this._httpClient = viewer_shared_services_1.HttpClient.instance;\r\n        this._logger = viewer_shared_services_1.Logger.instance;\r\n        this._outputs = {};\r\n        this._outputsFreeze = {};\r\n        this._parameterValues = {};\r\n        this._parameters = {};\r\n        this._performanceEvaluator = viewer_shared_services_1.PerformanceEvaluator.instance;\r\n        this._sceneTree = viewer_shared_node_tree_1.Tree.instance;\r\n        this._sessionEngineId = (viewer_shared_services_1.UuidGenerator.instance).create();\r\n        this._settingsEngine = new viewer_shared_services_1.SettingsEngine();\r\n        this._stateEngine = viewer_shared_services_1.StateEngine.instance;\r\n        this._uuidGenerator = viewer_shared_services_1.UuidGenerator.instance;\r\n        _SessionEngine_customizationBusyModes.set(this, []);\r\n        _SessionEngine_customizationProcess.set(this, void 0);\r\n        _SessionEngine_parameterHistory.set(this, []);\r\n        _SessionEngine_parameterHistoryCall.set(this, false);\r\n        _SessionEngine_parameterHistoryForward.set(this, []);\r\n        this._allowOutputLoading = true;\r\n        this._automaticSceneUpdate = true;\r\n        this._closeOnFailure = () => __awaiter(this, void 0, void 0, function* () { });\r\n        this._closed = false;\r\n        this._customizeOnParameterChange = false;\r\n        this._dataCache = {};\r\n        this._excludeViewports = [];\r\n        this._headers = {\r\n            'X-ShapeDiver-Origin': (viewer_shared_services_1.SystemInfo.instance).origin,\r\n            'X-ShapeDiver-SessionEngineId': this._sessionEngineId,\r\n            'X-ShapeDiver-BuildVersion': '',\r\n            'X-ShapeDiver-BuildDate': ''\r\n        };\r\n        this._initialized = false;\r\n        this._loadSdtf = false;\r\n        this._retryCounter = 0;\r\n        this._updateCallback = null;\r\n        this._viewerSettingsVersion = viewer_settings_1.latestVersion;\r\n        this._viewerSettingsVersionBackend = viewer_settings_1.latestVersion;\r\n        this._id = properties.id;\r\n        this._node = new viewer_shared_node_tree_1.TreeNode(properties.id);\r\n        this._guid = properties.guid;\r\n        this._ticket = properties.ticket;\r\n        this._modelViewUrl = properties.modelViewUrl;\r\n        this._excludeViewports = properties.excludeViewports || [];\r\n        this._jwtToken = properties.jwtToken;\r\n        this._allowOutputLoading = properties.allowOutputLoading;\r\n        this._loadSdtf = properties.loadSdtf;\r\n        this._modelStateId = properties.modelStateId;\r\n        this._modelStateValidationMode = properties.modelStateValidationMode;\r\n        this._headers['X-ShapeDiver-BuildDate'] = properties.buildDate;\r\n        this._headers['X-ShapeDiver-BuildVersion'] = properties.buildVersion;\r\n        this._outputLoader = new OutputLoader_1.OutputLoader(this);\r\n        try {\r\n            this._sdk = (0, sdk_geometry_api_sdk_v2_1.create)(this._modelViewUrl, this._jwtToken);\r\n            this._sdk.setConfigurationValue(sdk_geometry_api_sdk_v2_1.ShapeDiverSdkConfigType.REQUEST_HEADERS, this._headers);\r\n        }\r\n        catch (e) {\r\n            throw this._httpClient.convertError(e);\r\n        }\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (28)\r\n    get automaticSceneUpdate() {\r\n        return this._automaticSceneUpdate;\r\n    }\r\n    set automaticSceneUpdate(value) {\r\n        this._automaticSceneUpdate = value;\r\n        value && this._closed === false ? this.addToSceneTree(this._node) : this.removeFromSceneTree(this._node);\r\n    }\r\n    get canUploadGLTF() {\r\n        try {\r\n            this.checkAvailability('gltf-upload');\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    get customizeOnParameterChange() {\r\n        return this._customizeOnParameterChange;\r\n    }\r\n    set customizeOnParameterChange(value) {\r\n        this._customizeOnParameterChange = value;\r\n    }\r\n    get excludeViewports() {\r\n        return this._excludeViewports;\r\n    }\r\n    set excludeViewports(value) {\r\n        this._excludeViewports = JSON.parse(JSON.stringify(value));\r\n        this._node.excludeViewports = JSON.parse(JSON.stringify(value));\r\n    }\r\n    get exports() {\r\n        return this._exports;\r\n    }\r\n    get guid() {\r\n        return this._guid;\r\n    }\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    get initialized() {\r\n        return this._initialized;\r\n    }\r\n    get jwtToken() {\r\n        return this._jwtToken;\r\n    }\r\n    get loadSdtf() {\r\n        return this._loadSdtf;\r\n    }\r\n    set loadSdtf(value) {\r\n        this._loadSdtf = value;\r\n        if (this._initialized === true && this._loadSdtf === true) {\r\n            (() => __awaiter(this, void 0, void 0, function* () {\r\n                this._outputLoader.reloadSdtf = true;\r\n                yield this.updateOutputs();\r\n                this._outputLoader.reloadSdtf = false;\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.SESSION.SESSION_SDTF_DELAYED_LOADED, { sessionId: this.id });\r\n            }))();\r\n        }\r\n    }\r\n    get modelState() {\r\n        return this._modelState;\r\n    }\r\n    get modelViewUrl() {\r\n        return this._modelViewUrl;\r\n    }\r\n    get node() {\r\n        return this._node;\r\n    }\r\n    get outputs() {\r\n        return this._outputs;\r\n    }\r\n    get outputsFreeze() {\r\n        return this._outputsFreeze;\r\n    }\r\n    get parameterValues() {\r\n        return this._parameterValues;\r\n    }\r\n    get parameters() {\r\n        return this._parameters;\r\n    }\r\n    get refreshJwtToken() {\r\n        return this._refreshJwtToken;\r\n    }\r\n    set refreshJwtToken(value) {\r\n        this._refreshJwtToken = value;\r\n    }\r\n    get settingsEngine() {\r\n        return this._settingsEngine;\r\n    }\r\n    get ticket() {\r\n        return this._ticket;\r\n    }\r\n    get updateCallback() {\r\n        return this._updateCallback;\r\n    }\r\n    set updateCallback(value) {\r\n        this._updateCallback = value;\r\n    }\r\n    get viewerSettings() {\r\n        return this._viewerSettings;\r\n    }\r\n    // #endregion Public Getters And Setters (28)\r\n    // #region Public Methods (31)\r\n    applySettings(response, sections) {\r\n        sections = sections || {};\r\n        if (sections.session === undefined) {\r\n            sections.session = {\r\n                parameter: { displayname: false, order: false, hidden: false },\r\n                export: { displayname: false, order: false, hidden: false }\r\n            };\r\n        }\r\n        if (sections.session.parameter === undefined)\r\n            sections.session.parameter = { displayname: false, order: false, hidden: false, value: false };\r\n        if (sections.session.export === undefined)\r\n            sections.session.export = { displayname: false, order: false, hidden: false };\r\n        if (sections.viewport === undefined)\r\n            sections.viewport = { ar: false, scene: false, camera: false, light: false, environment: false, general: false, postprocessing: false };\r\n        let config;\r\n        if (response.viewer !== undefined) {\r\n            config = response.viewer.config;\r\n        }\r\n        else {\r\n            throw new viewer_shared_services_1.ShapeDiverViewerSettingsError('Session.applySettings: No config object available.');\r\n        }\r\n        try {\r\n            (0, viewer_settings_1.validate)(config);\r\n        }\r\n        catch (e) {\r\n            throw new viewer_shared_services_1.ShapeDiverViewerSettingsError('Session.applySettings: Was not able to validate config object.');\r\n        }\r\n        const settings = (0, viewer_settings_1.convert)(config, viewer_settings_1.latestVersion);\r\n        const exportMappingUid = {};\r\n        if (sections.session.export.displayname || sections.session.export.order || sections.session.export.hidden)\r\n            if (response.exports)\r\n                for (const exportId in response.exports)\r\n                    if (response.exports[exportId].uid !== undefined)\r\n                        exportMappingUid[response.exports[exportId].uid] = exportId;\r\n        const currentSettings = this._settingsEngine.settings;\r\n        // apply parameter settings\r\n        if (sections.session.parameter.displayname || sections.session.parameter.order || sections.session.parameter.hidden || sections.session.parameter.value) {\r\n            for (const p in this.parameters) {\r\n                if (settings.session[p]) {\r\n                    if (sections.session.parameter.displayname)\r\n                        this.parameters[p].displayname = settings.session[p].displayname;\r\n                    if (sections.session.parameter.order)\r\n                        this.parameters[p].order = settings.session[p].order;\r\n                    if (sections.session.parameter.hidden)\r\n                        this.parameters[p].hidden = settings.session[p].hidden || false;\r\n                }\r\n                if (response.parameters && response.parameters[p] && !((this.parameters[p] instanceof FileParameter_1.FileParameter) || this.parameters[p].type.startsWith('s'))) {\r\n                    if (sections.session.parameter.value)\r\n                        this.parameters[p].value = response.parameters[p].defval !== undefined ? response.parameters[p].defval : this.parameters[p].value;\r\n                }\r\n            }\r\n        }\r\n        // apply export settings\r\n        if (sections.session.export.displayname || sections.session.export.order || sections.session.export.hidden) {\r\n            for (const p in this.exports) {\r\n                let idForSettings = '';\r\n                if (settings.session[p]) {\r\n                    idForSettings = p;\r\n                }\r\n                else {\r\n                    const uid = this.exports[p].uid;\r\n                    if (!uid)\r\n                        continue;\r\n                    if (!exportMappingUid[uid])\r\n                        continue;\r\n                    idForSettings = exportMappingUid[uid];\r\n                }\r\n                if (settings.session[idForSettings]) {\r\n                    if (sections.session.export.displayname)\r\n                        this.exports[p].displayname = settings.session[idForSettings].displayname;\r\n                    if (sections.session.export.order)\r\n                        this.exports[p].order = settings.session[idForSettings].order;\r\n                    if (sections.session.export.hidden)\r\n                        this.exports[p].hidden = settings.session[idForSettings].hidden || false;\r\n                }\r\n            }\r\n        }\r\n        // apply ar settings\r\n        if (sections.viewport.ar) {\r\n            currentSettings.ar = settings.ar;\r\n            currentSettings.general.transformation = settings.general.transformation;\r\n        }\r\n        // apply camera settings\r\n        if (sections.viewport.camera)\r\n            currentSettings.camera = settings.camera;\r\n        // apply light settings\r\n        if (sections.viewport.light)\r\n            currentSettings.light = settings.light;\r\n        // apply scene settings\r\n        if (sections.viewport.scene) {\r\n            currentSettings.environmentGeometry.gridColor = settings.environmentGeometry.gridColor;\r\n            currentSettings.environmentGeometry.gridVisibility = settings.environmentGeometry.gridVisibility;\r\n            currentSettings.environmentGeometry.groundPlaneColor = settings.environmentGeometry.groundPlaneColor;\r\n            currentSettings.environmentGeometry.groundPlaneVisibility = settings.environmentGeometry.groundPlaneVisibility;\r\n            currentSettings.environmentGeometry.groundPlaneShadowColor = settings.environmentGeometry.groundPlaneShadowColor;\r\n            currentSettings.environmentGeometry.groundPlaneShadowVisibility = settings.environmentGeometry.groundPlaneShadowVisibility;\r\n            currentSettings.rendering.shadows = settings.rendering.shadows;\r\n            currentSettings.rendering.softShadows = settings.rendering.softShadows;\r\n            currentSettings.rendering.automaticColorAdjustment = settings.rendering.automaticColorAdjustment;\r\n            currentSettings.rendering.textureEncoding = settings.rendering.textureEncoding;\r\n            currentSettings.rendering.outputEncoding = settings.rendering.outputEncoding;\r\n            currentSettings.rendering.physicallyCorrectLights = settings.rendering.physicallyCorrectLights;\r\n            currentSettings.rendering.toneMapping = settings.rendering.toneMapping;\r\n            currentSettings.rendering.toneMappingExposure = settings.rendering.toneMappingExposure;\r\n        }\r\n        if (sections.viewport.general) {\r\n            currentSettings.general.defaultMaterialColor = settings.general.defaultMaterialColor;\r\n            currentSettings.general.commitParameters = settings.general.commitParameters;\r\n            currentSettings.general.pointSize = settings.general.pointSize;\r\n        }\r\n        // apply postprocessing settings\r\n        if (sections.viewport.postprocessing)\r\n            currentSettings.postprocessing = settings.postprocessing;\r\n        // apply environment settings\r\n        if (sections.viewport.environment) {\r\n            currentSettings.environment.clearAlpha = settings.environment.clearAlpha;\r\n            currentSettings.environment.clearColor = settings.environment.clearColor;\r\n            currentSettings.environment.map = settings.environment.map;\r\n            currentSettings.environment.mapAsBackground = settings.environment.mapAsBackground;\r\n            currentSettings.environment.rotation = settings.environment.rotation;\r\n            currentSettings.environment.blurriness = settings.environment.blurriness;\r\n            currentSettings.environment.intensity = settings.environment.intensity;\r\n        }\r\n    }\r\n    canGoBack() {\r\n        // the first entry is always the one from the init call\r\n        // all additional entries can be undone\r\n        return __classPrivateFieldGet(this, _SessionEngine_parameterHistory, \"f\").length > 1;\r\n    }\r\n    canGoForward() {\r\n        return __classPrivateFieldGet(this, _SessionEngine_parameterHistoryForward, \"f\").length > 0;\r\n    }\r\n    cancelCustomization() {\r\n        if (__classPrivateFieldGet(this, _SessionEngine_customizationProcess, \"f\"))\r\n            this.removeBusyMode(__classPrivateFieldGet(this, _SessionEngine_customizationProcess, \"f\"));\r\n        for (const busyId of __classPrivateFieldGet(this, _SessionEngine_customizationBusyModes, \"f\")) {\r\n            for (const r in this._stateEngine.viewportEngines) {\r\n                if (this._stateEngine.viewportEngines[r] && this._stateEngine.viewportEngines[r].busy.includes(busyId))\r\n                    this._stateEngine.viewportEngines[r].busy.splice(this._stateEngine.viewportEngines[r].busy.indexOf(busyId), 1);\r\n            }\r\n        }\r\n        __classPrivateFieldSet(this, _SessionEngine_customizationBusyModes, [], \"f\");\r\n        __classPrivateFieldSet(this, _SessionEngine_customizationProcess, undefined, \"f\");\r\n    }\r\n    close(retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('close');\r\n            try {\r\n                this._httpClient.removeDataLoading(this._sessionId);\r\n                yield this._sdk.session.close(this._sessionId);\r\n                if (this._automaticSceneUpdate)\r\n                    this.removeFromSceneTree(this._node);\r\n                this._closed = true;\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.close(true);\r\n            }\r\n        });\r\n    }\r\n    createModelState(parameterValues = {}, omitSessionParameterValues = false, image, data, arScene) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability();\r\n            try {\r\n                const promises = [];\r\n                // process the parameters\r\n                const parameterSet = {};\r\n                promises.push(this.uploadFileParameters(parameterValues).then(() => {\r\n                    // create a set of the current validated parameter values\r\n                    for (const parameterId in this.parameters) {\r\n                        // if the parameter has not been set, we do not include it in the parameter set if the omitSessionParameterValues flag is set\r\n                        if (!(omitSessionParameterValues === true && parameterValues[parameterId] === undefined)) {\r\n                            parameterSet[parameterId] = (' ' + this.parameters[parameterId].stringify(parameterValues[parameterId])).slice(1);\r\n                        }\r\n                    }\r\n                }));\r\n                // process the image input\r\n                let imageData;\r\n                let imageArrayBuffer;\r\n                if (image) {\r\n                    promises.push(this.processImageInput(image)\r\n                        .then(result => {\r\n                        imageData = result === null || result === void 0 ? void 0 : result.imageData;\r\n                        imageArrayBuffer = result === null || result === void 0 ? void 0 : result.arrayBuffer;\r\n                    }));\r\n                }\r\n                // process the arScene input\r\n                let arSceneId;\r\n                if (arScene) {\r\n                    promises.push(this._converter.convertToArrayBuffer(arScene)\r\n                        .then(arSceneArrayBuffer => this._sdk.gltf.upload(this._sessionId, arSceneArrayBuffer, 'model/gltf-binary', sdk_geometry_api_sdk_v2_1.ShapeDiverRequestGltfUploadQueryConversion.SCENE))\r\n                        .then(arSceneResponseDto => {\r\n                        var _a;\r\n                        arSceneId = (_a = arSceneResponseDto.gltf) === null || _a === void 0 ? void 0 : _a.sceneId;\r\n                    }));\r\n                }\r\n                // wait for all promises to resolve\r\n                yield Promise.all(promises);\r\n                // create the model state\r\n                const response = yield this._sdk.modelState.create(this._sessionId, {\r\n                    parameters: parameterSet,\r\n                    data: data,\r\n                    image: imageData,\r\n                    arSceneId: arSceneId\r\n                });\r\n                if (imageData && imageArrayBuffer)\r\n                    yield this._sdk.utils.uploadAsset(response.asset.modelState.href, imageArrayBuffer, response.asset.modelState.headers);\r\n                return response.modelState.id;\r\n            }\r\n            catch (e) {\r\n                throw this._httpClient.convertError(e);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Customizes the session with updated parameters to get the updated scene graph node.\r\n     *\r\n     * @param parameters the parameter set to update the session\r\n     * @returns promise with a scene graph node\r\n     */\r\n    customize(force = false, waitForViewportUpdate = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const eventId = this._uuidGenerator.create();\r\n            const customizationId = this._uuidGenerator.create();\r\n            try {\r\n                // we check if something changed\r\n                if (force === false) {\r\n                    let changes = false;\r\n                    for (const parameterId in this.parameters)\r\n                        if (this.parameters[parameterId].sessionValue !== this.parameters[parameterId].value)\r\n                            changes = true;\r\n                    if (changes === false)\r\n                        return this.node;\r\n                }\r\n                const eventStart = { type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, id: eventId, progress: 0, data: { sessionId: this.id }, status: 'Customizing session' };\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_START, eventStart);\r\n                const oldNode = this.node;\r\n                __classPrivateFieldSet(this, _SessionEngine_customizationProcess, customizationId, \"f\");\r\n                this._logger.debugLow(`Session(${this.id}).customize: Customizing session.`);\r\n                this.addBusyMode(customizationId);\r\n                const eventFileUpload = { type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, id: eventId, progress: 0.1, data: { sessionId: this.id }, status: 'Uploading file parameters' };\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_PROCESS, eventFileUpload);\r\n                // upload file parameters\r\n                yield this.uploadFileParameters();\r\n                // OPTION TO SKIP - PART 1b\r\n                const cancelResult = this.cancelProcess(customizationId, eventId, viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, 1, { sessionId: this.id });\r\n                if (cancelResult)\r\n                    return cancelResult;\r\n                const parameterSet = {};\r\n                // create a set of the current validated parameter values\r\n                for (const parameterId in this.parameters) {\r\n                    parameterSet[parameterId] = {\r\n                        value: this.parameters[parameterId].value,\r\n                        valueString: this.parameters[parameterId].stringify()\r\n                    };\r\n                }\r\n                // update the session engine parameter values if everything succeeded\r\n                for (const parameterId in this.parameters)\r\n                    this.parameterValues[parameterId] = parameterSet[parameterId].valueString;\r\n                this._logger.info(`Session(${this.id}).customize: Customizing session with parameters ${JSON.stringify(this.parameterValues)}.`);\r\n                const eventRequest = { type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, id: eventId, progress: 0.1, data: { sessionId: this.id }, status: 'Sending customization request' };\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_PROCESS, eventRequest);\r\n                const oldOutputVersions = this._outputLoader.getCurrentOutputVersions();\r\n                const newNode = yield this.customizeInternal(() => __classPrivateFieldGet(this, _SessionEngine_customizationProcess, \"f\") !== customizationId, {\r\n                    eventId,\r\n                    type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION,\r\n                    progressRange: {\r\n                        min: 0.1,\r\n                        max: 0.9\r\n                    },\r\n                    data: { sessionId: this.id }\r\n                });\r\n                // OPTION TO SKIP - PART 2\r\n                const cancelResult2 = this.cancelProcess(customizationId, eventId, viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, 1, { sessionId: this.id });\r\n                if (cancelResult2)\r\n                    return cancelResult2;\r\n                const newOutputVersions = this._outputLoader.getCurrentOutputVersions();\r\n                const eventSceneUpdate = { type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, id: eventId, progress: 0.9, data: { sessionId: this.id }, status: 'Updating scene' };\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_PROCESS, eventSceneUpdate);\r\n                // call the update callbacks\r\n                if (waitForViewportUpdate === false) {\r\n                    for (const outputId in this.outputs) {\r\n                        if (oldOutputVersions[outputId] !== newOutputVersions[outputId]) {\r\n                            this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.OUTPUT.OUTPUT_UPDATED, {\r\n                                outputId: outputId,\r\n                                outputVersion: newOutputVersions[outputId],\r\n                                newNode: newNode.children.find(c => c.name === outputId),\r\n                                oldNode: oldNode.children.find(c => c.name === outputId)\r\n                            });\r\n                        }\r\n                    }\r\n                    yield this.waitForUpdateCallbacks(newOutputVersions, oldOutputVersions, newNode, oldNode);\r\n                    const cancelResult = this.cancelProcess(customizationId, eventId, viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, 1, { sessionId: this.id });\r\n                    if (cancelResult)\r\n                        return cancelResult;\r\n                }\r\n                // if this is not a call by the goBack or goForward functions, add the parameter values to the history and delete the forward history\r\n                if (!__classPrivateFieldGet(this, _SessionEngine_parameterHistoryCall, \"f\")) {\r\n                    __classPrivateFieldGet(this, _SessionEngine_parameterHistory, \"f\").push(parameterSet);\r\n                    __classPrivateFieldSet(this, _SessionEngine_parameterHistoryForward, [], \"f\");\r\n                }\r\n                if (this.automaticSceneUpdate)\r\n                    this.removeFromSceneTree(this.node);\r\n                this._node = newNode;\r\n                if (this.automaticSceneUpdate && this._closed === false)\r\n                    this.addToSceneTree(this.node);\r\n                this._logger.debug(`Session(${this.id}).customize: Customization request finished, updating geometry.`);\r\n                // set the session values to the current ones in all parameters\r\n                for (const parameterId in this.parameters)\r\n                    this.parameters[parameterId].sessionValue = parameterSet[parameterId].value;\r\n                // set the output content to what has been updated\r\n                for (const outputId in this.outputs)\r\n                    this.outputs[outputId].updateOutput(newNode.children.find(c => c.name === outputId), oldNode.children.find(c => c.name === outputId));\r\n                // set the export definitions\r\n                for (const exportId in this.exports)\r\n                    this.exports[exportId].updateExport();\r\n                this._warningCreator();\r\n                this.node.excludeViewports = JSON.parse(JSON.stringify(this._excludeViewports));\r\n                this.removeBusyMode(customizationId);\r\n                this._logger.debug(`Session(${this.id}).customize: Session customized.`);\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.SESSION.SESSION_CUSTOMIZED, { sessionId: this.id });\r\n                const eventEnd = { type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, id: eventId, progress: 1, data: { sessionId: this.id }, status: 'Session customized' };\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_END, eventEnd);\r\n                // update the viewports\r\n                if (waitForViewportUpdate) {\r\n                    for (const r in this._stateEngine.viewportEngines)\r\n                        if (this._stateEngine.viewportEngines[r] && !this.excludeViewports.includes(this._stateEngine.viewportEngines[r].id))\r\n                            this._stateEngine.viewportEngines[r].update(`SessionEngine(${this.id}).customize`);\r\n                    for (const outputId in this.outputs) {\r\n                        if (oldOutputVersions[outputId] !== newOutputVersions[outputId]) {\r\n                            this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.OUTPUT.OUTPUT_UPDATED, {\r\n                                outputId: outputId,\r\n                                outputVersion: newOutputVersions[outputId],\r\n                                newNode: newNode.children.find(c => c.name === outputId),\r\n                                oldNode: oldNode.children.find(c => c.name === outputId)\r\n                            });\r\n                        }\r\n                    }\r\n                    // call the update callbacks\r\n                    yield this.waitForUpdateCallbacks(newOutputVersions, oldOutputVersions, newNode, oldNode);\r\n                    const cancelResult = this.cancelProcess(customizationId, eventId, viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, 1, { sessionId: this.id });\r\n                    if (cancelResult)\r\n                        return cancelResult;\r\n                }\r\n                if (!waitForViewportUpdate) {\r\n                    setTimeout(() => {\r\n                        for (const r in this._stateEngine.viewportEngines)\r\n                            if (this._stateEngine.viewportEngines[r] && !this.excludeViewports.includes(this._stateEngine.viewportEngines[r].id))\r\n                                this._stateEngine.viewportEngines[r].update(`SessionEngine(${this.id}).customize`);\r\n                    }, 0);\r\n                }\r\n                return this.node;\r\n            }\r\n            catch (e) {\r\n                const eventCancel = { type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, id: eventId, progress: 1, data: { sessionId: this.id }, status: 'Session customization failed' };\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_CANCEL, eventCancel);\r\n                this.removeBusyMode(customizationId);\r\n                throw this._httpClient.convertError(e);\r\n            }\r\n        });\r\n    }\r\n    customizeParallel(parameterValues, loadOutputs = true) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const eventId = this._uuidGenerator.create();\r\n            const eventStart = { type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, id: eventId, progress: 0, data: { sessionId: this.id }, status: 'Customizing session' };\r\n            this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_START, eventStart);\r\n            // upload file parameters\r\n            yield this.uploadFileParameters(parameterValues);\r\n            const parameterSet = {};\r\n            // create a set of the current validated parameter values\r\n            for (const parameterId in this.parameters)\r\n                parameterSet[parameterId] = (' ' + this.parameters[parameterId].stringify(parameterValues[parameterId])).slice(1);\r\n            const result = yield this.customizeSession(parameterSet, () => false, {\r\n                eventId,\r\n                type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION,\r\n                progressRange: {\r\n                    min: 0.0,\r\n                    max: 1\r\n                },\r\n                data: { sessionId: this.id }\r\n            }, true, loadOutputs);\r\n            if (result instanceof SessionTreeNode_1.SessionTreeNode)\r\n                result.excludeViewports = JSON.parse(JSON.stringify(this._excludeViewports));\r\n            const eventEnd = { type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, id: eventId, progress: 1, data: { sessionId: this.id }, status: 'Session customized' };\r\n            this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_END, eventEnd);\r\n            return result;\r\n        });\r\n    }\r\n    customizeWithModelState(modelState) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability();\r\n            try {\r\n                // get the model state if it is not already a response\r\n                let response;\r\n                if (typeof modelState === 'string') {\r\n                    response = yield this._sdk.modelState.get(modelState);\r\n                }\r\n                else {\r\n                    response = modelState;\r\n                }\r\n                if (!response.modelState)\r\n                    return new viewer_shared_node_tree_1.TreeNode();\r\n                // read out the parameter values from the model state\r\n                for (const parameterId in response.modelState.parameters)\r\n                    this.parameters[parameterId].value = response.modelState.parameters[parameterId];\r\n                return this.customize();\r\n            }\r\n            catch (e) {\r\n                throw this._httpClient.convertError(e);\r\n            }\r\n        });\r\n    }\r\n    getFileInfo(parameterId, fileId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability();\r\n            try {\r\n                return yield this._sdk.file.info(this._sessionId, parameterId, fileId);\r\n            }\r\n            catch (e) {\r\n                throw this._httpClient.convertError(e);\r\n            }\r\n        });\r\n    }\r\n    goBack() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.canGoBack()) {\r\n                this._logger.debug(`Session(${this.id}).goBack: Cannot go further back.`);\r\n                return new viewer_shared_node_tree_1.TreeNode();\r\n            }\r\n            // get the current parameter set and store it in the forward history later on\r\n            const currentParameterSet = __classPrivateFieldGet(this, _SessionEngine_parameterHistory, \"f\").pop();\r\n            // adjust the parameters according to the last parameter set\r\n            const lastParameterSet = __classPrivateFieldGet(this, _SessionEngine_parameterHistory, \"f\")[__classPrivateFieldGet(this, _SessionEngine_parameterHistory, \"f\").length - 1];\r\n            for (const parameterId in lastParameterSet)\r\n                this.parameters[parameterId].value = lastParameterSet[parameterId].value;\r\n            // call the customization function with the parameterHistoryCall value set to true\r\n            __classPrivateFieldSet(this, _SessionEngine_parameterHistoryCall, true, \"f\");\r\n            const node = yield this.customize();\r\n            __classPrivateFieldSet(this, _SessionEngine_parameterHistoryCall, false, \"f\");\r\n            // add the current (not anymore current) parameter set to the forward history\r\n            __classPrivateFieldGet(this, _SessionEngine_parameterHistoryForward, \"f\").push(currentParameterSet);\r\n            return node;\r\n        });\r\n    }\r\n    goForward() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.canGoForward()) {\r\n                this._logger.debug(`Session(${this.id}).goForward: Cannot go further forward.`);\r\n                return new viewer_shared_node_tree_1.TreeNode();\r\n            }\r\n            // get the last undone parameter set and apply the values to the parameters\r\n            const lastParameterSet = __classPrivateFieldGet(this, _SessionEngine_parameterHistoryForward, \"f\").pop();\r\n            for (const parameterId in lastParameterSet)\r\n                this.parameters[parameterId].value = lastParameterSet[parameterId].value;\r\n            // call the customization function with the parameterHistoryCall value set to true\r\n            __classPrivateFieldSet(this, _SessionEngine_parameterHistoryCall, true, \"f\");\r\n            const node = yield this.customize();\r\n            __classPrivateFieldSet(this, _SessionEngine_parameterHistoryCall, false, \"f\");\r\n            // add the current parameter set to the history\r\n            __classPrivateFieldGet(this, _SessionEngine_parameterHistory, \"f\").push(lastParameterSet);\r\n            return node;\r\n        });\r\n    }\r\n    /**\r\n     * Initializes the session with the ticket and modelViewUrl.\r\n     *\r\n     * @returns promise with a scene graph node\r\n     */\r\n    init(parameterValues, retry = false) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._initialized === true)\r\n                throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.init: Session already initialized.');\r\n            try {\r\n                this._performanceEvaluator.startSection('sessionResponse');\r\n                const parameterSet = {};\r\n                // the slice here is done as a way for deep copying the string values\r\n                for (const parameterNameOrId in parameterValues)\r\n                    parameterSet[parameterNameOrId] = (' ' + parameterValues[parameterNameOrId]).slice(1);\r\n                if (this._ticket) {\r\n                    this._responseDto = yield this._sdk.session.init(this._ticket, parameterSet, this._modelStateId, this._modelStateValidationMode);\r\n                }\r\n                else if (this._guid) {\r\n                    this._responseDto = yield this._sdk.session.initForModel(this._guid, parameterSet, this._modelStateId, this._modelStateValidationMode);\r\n                }\r\n                else {\r\n                    // we should never get here\r\n                    throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.init: Initialization of session failed. Neither a ticket nor a guid are available.');\r\n                }\r\n                this._performanceEvaluator.endSection('sessionResponse');\r\n                this._viewerSettings = (_a = this._responseDto.viewer) === null || _a === void 0 ? void 0 : _a.config;\r\n                this._viewerSettingsVersionBackend = this._responseDto.viewerSettingsVersion || viewer_settings_1.latestVersion;\r\n                this._sessionId = this._responseDto.sessionId;\r\n                this._modelId = (_b = this._responseDto.model) === null || _b === void 0 ? void 0 : _b.id;\r\n                this._modelState = this._responseDto.modelState;\r\n                this._httpClient.addDataLoading(this._sessionId, {\r\n                    getAsset: this._sdk.asset.getAsset.bind(this._sdk.asset),\r\n                    downloadTexture: this._sdk.asset.downloadImage.bind(this._sdk.asset),\r\n                });\r\n                this._settingsEngine.loadSettings(this._viewerSettings);\r\n                if (!this._sessionId)\r\n                    throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.init: Initialization of session failed. ResponseDto did not have a sessionId.');\r\n                if (!this._modelId)\r\n                    throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.init: Initialization of session failed. ResponseDto did not have a model.id.');\r\n                this.updateResponseDto(this._responseDto, parameterSet);\r\n                this._initialized = true;\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.init(parameterValues, true);\r\n            }\r\n        });\r\n    }\r\n    loadCachedOutputsParallel(outputMapping, taskEventInfo, retry = false) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability();\r\n            // if there is already task event info, use it\r\n            // this happens after a retry\r\n            const eventId = taskEventInfo ? taskEventInfo.eventId : this._uuidGenerator.create();\r\n            const eventType = taskEventInfo ? taskEventInfo.type : viewer_shared_types_1.TASK_TYPE.SESSION_OUTPUTS_LOADING;\r\n            const eventData = taskEventInfo ? taskEventInfo.data : { sessionId: this.id };\r\n            taskEventInfo = taskEventInfo ? taskEventInfo : {\r\n                eventId,\r\n                type: eventType,\r\n                progressRange: {\r\n                    min: 0,\r\n                    max: 1\r\n                },\r\n                data: eventData\r\n            };\r\n            try {\r\n                // send start event if this function was called initially\r\n                if (!taskEventInfo) {\r\n                    const eventStart = { type: eventType, id: eventId, progress: 0, data: eventData, status: 'Loading cached outputs' };\r\n                    this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_START, eventStart);\r\n                }\r\n                // get the cached outputs\r\n                const responseDto = yield this._sdk.output.getCache(this._sessionId, outputMapping);\r\n                // create atomic output api objects for them\r\n                const outputs = {};\r\n                for (const outputId in responseDto.outputs) {\r\n                    responseDto.outputs[outputId].id = outputId;\r\n                    outputs[outputId] = new Output_1.Output(responseDto.outputs[outputId], this);\r\n                }\r\n                // process the output data\r\n                const node = yield this._outputLoader.loadOutputs(((_a = this._responseDto.model) === null || _a === void 0 ? void 0 : _a.name) || 'model', outputs, {}, taskEventInfo, false);\r\n                // send the end event once done\r\n                const eventEnd = { type: eventType, id: eventId, progress: 1, data: eventData, status: 'Loaded cached outputs' };\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_END, eventEnd);\r\n                // create a mapping with a dictionary for the id of the outputs\r\n                const outputNodeMapping = {};\r\n                for (const outputId in outputMapping)\r\n                    outputNodeMapping[outputId] = node.children.find(n => n.name === outputId);\r\n                return outputNodeMapping;\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.loadCachedOutputsParallel(outputMapping, taskEventInfo, true);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Load the outputs and return the scene graph node of the result.\r\n     * In case the outputs have a delay property, another customization request with the parameter set is sent.\r\n     *\r\n     * @param parameters the parameter set to update the session\r\n     * @param outputs the outputs to load\r\n     * @returns promise with a scene graph node\r\n     */\r\n    loadOutputs(cancelRequest = () => false, taskEventInfo, retry = false) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability();\r\n            const o = Object.assign({}, this._outputs);\r\n            const of = Object.assign({}, this._outputsFreeze);\r\n            try {\r\n                const node = yield this._outputLoader.loadOutputs(((_a = this._responseDto.model) === null || _a === void 0 ? void 0 : _a.name) || 'model', o, of, taskEventInfo);\r\n                node.data.push(new SessionData_1.SessionData(this._responseDto));\r\n                if (cancelRequest())\r\n                    return node;\r\n                node.excludeViewports = JSON.parse(JSON.stringify(this._excludeViewports));\r\n                return node;\r\n            }\r\n            catch (e) {\r\n                if (e instanceof OutputDelayException_1.OutputDelayException) {\r\n                    yield this.timeout(e.delay);\r\n                }\r\n                else {\r\n                    yield this.handleError(e, retry);\r\n                    if (cancelRequest())\r\n                        return new SessionTreeNode_1.SessionTreeNode();\r\n                    return yield this.loadOutputs(cancelRequest, taskEventInfo, true);\r\n                }\r\n                if (cancelRequest())\r\n                    return new SessionTreeNode_1.SessionTreeNode();\r\n                const outputMapping = {};\r\n                for (const output in o)\r\n                    outputMapping[output] = o[output].version;\r\n                try {\r\n                    const responseDto = yield this._sdk.output.getCache(this._sessionId, outputMapping);\r\n                    if (cancelRequest())\r\n                        return new SessionTreeNode_1.SessionTreeNode();\r\n                    this.updateResponseDto(responseDto);\r\n                    return yield this.loadOutputs(cancelRequest, taskEventInfo);\r\n                }\r\n                catch (e) {\r\n                    yield this.handleError(e, retry);\r\n                    if (cancelRequest())\r\n                        return new SessionTreeNode_1.SessionTreeNode();\r\n                    return yield this.loadOutputs(cancelRequest, taskEventInfo, true);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Load the outputs and return the scene graph node of the result.\r\n     * In case the outputs have a delay property, another customization request with the parameter set is sent.\r\n     *\r\n     * @param parameters the parameter set to update the session\r\n     * @param outputs the outputs to load\r\n     * @returns promise with a scene graph node\r\n     */\r\n    loadOutputsParallel(responseDto, cancelRequest = () => false, taskEventInfo, retry = false) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability();\r\n            const outputs = {};\r\n            const outputsFreeze = {};\r\n            for (const outputId in responseDto.outputs) {\r\n                responseDto.outputs[outputId].id = outputId;\r\n                if (this.outputsFreeze[outputId] === undefined)\r\n                    outputsFreeze[outputId] = false;\r\n                outputs[outputId] = new Output_1.Output(responseDto.outputs[outputId], this);\r\n            }\r\n            try {\r\n                const node = yield this._outputLoader.loadOutputs(((_a = this._responseDto.model) === null || _a === void 0 ? void 0 : _a.name) || 'model', outputs, outputsFreeze, taskEventInfo);\r\n                node.data.push(new SessionData_1.SessionData(responseDto));\r\n                return node;\r\n            }\r\n            catch (e) {\r\n                if (e instanceof OutputDelayException_1.OutputDelayException) {\r\n                    yield this.timeout(e.delay);\r\n                }\r\n                else {\r\n                    yield this.handleError(e, retry);\r\n                    if (cancelRequest())\r\n                        return new SessionTreeNode_1.SessionTreeNode();\r\n                    return yield this.loadOutputsParallel(responseDto, cancelRequest, taskEventInfo, true);\r\n                }\r\n                if (cancelRequest())\r\n                    return new SessionTreeNode_1.SessionTreeNode();\r\n                const outputMapping = {};\r\n                for (const output in outputs)\r\n                    outputMapping[output] = outputs[output].version;\r\n                try {\r\n                    const responseDto = yield this._sdk.output.getCache(this._sessionId, outputMapping);\r\n                    if (cancelRequest())\r\n                        return new SessionTreeNode_1.SessionTreeNode();\r\n                    this.updateResponseDto(responseDto);\r\n                    return yield this.loadOutputsParallel(responseDto, cancelRequest, taskEventInfo);\r\n                }\r\n                catch (e) {\r\n                    yield this.handleError(e, retry);\r\n                    if (cancelRequest())\r\n                        return new SessionTreeNode_1.SessionTreeNode();\r\n                    return yield this.loadOutputsParallel(responseDto, cancelRequest, taskEventInfo, true);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    requestExport(exportId, parameters, maxWaitTime, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('export');\r\n            try {\r\n                yield this.uploadFileParameters(parameters);\r\n                const requestParameterSet = this.cleanExportParameters(parameters);\r\n                const responseDto = yield this._sdk.utils.submitAndWaitForExport(this._sdk, this._sessionId, { exports: { id: exportId }, parameters: requestParameterSet }, maxWaitTime);\r\n                this.updateResponseDto(responseDto);\r\n                return this.exports[exportId];\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.requestExport(exportId, parameters, maxWaitTime, true);\r\n            }\r\n        });\r\n    }\r\n    requestExports(body, loadOutputs = false, maxWaitMsec, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let processId;\r\n            this.checkAvailability('export');\r\n            try {\r\n                // activate the busy mode if outputs are loaded\r\n                if (loadOutputs === true && this._allowOutputLoading === true &&\r\n                    body.outputs && Object.keys(body.outputs).length > 0) {\r\n                    processId = this._uuidGenerator.create();\r\n                    this.addBusyMode(processId);\r\n                }\r\n                yield this.uploadFileParameters(body.parameters);\r\n                const requestParameterSet = this.cleanExportParameters(body.parameters);\r\n                const responseDto = yield this._sdk.utils.submitAndWaitForExport(this._sdk, this._sessionId, { exports: body.exports, parameters: requestParameterSet, outputs: body.outputs, max_wait_time: body.max_wait_time }, maxWaitMsec);\r\n                this.updateResponseDto(responseDto);\r\n                if (loadOutputs === true && this._allowOutputLoading === true)\r\n                    this.updateOutputs();\r\n                if (processId)\r\n                    this.removeBusyMode(processId);\r\n                return responseDto;\r\n            }\r\n            catch (e) {\r\n                if (processId)\r\n                    this.removeBusyMode(processId);\r\n                yield this.handleError(e, retry);\r\n                return yield this.requestExports(body, loadOutputs, maxWaitMsec, true);\r\n            }\r\n        });\r\n    }\r\n    resetSettings(sections) {\r\n        if (!this._responseDto)\r\n            throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.resetSettings: responseDto not available.');\r\n        sections = sections || {};\r\n        if (sections.session === undefined) {\r\n            sections.session = {\r\n                parameter: { displayname: true, order: true, hidden: true },\r\n                export: { displayname: true, order: true, hidden: true }\r\n            };\r\n        }\r\n        if (sections.session.parameter === undefined)\r\n            sections.session.parameter = { displayname: true, order: true, hidden: true, value: true };\r\n        if (sections.session.export === undefined)\r\n            sections.session.export = { displayname: true, order: true, hidden: true };\r\n        if (sections.viewport === undefined)\r\n            sections.viewport = { ar: true, scene: true, camera: true, light: true, environment: true, general: true, postprocessing: true };\r\n        return this.applySettings(this._responseDto, sections);\r\n    }\r\n    saveDefaultParameterValues() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._logger.debugLow(`Session(${this.id}).saveDefaultParameters: Saving default parameters.`);\r\n            const response = yield this.saveDefaultParameters();\r\n            if (response) {\r\n                this._logger.debug(`Session(${this.id}).saveDefaultParameters: Saved default parameters.`);\r\n            }\r\n            else {\r\n                throw new viewer_shared_services_1.ShapeDiverViewerSessionError(`Session(${this.id}).saveDefaultParameters: Could not save default parameters.`);\r\n            }\r\n            return response;\r\n        });\r\n    }\r\n    saveDefaultParameters(retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('defaultparam', true);\r\n            try {\r\n                yield this._sdk.model.setDefaultParams(this._modelId, this._parameterValues);\r\n                return true;\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.saveDefaultParameters(true);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Save the export properties for displayname, order, tooltip and hidden\r\n     *\r\n     * @param exports\r\n     * @returns\r\n     */\r\n    saveExportProperties(exports, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('export-definition', true);\r\n            try {\r\n                yield this._sdk.export.updateDefinitions(this._modelId, exports);\r\n                return true;\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.saveExportProperties(exports, true);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Save the output properties for displayname, order, tooltip and hidden\r\n     *\r\n     * @param outputs\r\n     * @returns\r\n     */\r\n    saveOutputProperties(outputs, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('output-definition', true);\r\n            try {\r\n                yield this._sdk.output.updateDefinitions(this._modelId, outputs);\r\n                return true;\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.saveOutputProperties(outputs, true);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Save the parameter properties for displayname, order, tooltip and hidden\r\n     *\r\n     * @param parameters\r\n     * @returns\r\n     */\r\n    saveParameterProperties(parameters, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('parameter-definition', true);\r\n            try {\r\n                yield this._sdk.model.updateParameterDefinitions(this._modelId, parameters);\r\n                return true;\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.saveParameterProperties(parameters, true);\r\n            }\r\n        });\r\n    }\r\n    saveSettings(json, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('configure', true);\r\n            try {\r\n                (0, viewer_settings_1.validate)(json, this._viewerSettingsVersion);\r\n                // if viewer settings version is higher than backend settings version\r\n                // convert to backend settings version\r\n                if (+this._viewerSettingsVersion > +this._viewerSettingsVersionBackend)\r\n                    json = (0, viewer_settings_1.convert)(json, this._viewerSettingsVersionBackend);\r\n            }\r\n            catch (e) {\r\n                throw new viewer_shared_services_1.ShapeDiverViewerSettingsError('Session.saveSettings: Settings could not be validated. ' + e.message, e);\r\n            }\r\n            try {\r\n                yield this._sdk.model.updateConfig(this._modelId, json);\r\n                return true;\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.saveSettings(json, true);\r\n            }\r\n        });\r\n    }\r\n    saveUiProperties(saveInSettings = true) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._logger.debugLow(`Session(${this.id}).saveSessionProperties: Saving session properties.`);\r\n            // settings saving \r\n            this._saveSessionSettings();\r\n            let properties = {};\r\n            for (const p in this.parameters) {\r\n                properties[p] = {\r\n                    displayname: this.parameters[p].displayname !== undefined ? this.parameters[p].displayname : '',\r\n                    hidden: this.parameters[p].hidden !== undefined ? this.parameters[p].hidden : false,\r\n                    order: this.parameters[p].order !== undefined ? this.parameters[p].order : 0,\r\n                    tooltip: this.parameters[p].tooltip !== undefined ? this.parameters[p].tooltip : '',\r\n                };\r\n            }\r\n            const responseP = Object.values(properties).length !== 0 ? yield this.saveParameterProperties(properties) : true;\r\n            properties = {};\r\n            for (const e in this.exports) {\r\n                properties[e] = {\r\n                    displayname: this.exports[e].displayname !== undefined ? this.exports[e].displayname : '',\r\n                    hidden: this.exports[e].hidden !== undefined ? this.exports[e].hidden : false,\r\n                    order: this.exports[e].order !== undefined ? this.exports[e].order : 0,\r\n                    tooltip: this.exports[e].tooltip !== undefined ? this.exports[e].tooltip : '',\r\n                };\r\n            }\r\n            const responseE = Object.values(properties).length !== 0 ? yield this.saveExportProperties(properties) : true;\r\n            properties = {};\r\n            for (const o in this.outputs) {\r\n                properties[o] = {\r\n                    displayname: this.outputs[o].displayname !== undefined ? this.outputs[o].displayname : '',\r\n                    hidden: this.outputs[o].hidden !== undefined ? this.outputs[o].hidden : false,\r\n                    order: this.outputs[o].order !== undefined ? this.outputs[o].order : 0,\r\n                    tooltip: this.outputs[o].tooltip !== undefined ? this.outputs[o].tooltip : '',\r\n                };\r\n            }\r\n            const responseO = Object.values(properties).length !== 0 ? yield this.saveOutputProperties(properties) : true;\r\n            // save partial settings\r\n            const response = saveInSettings ? yield this.saveSettings(this._settingsEngine.settings) : true;\r\n            if (response && responseP && responseO && responseE) {\r\n                this._logger.debug(`Session(${this.id}).saveSessionProperties: Saved session properties.`);\r\n            }\r\n            else {\r\n                this._logger.warn(`Session(${this.id}).saveSessionProperties: Could not save session properties.`);\r\n            }\r\n            return response && responseP && responseO && responseE;\r\n        });\r\n    }\r\n    setJwtToken(value) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability();\r\n            this._jwtToken = value;\r\n            try {\r\n                this._sdk.setConfigurationValue(sdk_geometry_api_sdk_v2_1.ShapeDiverSdkConfigType.JWT_TOKEN, value);\r\n                const responseDto = yield this._sdk.session.default(this._sessionId);\r\n                if (this._responseDto)\r\n                    this._responseDto.actions = responseDto.actions;\r\n            }\r\n            catch (e) {\r\n                throw this._httpClient.convertError(e);\r\n            }\r\n        });\r\n    }\r\n    updateOutputs(taskEventInfo, waitForViewportUpdate = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const eventId = taskEventInfo ? taskEventInfo.eventId : this._uuidGenerator.create();\r\n            const eventType = taskEventInfo ? taskEventInfo.type : viewer_shared_types_1.TASK_TYPE.SESSION_OUTPUTS_UPDATE;\r\n            const eventData = taskEventInfo ? taskEventInfo.data : { sessionId: this.id };\r\n            if (!taskEventInfo) {\r\n                const eventStart = { type: eventType, id: eventId, progress: 0, data: eventData, status: 'Updating outputs' };\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_START, eventStart);\r\n            }\r\n            const customizationId = this._uuidGenerator.create();\r\n            const oldNode = this.node;\r\n            __classPrivateFieldSet(this, _SessionEngine_customizationProcess, customizationId, \"f\");\r\n            this._logger.debugLow(`Session(${this.id}).updateOutputs: Updating Outputs.`);\r\n            this.addBusyMode(customizationId);\r\n            const eventRequest = { type: eventType, id: eventId, progress: taskEventInfo ? (taskEventInfo.progressRange.max - taskEventInfo.progressRange.min) * 0.1 + taskEventInfo.progressRange.min : 0.1, data: eventData, status: 'Loading outputs' };\r\n            this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_PROCESS, eventRequest);\r\n            const oldOutputVersions = this._outputLoader.getCurrentOutputVersions();\r\n            const newNode = yield this.loadOutputs(() => __classPrivateFieldGet(this, _SessionEngine_customizationProcess, \"f\") !== customizationId, {\r\n                eventId,\r\n                type: eventType,\r\n                progressRange: {\r\n                    min: taskEventInfo ? (taskEventInfo.progressRange.max - taskEventInfo.progressRange.min) * 0.1 + taskEventInfo.progressRange.min : 0.1,\r\n                    max: taskEventInfo ? (taskEventInfo.progressRange.max - taskEventInfo.progressRange.min) * 0.9 + taskEventInfo.progressRange.min : 0.9\r\n                },\r\n                data: eventData\r\n            });\r\n            const newOutputVersions = this._outputLoader.getCurrentOutputVersions();\r\n            const eventSceneUpdate = { type: eventType, id: eventId, progress: taskEventInfo ? (taskEventInfo.progressRange.max - taskEventInfo.progressRange.min) * 0.9 + taskEventInfo.progressRange.min : 0.9, data: eventData, status: 'Updating scene' };\r\n            this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_PROCESS, eventSceneUpdate);\r\n            // OPTION TO SKIP - PART 1\r\n            const cancelResult = this.cancelProcess(customizationId, eventId, eventType, taskEventInfo ? (taskEventInfo.progressRange.max - taskEventInfo.progressRange.min) * 1 + taskEventInfo.progressRange.min : 1, eventData, newNode);\r\n            if (cancelResult)\r\n                return cancelResult;\r\n            // call the update callbacks\r\n            if (waitForViewportUpdate === false) {\r\n                for (const outputId in this.outputs) {\r\n                    if (oldOutputVersions[outputId] !== newOutputVersions[outputId]) {\r\n                        this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.OUTPUT.OUTPUT_UPDATED, {\r\n                            outputId: outputId,\r\n                            outputVersion: newOutputVersions[outputId],\r\n                            newNode: newNode.children.find(c => c.name === outputId),\r\n                            oldNode: oldNode.children.find(c => c.name === outputId)\r\n                        });\r\n                    }\r\n                }\r\n                yield this.waitForUpdateCallbacks(newOutputVersions, oldOutputVersions, newNode, oldNode);\r\n                // OPTION TO SKIP - PART 2\r\n                const cancelResult = this.cancelProcess(customizationId, eventId, eventType, taskEventInfo ? (taskEventInfo.progressRange.max - taskEventInfo.progressRange.min) * 1 + taskEventInfo.progressRange.min : 1, eventData, newNode);\r\n                if (cancelResult)\r\n                    return cancelResult;\r\n            }\r\n            if (this.automaticSceneUpdate)\r\n                this.removeFromSceneTree(this.node);\r\n            this._node = newNode;\r\n            if (this.automaticSceneUpdate && this._closed === false)\r\n                this.addToSceneTree(this.node);\r\n            this._logger.debug(`Session(${this.id}).updateOutputs: Updating outputs finished, updating geometry.`);\r\n            // set the output content to what has been updated\r\n            for (const outputId in this.outputs) {\r\n                this.outputs[outputId].updateOutput(newNode.children.find(c => c.name === outputId), oldNode.children.find(c => c.name === outputId));\r\n            }\r\n            // set the export definitions\r\n            for (const exportId in this.exports)\r\n                this.exports[exportId].updateExport();\r\n            this._warningCreator();\r\n            this.node.excludeViewports = JSON.parse(JSON.stringify(this._excludeViewports));\r\n            this.removeBusyMode(customizationId);\r\n            this._logger.debug(`Session(${this.id}).updateOutputs: Updated outputs.`);\r\n            if (!taskEventInfo) {\r\n                const eventEnd = { type: eventType, id: eventId, progress: 1, data: eventData, status: 'Outputs updated' };\r\n                this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_END, eventEnd);\r\n            }\r\n            // update the viewports\r\n            if (waitForViewportUpdate) {\r\n                for (const r in this._stateEngine.viewportEngines)\r\n                    if (this._stateEngine.viewportEngines[r] && !this.excludeViewports.includes(this._stateEngine.viewportEngines[r].id))\r\n                        this._stateEngine.viewportEngines[r].update(`SessionEngine(${this.id}).updateOutputs`);\r\n                for (const outputId in this.outputs) {\r\n                    if (oldOutputVersions[outputId] !== newOutputVersions[outputId]) {\r\n                        this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.OUTPUT.OUTPUT_UPDATED, {\r\n                            outputId: outputId,\r\n                            outputVersion: newOutputVersions[outputId],\r\n                            newNode: newNode.children.find(c => c.name === outputId),\r\n                            oldNode: oldNode.children.find(c => c.name === outputId)\r\n                        });\r\n                    }\r\n                }\r\n                yield this.waitForUpdateCallbacks(newOutputVersions, oldOutputVersions, newNode, oldNode);\r\n                // OPTION TO SKIP - PART 3\r\n                const cancelResult = this.cancelProcess(customizationId, eventId, eventType, taskEventInfo ? (taskEventInfo.progressRange.max - taskEventInfo.progressRange.min) * 1 + taskEventInfo.progressRange.min : 1, eventData, newNode);\r\n                if (cancelResult)\r\n                    return cancelResult;\r\n            }\r\n            return this.node;\r\n        });\r\n    }\r\n    uploadFile(parameterId, data, type, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('file-upload');\r\n            try {\r\n                const result = yield this._sdk.file.requestUpload(this._sessionId, {\r\n                    [parameterId]: {\r\n                        size: data.size,\r\n                        format: type,\r\n                        filename: data.name === '' ? undefined : data.name\r\n                    }\r\n                });\r\n                if (result && result.asset && result.asset.file && result.asset.file[parameterId]) {\r\n                    const fileAsset = result.asset.file[parameterId];\r\n                    yield this._sdk.utils.uploadAsset(fileAsset.href, yield data.arrayBuffer(), fileAsset.headers);\r\n                    return fileAsset.id;\r\n                }\r\n                else {\r\n                    throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.uploadFile: Upload reply has not the required format.');\r\n                }\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.uploadFile(parameterId, data, type, true);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Uploads all file parameters and returns the file parameter values.\r\n     * If parameterValues is provided, the file parameter values are added to it.\r\n     *\r\n     * @param parameterValues\r\n     * @returns\r\n     */\r\n    uploadFileParameters(parameterValues) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const parameterValueSet = parameterValues !== undefined ? this.getFileParameterSet(parameterValues) : undefined;\r\n            const fileParameterValues = {};\r\n            // load file parameter first\r\n            for (const parameterId in this.parameters) {\r\n                if (this.parameters[parameterId] instanceof FileParameter_1.FileParameter) {\r\n                    fileParameterValues[parameterId] = yield this.parameters[parameterId].upload(parameterValueSet ? parameterValueSet[parameterId] : undefined);\r\n                    if (parameterValues) {\r\n                        parameterValues[parameterId] = fileParameterValues[parameterId];\r\n                        // if the parameter value of the file parameter was used, set the value to the parameter\r\n                        if (parameterValues[parameterId] === undefined && this.parameters[parameterId].value !== fileParameterValues[parameterId])\r\n                            this.parameters[parameterId].value = fileParameterValues[parameterId];\r\n                    }\r\n                    else if (this.parameters[parameterId].value !== fileParameterValues[parameterId]) {\r\n                        this.parameters[parameterId].value = fileParameterValues[parameterId];\r\n                    }\r\n                }\r\n            }\r\n            return fileParameterValues;\r\n        });\r\n    }\r\n    uploadGLTF(blob, conversion = sdk_geometry_api_sdk_v2_1.ShapeDiverRequestGltfUploadQueryConversion.NONE, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('gltf-upload');\r\n            try {\r\n                const responseDto = yield this._sdk.gltf.upload(this._sessionId, yield blob.arrayBuffer(), 'model/gltf-binary', conversion);\r\n                if (!responseDto || !responseDto.gltf || !responseDto.gltf.href)\r\n                    throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.uploadGLTF: Upload reply has not the required format.');\r\n                return responseDto;\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                return yield this.uploadGLTF(blob, conversion, true);\r\n            }\r\n        });\r\n    }\r\n    // #endregion Public Methods (31)\r\n    // #region Private Methods (18)\r\n    _saveSessionSettings() {\r\n        const parameters = this.parameters;\r\n        const exports = this.exports;\r\n        const sessionProperties = {};\r\n        for (const p in parameters) {\r\n            sessionProperties[p] = {\r\n                order: parameters[p].order || 0,\r\n                displayname: parameters[p].displayname || '',\r\n                hidden: parameters[p].hidden\r\n            };\r\n        }\r\n        for (const e in exports) {\r\n            sessionProperties[e] = {\r\n                order: exports[e].order || 0,\r\n                displayname: exports[e].displayname || '',\r\n                hidden: exports[e].hidden\r\n            };\r\n        }\r\n        this._settingsEngine.session = sessionProperties;\r\n    }\r\n    _warningCreator() {\r\n        // set the output content to what has been updated\r\n        for (const outputId in this.outputs) {\r\n            let warning = '';\r\n            if (this.outputs[outputId].msg)\r\n                warning += `\\n\\t- ${this.outputs[outputId].msg}`;\r\n            if (this.outputs[outputId].status_collect && this.outputs[outputId].status_collect !== sdk_geometry_api_sdk_v2_1.ShapeDiverResponseModelComputationStatus.SUCCESS)\r\n                warning += `\\n\\t- status_collect is ${this.outputs[outputId].status_collect}`;\r\n            if (this.outputs[outputId].status_computation && this.outputs[outputId].status_computation !== sdk_geometry_api_sdk_v2_1.ShapeDiverResponseModelComputationStatus.SUCCESS)\r\n                warning += `\\n\\t- status_computation is ${this.outputs[outputId].status_computation}`;\r\n            if (warning)\r\n                this._logger.warn(`\\nOutput(${outputId}):${warning}`);\r\n        }\r\n        // set the export definitions\r\n        for (const exportId in this.exports) {\r\n            let warning = '';\r\n            if (this.exports[exportId].msg)\r\n                warning += `\\n\\t- ${this.exports[exportId].msg}`;\r\n            if (this.exports[exportId].status_collect && this.exports[exportId].status_collect !== sdk_geometry_api_sdk_v2_1.ShapeDiverResponseModelComputationStatus.SUCCESS)\r\n                warning += `\\n\\t- status_collect is ${this.exports[exportId].status_collect}`;\r\n            if (this.exports[exportId].status_computation && this.exports[exportId].status_computation !== sdk_geometry_api_sdk_v2_1.ShapeDiverResponseModelComputationStatus.SUCCESS)\r\n                warning += `\\n\\t- status_computation is ${this.exports[exportId].status_computation}`;\r\n            if (warning)\r\n                this._logger.warn(`\\nExport(${exportId}):${warning}`);\r\n        }\r\n    }\r\n    addBusyMode(busyId) {\r\n        for (const r in this._stateEngine.viewportEngines) {\r\n            if (this._stateEngine.viewportEngines[r] && !this.excludeViewports.includes(r)) {\r\n                this._stateEngine.viewportEngines[r].busy.push(busyId);\r\n                __classPrivateFieldGet(this, _SessionEngine_customizationBusyModes, \"f\").push(busyId);\r\n            }\r\n        }\r\n    }\r\n    addToSceneTree(node) {\r\n        this._sceneTree.addNode(node);\r\n        this._sceneTree.root.updateVersion();\r\n    }\r\n    cancelProcess(customizationId, eventId, eventType, eventProgress, eventData, newNode = new SessionTreeNode_1.SessionTreeNode()) {\r\n        if (__classPrivateFieldGet(this, _SessionEngine_customizationProcess, \"f\") !== customizationId) {\r\n            this.removeBusyMode(customizationId);\r\n            const eventCancel = {\r\n                type: eventType,\r\n                id: eventId,\r\n                progress: eventProgress,\r\n                data: eventData,\r\n                status: 'The request was exceeded by another customization request'\r\n            };\r\n            this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_CANCEL, eventCancel);\r\n            this._logger.debug(`Session(${this.id}).cancelProcess: The request was was exceeded by another request.`);\r\n            return newNode;\r\n        }\r\n        else if (this._closed === true) {\r\n            this.removeBusyMode(customizationId);\r\n            this._logger.debug(`Session(${this.id}).cancelProcess: The session was closed during the request.`);\r\n            const eventCancel = { type: viewer_shared_types_1.TASK_TYPE.SESSION_CUSTOMIZATION, id: eventId, progress: 1, data: { sessionId: this.id }, status: 'The session was closed during the request.' };\r\n            this._eventEngine.emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_CANCEL, eventCancel);\r\n            return new SessionTreeNode_1.SessionTreeNode();\r\n        }\r\n    }\r\n    checkAvailability(action, checkForModelId = false) {\r\n        var _a;\r\n        if (!this._responseDto)\r\n            throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.checkAvailability: responseDto not available.');\r\n        if (!this._sessionId)\r\n            throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.checkAvailability: sessionId not available.');\r\n        if (checkForModelId && !this._modelId)\r\n            throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.checkAvailability: modelId not available.');\r\n        if (action && !this._responseDto.actions)\r\n            throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session.checkAvailability: actions not available.');\r\n        const responseDtoAction = (_a = this._responseDto.actions) === null || _a === void 0 ? void 0 : _a.find(a => a.name === action);\r\n        if (action && !responseDtoAction)\r\n            throw new viewer_shared_services_1.ShapeDiverViewerSessionError(`Session.checkAvailability: action ${action} not available.`);\r\n    }\r\n    cleanExportParameters(parameters) {\r\n        const requestParameterSet = {};\r\n        // first step, we convert all our names and displaynames to ids\r\n        for (const parameterIdOrName in parameters) {\r\n            // we prioritize id, then name and then displayname\r\n            // if there are two parameters with the same name or displayname, we take the one that is found first (no way for us to evaluate which one the user meant)\r\n            const parameterObject = Object.values(this._parameters).find(p => p.id === parameterIdOrName || p.name === parameterIdOrName || p.displayname === parameterIdOrName);\r\n            // in case the key of the key value pair was neither the id, name or displayname, skip\r\n            if (!parameterObject)\r\n                continue;\r\n            // copy into new dictionary\r\n            requestParameterSet[parameterObject.id] = (' ' + parameterObject.stringify(parameters[parameterIdOrName])).slice(1);\r\n        }\r\n        // seconds step, fill all other parameter values that are currently not set\r\n        const currentParameters = this.parameterValues;\r\n        for (const parameterId in currentParameters) {\r\n            // if already set by input values, skip\r\n            if (requestParameterSet[parameterId] !== undefined)\r\n                continue;\r\n            // deep copy into new dictionary\r\n            requestParameterSet[parameterId] = (' ' + currentParameters[parameterId]).slice(1);\r\n        }\r\n        return requestParameterSet;\r\n    }\r\n    /**\r\n     * Create an interaction parameter based on the parameter definition.\r\n     *\r\n     * @param parameter\r\n     * @returns\r\n     */\r\n    createInteractionParameter(parameter) {\r\n        const result = (0, viewer_shared_types_1.validateInteractionParameterSettings)(parameter.settings);\r\n        if (result.success) {\r\n            switch (parameter.settings.type) {\r\n                case 'selection':\r\n                    return new SelectionParameter_1.SelectionParameter(parameter, this);\r\n                case 'gumball':\r\n                    return new GumballParameter_1.GumballParameter(parameter, this);\r\n            }\r\n        }\r\n        else {\r\n            this._logger.warn(`SessionEngine.createInteractionParameter: The value ${parameter.settings} is not a valid InteractionParameter: ${result.error.message}`);\r\n        }\r\n        return new Parameter_1.Parameter(parameter, this);\r\n    }\r\n    customizeInternal(cancelRequest, taskEventInfo) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.customizeSession(this._parameterValues, cancelRequest, taskEventInfo);\r\n        });\r\n    }\r\n    customizeSession(parameters, cancelRequest, taskEventInfo, parallel = false, loadOutputs = true, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.checkAvailability('customize');\r\n            try {\r\n                this._performanceEvaluator.startSection('sessionResponse');\r\n                const responseDto = yield this._sdk.utils.submitAndWaitForCustomization(this._sdk, this._sessionId, parameters);\r\n                this._performanceEvaluator.endSection('sessionResponse');\r\n                if (loadOutputs === true && this._allowOutputLoading === true) {\r\n                    if (cancelRequest())\r\n                        return new SessionTreeNode_1.SessionTreeNode();\r\n                    if (parallel === true) {\r\n                        // special case, we load the outputs put don't add them to the scene\r\n                        return this.loadOutputsParallel(responseDto, cancelRequest, taskEventInfo);\r\n                    }\r\n                    else {\r\n                        // default case, we load the outputs and return the nodes\r\n                        this.updateResponseDto(responseDto);\r\n                        return this.loadOutputs(cancelRequest, taskEventInfo);\r\n                    }\r\n                }\r\n                else {\r\n                    // special case, we don't load the outputs and only return the responseDto\r\n                    const node = new SessionTreeNode_1.SessionTreeNode();\r\n                    node.data.push(new SessionData_1.SessionData(responseDto));\r\n                    return node;\r\n                }\r\n            }\r\n            catch (e) {\r\n                yield this.handleError(e, retry);\r\n                if (cancelRequest())\r\n                    return new SessionTreeNode_1.SessionTreeNode();\r\n                return yield this.customizeSession(parameters, cancelRequest, taskEventInfo, parallel, loadOutputs, true);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Get all file parameters from the parameter set.\r\n     * If the parameter is not set in the parameter set, the value from the parameter object is used.\r\n     *\r\n     * @param parameters\r\n     * @returns\r\n     */\r\n    getFileParameterSet(parameters) {\r\n        const fileParameterSet = {};\r\n        for (const parameterId in this.parameters) {\r\n            if (this.parameters[parameterId] instanceof FileParameter_1.FileParameter) {\r\n                fileParameterSet[parameterId] = parameters[parameterId] !== undefined ? parameters[parameterId] : this.parameters[parameterId].value;\r\n            }\r\n        }\r\n        return fileParameterSet;\r\n    }\r\n    handleError(e, retry = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ((0, sdk_geometry_api_sdk_v2_1.isGBResponseError)(e)) {\r\n                if (e.error === sdk_geometry_api_sdk_v2_1.ShapeDiverResponseErrorType.SESSION_GONE_ERROR) {\r\n                    // case 1: the session is no longer available\r\n                    // we try to re-initialize the session 3 times, if that does not work, we close it\r\n                    this._logger.warn('The session has been closed, trying to re-initialize.');\r\n                    if (this._sessionId)\r\n                        this._httpClient.removeDataLoading(this._sessionId);\r\n                    if (this._retryCounter < 3) {\r\n                        // we retry this 3 times, the `retry` option in the init function is set to true and passed on \r\n                        this._retryCounter = retry ? this._retryCounter + 1 : 1;\r\n                        this._initialized = false;\r\n                        yield this.init(this.parameterValues, true);\r\n                    }\r\n                    else {\r\n                        // the retries were exceeded, we close the session\r\n                        this._logger.warn('Tried to retry the connect multiple times, bearer token still not valid. Closing Session.');\r\n                        // eslint-disable-next-line no-empty\r\n                        try {\r\n                            yield this._closeOnFailure();\r\n                        }\r\n                        catch (e) { }\r\n                        throw this._httpClient.convertError(e);\r\n                    }\r\n                }\r\n                else if (e.error === sdk_geometry_api_sdk_v2_1.ShapeDiverResponseErrorType.JWT_VALIDATION_ERROR) {\r\n                    // if any of the above errors occur, we try to get a new bearer token\r\n                    // if we get a new one, we retry 3 times (by requiring new bearer tokens every time)\r\n                    if (this._retryCounter < 3) {\r\n                        if (this._refreshJwtToken) {\r\n                            yield this.setJwtToken(yield this._refreshJwtToken());\r\n                            this._retryCounter = retry ? this._retryCounter + 1 : 1;\r\n                            this._logger.warn('Re-trying with new bearer token.');\r\n                        }\r\n                        else {\r\n                            // no bearer tokens are supplied, we close the session\r\n                            this._logger.warn('No retry possible, no new bearer token was supplied. Closing Session.');\r\n                            // eslint-disable-next-line no-empty\r\n                            try {\r\n                                yield this._closeOnFailure();\r\n                            }\r\n                            catch (e) { }\r\n                            throw this._httpClient.convertError(e);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // the retries were exceeded, we close the session\r\n                        this._logger.warn('Tried to retry the connect multiple times, bearer token still not valid. Closing Session.');\r\n                        // eslint-disable-next-line no-empty\r\n                        try {\r\n                            yield this._closeOnFailure();\r\n                        }\r\n                        catch (e) { }\r\n                        throw this._httpClient.convertError(e);\r\n                    }\r\n                }\r\n                else {\r\n                    throw this._httpClient.convertError(e);\r\n                }\r\n            }\r\n            else {\r\n                throw this._httpClient.convertError(e);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Process the image input and return the image data and array buffer.\r\n     *\r\n     * In the case of the image being a Blob or File, the image data is constructed from the Blob or File.\r\n     * In the case of the image being a string, we check if it is a data URL or a URL.\r\n     * If it is a data URL, we convert it to a Blob and construct the image data from the Blob.\r\n     * If it is a URL, we download the image and return the image data and array buffer.\r\n     *\r\n     * @param image\r\n     * @returns\r\n     */\r\n    processImageInput(image) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (image instanceof File || image instanceof Blob)\r\n                return this._converter.constructImageData(image);\r\n            let imageString;\r\n            if (typeof image === 'function') {\r\n                imageString = image();\r\n            }\r\n            else {\r\n                imageString = image;\r\n            }\r\n            if (imageString.startsWith('data:')) {\r\n                // case where the image is a data URL\r\n                const { blob, arrayBuffer } = this._converter.dataURLtoBlob(imageString);\r\n                return {\r\n                    imageData: {\r\n                        format: blob.type,\r\n                        size: blob.size\r\n                    },\r\n                    arrayBuffer\r\n                };\r\n            }\r\n            else {\r\n                // case where the image is a URL\r\n                const [arrayBuffer, type] = yield this._sdk.asset.downloadImage(this._sessionId, imageString);\r\n                return {\r\n                    imageData: {\r\n                        format: type,\r\n                        size: arrayBuffer.byteLength\r\n                    },\r\n                    arrayBuffer\r\n                };\r\n            }\r\n        });\r\n    }\r\n    removeBusyMode(busyId) {\r\n        for (const r in this._stateEngine.viewportEngines) {\r\n            if (this._stateEngine.viewportEngines[r] && this._stateEngine.viewportEngines[r].busy.includes(busyId))\r\n                this._stateEngine.viewportEngines[r].busy.splice(this._stateEngine.viewportEngines[r].busy.indexOf(busyId), 1);\r\n            if (__classPrivateFieldGet(this, _SessionEngine_customizationBusyModes, \"f\").includes(busyId))\r\n                __classPrivateFieldGet(this, _SessionEngine_customizationBusyModes, \"f\").splice(__classPrivateFieldGet(this, _SessionEngine_customizationBusyModes, \"f\").indexOf(busyId), 1);\r\n        }\r\n    }\r\n    removeFromSceneTree(node) {\r\n        this._sceneTree.removeNode(node);\r\n        this._sceneTree.root.updateVersion();\r\n    }\r\n    /**\r\n     * Returns a promise that resolves after the amount of milliseconds provided.\r\n     *\r\n     * @param ms the milliseconds\r\n     * @returns promise that resolve after specified milliseconds\r\n     */\r\n    timeout(ms) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise(resolve => setTimeout(resolve, ms));\r\n        });\r\n    }\r\n    updateResponseDto(responseDto, initialParameters) {\r\n        var _a, _b, _c, _d;\r\n        if (!this._responseDto) {\r\n            this._responseDto = responseDto;\r\n            return;\r\n        }\r\n        // convert parameters\r\n        if (responseDto.parameters) {\r\n            for (const parameterId in responseDto.parameters) {\r\n                this._responseDto.parameters = this._responseDto.parameters || {};\r\n                this._responseDto.parameters[parameterId] = this._responseDto.parameters[parameterId] || responseDto.parameters[parameterId];\r\n            }\r\n        }\r\n        // convert outputs\r\n        if (responseDto.outputs) {\r\n            for (const outputId in responseDto.outputs) {\r\n                this._responseDto.outputs = this._responseDto.outputs || {};\r\n                if ('version' in responseDto.outputs[outputId] || !(this._responseDto.outputs[outputId] && 'version' in this._responseDto.outputs[outputId]))\r\n                    this._responseDto.outputs[outputId] = responseDto.outputs[outputId];\r\n            }\r\n        }\r\n        // convert exports\r\n        if (responseDto.exports) {\r\n            for (const exportId in responseDto.exports) {\r\n                this._responseDto.exports = this._responseDto.exports || {};\r\n                if ('version' in responseDto.exports[exportId] || !(this._responseDto.exports[exportId] && 'version' in this._responseDto.exports[exportId]))\r\n                    this._responseDto.exports[exportId] = responseDto.exports[exportId];\r\n            }\r\n        }\r\n        const parameterSet = {};\r\n        for (const parameterId in this._responseDto.parameters) {\r\n            if (this.parameters[parameterId])\r\n                continue;\r\n            this._responseDto.parameters[parameterId].id = parameterId;\r\n            /**\r\n             *\r\n             * REMOVE THIS LOGIC - START\r\n             *\r\n             */\r\n            const fakeSelectionParameterName = 'FAKE_SELECTION_PARAMETER';\r\n            const nameStartsWithFakeSelectionParameter = this._responseDto.parameters[parameterId].name.startsWith(fakeSelectionParameterName);\r\n            const displaynameStartsWithFakeSelectionParameter = (_a = this._responseDto.parameters[parameterId].displayname) === null || _a === void 0 ? void 0 : _a.startsWith(fakeSelectionParameterName);\r\n            if (nameStartsWithFakeSelectionParameter || displaynameStartsWithFakeSelectionParameter) {\r\n                this._responseDto.parameters[parameterId].type = viewer_shared_types_1.PARAMETER_TYPE.INTERACTION;\r\n                const name = nameStartsWithFakeSelectionParameter ? this._responseDto.parameters[parameterId].name : this._responseDto.parameters[parameterId].displayname;\r\n                const urlParams = new URLSearchParams(name.replace(fakeSelectionParameterName + '?', ''));\r\n                const jsonString = urlParams.get('settings');\r\n                if (jsonString)\r\n                    this._responseDto.parameters[parameterId].settings = JSON.parse(jsonString + '');\r\n            }\r\n            const fakeGumballParameterName = 'FAKE_GUMBALL_PARAMETER';\r\n            const nameStartsWithFakeGumballParameter = this._responseDto.parameters[parameterId].name.startsWith(fakeGumballParameterName);\r\n            const displaynameStartsWithFakeGumballParameter = (_b = this._responseDto.parameters[parameterId].displayname) === null || _b === void 0 ? void 0 : _b.startsWith(fakeGumballParameterName);\r\n            if (nameStartsWithFakeGumballParameter || displaynameStartsWithFakeGumballParameter) {\r\n                this._responseDto.parameters[parameterId].type = viewer_shared_types_1.PARAMETER_TYPE.INTERACTION;\r\n                const name = nameStartsWithFakeGumballParameter ? this._responseDto.parameters[parameterId].name : this._responseDto.parameters[parameterId].displayname;\r\n                const urlParams = new URLSearchParams(name.replace(fakeGumballParameterName + '?', ''));\r\n                const jsonString = urlParams.get('settings');\r\n                if (jsonString)\r\n                    this._responseDto.parameters[parameterId].settings = JSON.parse(jsonString + '');\r\n            }\r\n            const fakeDrawingParameterName = 'FAKE_DRAWING_PARAMETER';\r\n            const nameStartsWithFakeDrawingParameter = this._responseDto.parameters[parameterId].name.startsWith(fakeDrawingParameterName);\r\n            const displaynameStartsWithFakeDrawingParameter = (_c = this._responseDto.parameters[parameterId].displayname) === null || _c === void 0 ? void 0 : _c.startsWith(fakeDrawingParameterName);\r\n            if (nameStartsWithFakeDrawingParameter || displaynameStartsWithFakeDrawingParameter) {\r\n                this._responseDto.parameters[parameterId].type = viewer_shared_types_1.PARAMETER_TYPE.DRAWING;\r\n                const name = nameStartsWithFakeDrawingParameter ? this._responseDto.parameters[parameterId].name : this._responseDto.parameters[parameterId].displayname;\r\n                const urlParams = new URLSearchParams(name.replace(fakeDrawingParameterName + '?', ''));\r\n                const jsonString = urlParams.get('settings');\r\n                if (jsonString)\r\n                    this._responseDto.parameters[parameterId].settings = JSON.parse(jsonString + '');\r\n            }\r\n            const fakeDrawingFixParameterName = 'FAKE_DRAWING_FIX';\r\n            const nameStartsWithFakeDrawingFixParameter = this._responseDto.parameters[parameterId].name.startsWith(fakeDrawingFixParameterName);\r\n            const displaynameStartsWithFakeDrawingFixParameter = (_d = this._responseDto.parameters[parameterId].displayname) === null || _d === void 0 ? void 0 : _d.startsWith(fakeDrawingFixParameterName);\r\n            if (nameStartsWithFakeDrawingFixParameter || displaynameStartsWithFakeDrawingFixParameter) {\r\n                this._responseDto.parameters[parameterId].type = viewer_shared_types_1.PARAMETER_TYPE.DRAWING;\r\n            }\r\n            /**\r\n             *\r\n             * REMOVE THIS LOGIC - END\r\n             *\r\n             */\r\n            switch (true) {\r\n                case this._responseDto.parameters[parameterId].type === viewer_shared_types_1.PARAMETER_TYPE.BOOL:\r\n                    this.parameters[parameterId] = new Parameter_1.Parameter(this._responseDto.parameters[parameterId], this);\r\n                    break;\r\n                case this._responseDto.parameters[parameterId].type === viewer_shared_types_1.PARAMETER_TYPE.COLOR:\r\n                    this.parameters[parameterId] = new Parameter_1.Parameter(this._responseDto.parameters[parameterId], this);\r\n                    break;\r\n                case this._responseDto.parameters[parameterId].type === viewer_shared_types_1.PARAMETER_TYPE.FILE:\r\n                    this.parameters[parameterId] = new FileParameter_1.FileParameter(this._responseDto.parameters[parameterId], this);\r\n                    break;\r\n                case this._responseDto.parameters[parameterId].type === viewer_shared_types_1.PARAMETER_TYPE.EVEN || this._responseDto.parameters[parameterId].type === viewer_shared_types_1.PARAMETER_TYPE.FLOAT || this._responseDto.parameters[parameterId].type === viewer_shared_types_1.PARAMETER_TYPE.INT || this._responseDto.parameters[parameterId].type === viewer_shared_types_1.PARAMETER_TYPE.ODD:\r\n                    this.parameters[parameterId] = new Parameter_1.Parameter(this._responseDto.parameters[parameterId], this);\r\n                    break;\r\n                case this._responseDto.parameters[parameterId].type === viewer_shared_types_1.PARAMETER_TYPE.INTERACTION:\r\n                    this.parameters[parameterId] = this.createInteractionParameter(this._responseDto.parameters[parameterId]);\r\n                    break;\r\n                case this._responseDto.parameters[parameterId].type === viewer_shared_types_1.PARAMETER_TYPE.DRAWING:\r\n                    this.parameters[parameterId] = new DrawingParameter_1.DrawingParameter(this._responseDto.parameters[parameterId], this);\r\n                    break;\r\n                default:\r\n                    this.parameters[parameterId] = new Parameter_1.Parameter(this._responseDto.parameters[parameterId], this);\r\n                    break;\r\n            }\r\n            // we don't have to do larger restrictions for this as the backend would have already thrown an error if the values were not correct\r\n            if (initialParameters) {\r\n                // check if the id is within the initial parameters\r\n                if (initialParameters[parameterId] !== undefined) {\r\n                    this.parameters[parameterId].value = initialParameters[parameterId];\r\n                }\r\n                // check if the name is within the initial parameters\r\n                else if (initialParameters[this.parameters[parameterId].name] !== undefined) {\r\n                    this.parameters[parameterId].value = initialParameters[this.parameters[parameterId].name];\r\n                }\r\n                // NOTE: At some point the checking may also be done with the displayname, this is the code for it\r\n                // // check if the displayname is within the initial parameters\r\n                // else if(this.parameters[parameterId].displayname && initialParameters[this.parameters[parameterId].displayname!] !== undefined) {\r\n                //     this.parameters[parameterId].value = initialParameters[this.parameters[parameterId].displayname!];\r\n                // }\r\n            }\r\n            parameterSet[parameterId] = {\r\n                value: this.parameters[parameterId].value,\r\n                valueString: this.parameters[parameterId].stringify()\r\n            };\r\n            if (!this.initialized)\r\n                this.parameterValues[parameterId] = parameterSet[parameterId].valueString;\r\n        }\r\n        // store the initialization as the first parameter set in the history\r\n        if (!this.initialized)\r\n            __classPrivateFieldGet(this, _SessionEngine_parameterHistory, \"f\").push(parameterSet);\r\n        for (const exportId in this._responseDto.exports) {\r\n            if (this._responseDto.exports[exportId].type === sdk_geometry_api_sdk_v2_1.ShapeDiverResponseExportDefinitionType.EMAIL || this._responseDto.exports[exportId].type === sdk_geometry_api_sdk_v2_1.ShapeDiverResponseExportDefinitionType.DOWNLOAD) {\r\n                if (!this.exports[exportId]) {\r\n                    this._responseDto.exports[exportId].id = exportId;\r\n                    this.exports[exportId] = new Export_1.Export(this._responseDto.exports[exportId], this);\r\n                }\r\n                else {\r\n                    this.exports[exportId].updateExportDefinition(this._responseDto.exports[exportId]);\r\n                }\r\n            }\r\n        }\r\n        for (const outputId in this._responseDto.outputs) {\r\n            if (!this.outputs[outputId]) {\r\n                this._responseDto.outputs[outputId].id = outputId;\r\n                if (this.outputsFreeze[outputId] === undefined)\r\n                    this.outputsFreeze[outputId] = false;\r\n                this.outputs[outputId] = new Output_1.Output(this._responseDto.outputs[outputId], this);\r\n            }\r\n            else {\r\n                this.outputs[outputId].updateOutputDefinition(this._responseDto.outputs[outputId]);\r\n            }\r\n        }\r\n    }\r\n    waitForUpdateCallbacks(newOutputVersions, oldOutputVersions, newNode, oldNode) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // call the update callback function on the session\r\n            if (this._updateCallback)\r\n                yield Promise.resolve(this._updateCallback(newNode, oldNode));\r\n            const promises = [];\r\n            // call the update callback functions on the outputs\r\n            for (const outputId in this.outputs) {\r\n                if (oldOutputVersions[outputId] !== newOutputVersions[outputId]) {\r\n                    promises.push(this.outputs[outputId].triggerUpdateCallback(newNode.children.find(c => c.name === outputId), oldNode.children.find(c => c.name === outputId)));\r\n                }\r\n            }\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n}\r\nexports.SessionEngine = SessionEngine;\r\n_SessionEngine_customizationBusyModes = new WeakMap(), _SessionEngine_customizationProcess = new WeakMap(), _SessionEngine_parameterHistory = new WeakMap(), _SessionEngine_parameterHistoryCall = new WeakMap(), _SessionEngine_parameterHistoryForward = new WeakMap();\r\n//# sourceMappingURL=SessionEngine.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _SessionOutputData_responseOutput;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionOutputData = void 0;\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nclass SessionOutputData extends viewer_shared_node_tree_1.AbstractTreeNodeData {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    constructor(responseOutput, id, version) {\r\n        super(id, version);\r\n        // #region Properties (1)\r\n        _SessionOutputData_responseOutput.set(this, void 0);\r\n        __classPrivateFieldSet(this, _SessionOutputData_responseOutput, responseOutput, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (2)\r\n    get responseOutput() {\r\n        return __classPrivateFieldGet(this, _SessionOutputData_responseOutput, \"f\");\r\n    }\r\n    set responseOutput(value) {\r\n        __classPrivateFieldSet(this, _SessionOutputData_responseOutput, value, \"f\");\r\n    }\r\n    // #endregion Public Getters And Setters (2)\r\n    // #region Public Methods (1)\r\n    clone() {\r\n        return new SessionOutputData(this.responseOutput, this.id, this.version);\r\n    }\r\n}\r\nexports.SessionOutputData = SessionOutputData;\r\n_SessionOutputData_responseOutput = new WeakMap();\r\n//# sourceMappingURL=SessionOutputData.js.map","\"use strict\";\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _SessionTreeNode_sessionNode;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionTreeNode = void 0;\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nclass SessionTreeNode extends viewer_shared_node_tree_1.TreeNode {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    /**\r\n     * Special scene graph node for session data. Only to be created internally.\r\n     *\r\n     * @param name the name of the node\r\n     * @param parent the parent of this node\r\n     * @param data the array of data\r\n     * @param transformation the array of transformations\r\n     */\r\n    constructor(name, parent, data, transformations) {\r\n        super(name, parent, data, transformations);\r\n        // #region Properties (1)\r\n        _SessionTreeNode_sessionNode.set(this, true);\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (1)\r\n    get sessionNode() {\r\n        return __classPrivateFieldGet(this, _SessionTreeNode_sessionNode, \"f\");\r\n    }\r\n}\r\nexports.SessionTreeNode = SessionTreeNode;\r\n_SessionTreeNode_sessionNode = new WeakMap();\r\n//# sourceMappingURL=SessionTreeNode.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar _DrawingParameter_sessionEngine;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawingParameter = void 0;\r\nconst Parameter_1 = require(\"./Parameter\");\r\nconst viewer_shared_types_1 = require(\"@shapediver/viewer.shared.types\");\r\nclass DrawingParameter extends Parameter_1.Parameter {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    constructor(paramDef, sessionEngine) {\r\n        super(paramDef, sessionEngine);\r\n        // #region Properties (1)\r\n        _DrawingParameter_sessionEngine.set(this, void 0);\r\n        __classPrivateFieldSet(this, _DrawingParameter_sessionEngine, sessionEngine, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (2)\r\n    get geometry() {\r\n        var _a;\r\n        return (_a = this.getDrawingProperties()) === null || _a === void 0 ? void 0 : _a.geometry;\r\n    }\r\n    get restrictions() {\r\n        var _a;\r\n        return (_a = this.getDrawingProperties()) === null || _a === void 0 ? void 0 : _a.restrictions;\r\n    }\r\n    // #endregion Public Getters And Setters (2)\r\n    // #region Private Methods (1)\r\n    getDrawingProperties() {\r\n        const result = (0, viewer_shared_types_1.validateDrawingParameterSettings)(this.settings);\r\n        if (result.success) {\r\n            return this.settings;\r\n        }\r\n    }\r\n}\r\nexports.DrawingParameter = DrawingParameter;\r\n_DrawingParameter_sessionEngine = new WeakMap();\r\n//# sourceMappingURL=DrawingParameter.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _Export_eventEngine, _Export_id, _Export_inputValidator, _Export_logger, _Export_name, _Export_sessionEngine, _Export_type, _Export_uuidGenerator, _Export_content, _Export_delay, _Export_dependency, _Export_displayname, _Export_filename, _Export_group, _Export_hidden, _Export_maxWaitTime, _Export_msg, _Export_order, _Export_result, _Export_status_collect, _Export_status_computation, _Export_tooltip, _Export_uid, _Export_version;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Export = void 0;\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst viewer_shared_types_1 = require(\"@shapediver/viewer.shared.types\");\r\nclass Export {\r\n    // #endregion Properties (24)\r\n    // #region Constructors (1)\r\n    constructor(exportDef, sessionEngine) {\r\n        // #region Properties (24)\r\n        _Export_eventEngine.set(this, viewer_shared_services_1.EventEngine.instance);\r\n        _Export_id.set(this, void 0);\r\n        _Export_inputValidator.set(this, viewer_shared_services_1.InputValidator.instance);\r\n        _Export_logger.set(this, viewer_shared_services_1.Logger.instance);\r\n        _Export_name.set(this, void 0);\r\n        _Export_sessionEngine.set(this, void 0);\r\n        _Export_type.set(this, void 0);\r\n        _Export_uuidGenerator.set(this, viewer_shared_services_1.UuidGenerator.instance);\r\n        _Export_content.set(this, void 0);\r\n        _Export_delay.set(this, void 0);\r\n        _Export_dependency.set(this, void 0);\r\n        _Export_displayname.set(this, void 0);\r\n        _Export_filename.set(this, void 0);\r\n        _Export_group.set(this, void 0);\r\n        _Export_hidden.set(this, false);\r\n        _Export_maxWaitTime.set(this, 300000);\r\n        _Export_msg.set(this, void 0);\r\n        _Export_order.set(this, void 0);\r\n        _Export_result.set(this, void 0);\r\n        _Export_status_collect.set(this, void 0);\r\n        _Export_status_computation.set(this, void 0);\r\n        _Export_tooltip.set(this, void 0);\r\n        _Export_uid.set(this, void 0);\r\n        _Export_version.set(this, void 0);\r\n        __classPrivateFieldSet(this, _Export_sessionEngine, sessionEngine, \"f\");\r\n        __classPrivateFieldSet(this, _Export_id, exportDef.id, \"f\");\r\n        __classPrivateFieldSet(this, _Export_name, exportDef.name, \"f\");\r\n        __classPrivateFieldSet(this, _Export_type, exportDef.type, \"f\");\r\n        this.updateExportDefinition(exportDef);\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (24)\r\n    get content() {\r\n        return __classPrivateFieldGet(this, _Export_content, \"f\");\r\n    }\r\n    get delay() {\r\n        return __classPrivateFieldGet(this, _Export_delay, \"f\");\r\n    }\r\n    get dependency() {\r\n        return __classPrivateFieldGet(this, _Export_dependency, \"f\");\r\n    }\r\n    get displayname() {\r\n        return __classPrivateFieldGet(this, _Export_displayname, \"f\");\r\n    }\r\n    set displayname(value) {\r\n        __classPrivateFieldSet(this, _Export_displayname, value, \"f\");\r\n    }\r\n    get filename() {\r\n        return __classPrivateFieldGet(this, _Export_filename, \"f\");\r\n    }\r\n    get group() {\r\n        return __classPrivateFieldGet(this, _Export_group, \"f\");\r\n    }\r\n    get hidden() {\r\n        return __classPrivateFieldGet(this, _Export_hidden, \"f\");\r\n    }\r\n    set hidden(value) {\r\n        __classPrivateFieldSet(this, _Export_hidden, value, \"f\");\r\n    }\r\n    get id() {\r\n        return __classPrivateFieldGet(this, _Export_id, \"f\");\r\n    }\r\n    get maxWaitTime() {\r\n        return __classPrivateFieldGet(this, _Export_maxWaitTime, \"f\");\r\n    }\r\n    set maxWaitTime(value) {\r\n        __classPrivateFieldSet(this, _Export_maxWaitTime, value, \"f\");\r\n    }\r\n    get msg() {\r\n        return __classPrivateFieldGet(this, _Export_msg, \"f\");\r\n    }\r\n    get name() {\r\n        return __classPrivateFieldGet(this, _Export_name, \"f\");\r\n    }\r\n    get order() {\r\n        return __classPrivateFieldGet(this, _Export_order, \"f\");\r\n    }\r\n    set order(value) {\r\n        __classPrivateFieldSet(this, _Export_order, value, \"f\");\r\n    }\r\n    get result() {\r\n        return __classPrivateFieldGet(this, _Export_result, \"f\");\r\n    }\r\n    get status_collect() {\r\n        return __classPrivateFieldGet(this, _Export_status_collect, \"f\");\r\n    }\r\n    get status_computation() {\r\n        return __classPrivateFieldGet(this, _Export_status_computation, \"f\");\r\n    }\r\n    get tooltip() {\r\n        return __classPrivateFieldGet(this, _Export_tooltip, \"f\");\r\n    }\r\n    set tooltip(value) {\r\n        __classPrivateFieldSet(this, _Export_tooltip, value, \"f\");\r\n    }\r\n    get type() {\r\n        return __classPrivateFieldGet(this, _Export_type, \"f\");\r\n    }\r\n    get uid() {\r\n        return __classPrivateFieldGet(this, _Export_uid, \"f\");\r\n    }\r\n    get version() {\r\n        return __classPrivateFieldGet(this, _Export_version, \"f\");\r\n    }\r\n    // #endregion Public Getters And Setters (24)\r\n    // #region Public Methods (3)\r\n    request(parameterValues = {}) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const eventId = __classPrivateFieldGet(this, _Export_uuidGenerator, \"f\").create();\r\n            try {\r\n                const event = { type: viewer_shared_types_1.TASK_TYPE.EXPORT_REQUEST, id: eventId, progress: 0, status: 'Requesting export' };\r\n                __classPrivateFieldGet(this, _Export_eventEngine, \"f\").emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_START, event);\r\n                if (Object.keys(parameterValues).length === 0) {\r\n                    __classPrivateFieldGet(this, _Export_logger, \"f\").info(`Export(${__classPrivateFieldGet(this, _Export_id, \"f\")}).request: Sending export request with parameters ${JSON.stringify(parameterValues)}.`);\r\n                }\r\n                else {\r\n                    __classPrivateFieldGet(this, _Export_logger, \"f\").debugLow(`Export(${__classPrivateFieldGet(this, _Export_id, \"f\")}).request: Sending export request.`);\r\n                }\r\n                const exportDef = yield __classPrivateFieldGet(this, _Export_sessionEngine, \"f\").requestExport(this.id, parameterValues, __classPrivateFieldGet(this, _Export_maxWaitTime, \"f\"));\r\n                this.updateExportDefinition(exportDef);\r\n                const eventEnd = { type: viewer_shared_types_1.TASK_TYPE.EXPORT_REQUEST, id: eventId, progress: 1, status: 'Returning export' };\r\n                __classPrivateFieldGet(this, _Export_eventEngine, \"f\").emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_END, eventEnd);\r\n                return exportDef;\r\n            }\r\n            catch (e) {\r\n                const eventEnd = { type: viewer_shared_types_1.TASK_TYPE.EXPORT_REQUEST, id: eventId, progress: 1, status: 'Export request failed' };\r\n                __classPrivateFieldGet(this, _Export_eventEngine, \"f\").emitEvent(viewer_shared_services_1.EVENTTYPE.TASK.TASK_CANCEL, eventEnd);\r\n                throw e;\r\n            }\r\n        });\r\n    }\r\n    updateExport() {\r\n        const exportDef = __classPrivateFieldGet(this, _Export_sessionEngine, \"f\").exports[this.id];\r\n        __classPrivateFieldSet(this, _Export_dependency, exportDef.dependency, \"f\");\r\n        __classPrivateFieldSet(this, _Export_uid, exportDef.uid, \"f\");\r\n        __classPrivateFieldSet(this, _Export_displayname, exportDef.displayname, \"f\");\r\n        __classPrivateFieldSet(this, _Export_order, exportDef.order, \"f\");\r\n        __classPrivateFieldSet(this, _Export_hidden, exportDef.hidden, \"f\");\r\n        __classPrivateFieldSet(this, _Export_tooltip, exportDef.tooltip, \"f\");\r\n        __classPrivateFieldSet(this, _Export_version, exportDef.version, \"f\");\r\n        __classPrivateFieldSet(this, _Export_delay, exportDef.delay, \"f\");\r\n        __classPrivateFieldSet(this, _Export_content, exportDef.content, \"f\");\r\n        __classPrivateFieldSet(this, _Export_msg, exportDef.msg, \"f\");\r\n        __classPrivateFieldSet(this, _Export_filename, exportDef.filename, \"f\");\r\n        __classPrivateFieldSet(this, _Export_result, exportDef.result, \"f\");\r\n        __classPrivateFieldSet(this, _Export_status_computation, exportDef.status_computation, \"f\");\r\n        __classPrivateFieldSet(this, _Export_status_collect, exportDef.status_collect, \"f\");\r\n        __classPrivateFieldSet(this, _Export_group, exportDef.group, \"f\");\r\n    }\r\n    updateExportDefinition(exportDef) {\r\n        __classPrivateFieldSet(this, _Export_dependency, exportDef.dependency, \"f\");\r\n        __classPrivateFieldSet(this, _Export_uid, exportDef.uid, \"f\");\r\n        __classPrivateFieldSet(this, _Export_displayname, exportDef.displayname, \"f\");\r\n        __classPrivateFieldSet(this, _Export_order, exportDef.order, \"f\");\r\n        __classPrivateFieldSet(this, _Export_hidden, exportDef.hidden, \"f\");\r\n        __classPrivateFieldSet(this, _Export_tooltip, exportDef.tooltip, \"f\");\r\n        __classPrivateFieldSet(this, _Export_version, exportDef.version, \"f\");\r\n        __classPrivateFieldSet(this, _Export_delay, exportDef.delay, \"f\");\r\n        __classPrivateFieldSet(this, _Export_content, exportDef.content, \"f\");\r\n        __classPrivateFieldSet(this, _Export_msg, exportDef.msg, \"f\");\r\n        __classPrivateFieldSet(this, _Export_filename, exportDef.filename, \"f\");\r\n        __classPrivateFieldSet(this, _Export_result, exportDef.result, \"f\");\r\n        __classPrivateFieldSet(this, _Export_status_computation, exportDef.status_computation, \"f\");\r\n        __classPrivateFieldSet(this, _Export_status_collect, exportDef.status_collect, \"f\");\r\n        __classPrivateFieldSet(this, _Export_group, exportDef.group, \"f\");\r\n    }\r\n}\r\nexports.Export = Export;\r\n_Export_eventEngine = new WeakMap(), _Export_id = new WeakMap(), _Export_inputValidator = new WeakMap(), _Export_logger = new WeakMap(), _Export_name = new WeakMap(), _Export_sessionEngine = new WeakMap(), _Export_type = new WeakMap(), _Export_uuidGenerator = new WeakMap(), _Export_content = new WeakMap(), _Export_delay = new WeakMap(), _Export_dependency = new WeakMap(), _Export_displayname = new WeakMap(), _Export_filename = new WeakMap(), _Export_group = new WeakMap(), _Export_hidden = new WeakMap(), _Export_maxWaitTime = new WeakMap(), _Export_msg = new WeakMap(), _Export_order = new WeakMap(), _Export_result = new WeakMap(), _Export_status_collect = new WeakMap(), _Export_status_computation = new WeakMap(), _Export_tooltip = new WeakMap(), _Export_uid = new WeakMap(), _Export_version = new WeakMap();\r\n//# sourceMappingURL=Export.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _FileParameter_logger, _FileParameter_sessionEngine, _FileParameter_uuidGenerator;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FileParameter = void 0;\r\nconst MimeTypeUtils = __importStar(require(\"@shapediver/viewer.utils.mime-type\"));\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst Parameter_1 = require(\"./Parameter\");\r\nclass FileParameter extends Parameter_1.Parameter {\r\n    // #endregion Properties (3)\r\n    // #region Constructors (1)\r\n    constructor(paramDef, sessionEngine) {\r\n        super(paramDef, sessionEngine);\r\n        // #region Properties (3)\r\n        _FileParameter_logger.set(this, viewer_shared_services_1.Logger.instance);\r\n        _FileParameter_sessionEngine.set(this, void 0);\r\n        _FileParameter_uuidGenerator.set(this, viewer_shared_services_1.UuidGenerator.instance);\r\n        __classPrivateFieldSet(this, _FileParameter_sessionEngine, sessionEngine, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Methods (2)\r\n    getFilename(fileId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // if fileId is undefined and value is undefined, return undefined\r\n            if (fileId === undefined && this.value === undefined)\r\n                return;\r\n            // if fileId is undefined and value is a string and is a valid uuid, use the value as fileId\r\n            if (fileId === undefined && typeof this.value === 'string' && ((this.value.length === 36 && __classPrivateFieldGet(this, _FileParameter_uuidGenerator, \"f\").validate(this.value)) || this.value === ''))\r\n                return (yield __classPrivateFieldGet(this, _FileParameter_sessionEngine, \"f\").getFileInfo(this.id, this.value)).filename;\r\n            // if fileId is undefined, return undefined\r\n            if (fileId === undefined)\r\n                return;\r\n            return (yield __classPrivateFieldGet(this, _FileParameter_sessionEngine, \"f\").getFileInfo(this.id, fileId)).filename;\r\n        });\r\n    }\r\n    upload(v) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const value = v !== undefined ? v : this.value;\r\n            if (value === undefined)\r\n                return this.defval;\r\n            if (typeof value === 'string' && ((value.length === 36 && __classPrivateFieldGet(this, _FileParameter_uuidGenerator, \"f\").validate(value)) || value === ''))\r\n                return value;\r\n            // get the type of the file\r\n            let fileType;\r\n            if (value instanceof File) {\r\n                if (value.type === '') {\r\n                    // try to get type from file name\r\n                    const types = MimeTypeUtils.guessMimeTypeFromFilename(value.name);\r\n                    if (types.length === 0) {\r\n                        throw new viewer_shared_services_1.ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, provided File has no type and could not be guessed from filename. Has to be ${this.format}.`);\r\n                    }\r\n                    else {\r\n                        fileType = types;\r\n                    }\r\n                }\r\n                else {\r\n                    fileType = value.type;\r\n                }\r\n            }\r\n            else if (value instanceof Blob) {\r\n                if (value.type === '') {\r\n                    throw new viewer_shared_services_1.ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, provided File has no type and could not be guessed from filename. Has to be ${this.format}.`);\r\n                }\r\n                else {\r\n                    fileType = value.type;\r\n                }\r\n            }\r\n            else {\r\n                fileType = 'text/plain';\r\n            }\r\n            /**\r\n             * Get all possible mime types for the provided fileType.\r\n             */\r\n            let types = typeof fileType === 'string' ? [fileType] : fileType;\r\n            // get all endings that are possible for this type\r\n            const endings = MimeTypeUtils.mapMimeTypeToFileEndings(types);\r\n            // get all mimeTypes that are possible for these endings\r\n            endings.forEach((e) => types = types.concat(MimeTypeUtils.guessMimeTypeFromFilename(e)));\r\n            /**\r\n             * Check if the provided fileType is allowed for this parameter.\r\n             * If not, throw an error.\r\n             */\r\n            let type = undefined;\r\n            // check if one of the mime types is allowed\r\n            let allowedType = false;\r\n            for (let i = 0; i < types.length; i++) {\r\n                if ((_a = this.format) === null || _a === void 0 ? void 0 : _a.includes(types[i])) {\r\n                    allowedType = true;\r\n                    type = types[i];\r\n                    break;\r\n                }\r\n            }\r\n            // if the type is not allowed, throw an error\r\n            if (allowedType === false || type === undefined)\r\n                throw new viewer_shared_services_1.ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, type of data (${fileType}) is not a valid type. Has to be ${this.format}.`);\r\n            // create a File object\r\n            const data = new File([\r\n                typeof value === 'string' ?\r\n                    new Blob([value], { type: 'text/plain' }) :\r\n                    value\r\n            ], value instanceof File && value.name !== undefined ? value.name : '', { type });\r\n            __classPrivateFieldGet(this, _FileParameter_logger, \"f\").debug(`Parameter(${this.id}).upload: Uploading FileParameter.`);\r\n            return yield __classPrivateFieldGet(this, _FileParameter_sessionEngine, \"f\").uploadFile(this.id, data, type);\r\n        });\r\n    }\r\n}\r\nexports.FileParameter = FileParameter;\r\n_FileParameter_logger = new WeakMap(), _FileParameter_sessionEngine = new WeakMap(), _FileParameter_uuidGenerator = new WeakMap();\r\n//# sourceMappingURL=FileParameter.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _Output_id, _Output_inputValidator, _Output_logger, _Output_name, _Output_sessionEngine, _Output_uuidGenerator, _Output_bbmax, _Output_bbmin, _Output_chunks, _Output_content, _Output_delay, _Output_dependency, _Output_displayname, _Output_hidden, _Output_material, _Output_msg, _Output_order, _Output_status_collect, _Output_status_computation, _Output_tooltip, _Output_uid, _Output_updateCallback, _Output_version;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Output = void 0;\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nclass Output {\r\n    // #endregion Properties (23)\r\n    // #region Constructors (1)\r\n    constructor(outputDef, sessionEngine) {\r\n        // #region Properties (23)\r\n        _Output_id.set(this, void 0);\r\n        _Output_inputValidator.set(this, viewer_shared_services_1.InputValidator.instance);\r\n        _Output_logger.set(this, viewer_shared_services_1.Logger.instance);\r\n        _Output_name.set(this, void 0);\r\n        _Output_sessionEngine.set(this, void 0);\r\n        _Output_uuidGenerator.set(this, viewer_shared_services_1.UuidGenerator.instance);\r\n        _Output_bbmax.set(this, void 0);\r\n        _Output_bbmin.set(this, void 0);\r\n        _Output_chunks.set(this, void 0);\r\n        _Output_content.set(this, void 0);\r\n        _Output_delay.set(this, void 0);\r\n        _Output_dependency.set(this, void 0);\r\n        _Output_displayname.set(this, void 0);\r\n        _Output_hidden.set(this, false);\r\n        _Output_material.set(this, void 0);\r\n        _Output_msg.set(this, void 0);\r\n        _Output_order.set(this, void 0);\r\n        _Output_status_collect.set(this, void 0);\r\n        _Output_status_computation.set(this, void 0);\r\n        _Output_tooltip.set(this, void 0);\r\n        _Output_uid.set(this, void 0);\r\n        _Output_updateCallback.set(this, null);\r\n        _Output_version.set(this, void 0);\r\n        __classPrivateFieldSet(this, _Output_sessionEngine, sessionEngine, \"f\");\r\n        __classPrivateFieldSet(this, _Output_id, outputDef.id, \"f\");\r\n        __classPrivateFieldSet(this, _Output_name, outputDef.name, \"f\");\r\n        __classPrivateFieldSet(this, _Output_version, outputDef.version, \"f\");\r\n        this.updateOutputDefinition(outputDef);\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (30)\r\n    get bbmax() {\r\n        return __classPrivateFieldGet(this, _Output_bbmax, \"f\");\r\n    }\r\n    get bbmin() {\r\n        return __classPrivateFieldGet(this, _Output_bbmin, \"f\");\r\n    }\r\n    get chunks() {\r\n        return __classPrivateFieldGet(this, _Output_chunks, \"f\");\r\n    }\r\n    get content() {\r\n        return __classPrivateFieldGet(this, _Output_content, \"f\");\r\n    }\r\n    set content(value) {\r\n        __classPrivateFieldSet(this, _Output_content, value, \"f\");\r\n    }\r\n    get delay() {\r\n        return __classPrivateFieldGet(this, _Output_delay, \"f\");\r\n    }\r\n    get dependency() {\r\n        return __classPrivateFieldGet(this, _Output_dependency, \"f\");\r\n    }\r\n    get displayname() {\r\n        return __classPrivateFieldGet(this, _Output_displayname, \"f\");\r\n    }\r\n    set displayname(value) {\r\n        __classPrivateFieldSet(this, _Output_displayname, value, \"f\");\r\n    }\r\n    get format() {\r\n        return __classPrivateFieldGet(this, _Output_content, \"f\") ? __classPrivateFieldGet(this, _Output_content, \"f\").map(c => c.format) : [];\r\n    }\r\n    get freeze() {\r\n        return __classPrivateFieldGet(this, _Output_sessionEngine, \"f\").outputsFreeze[__classPrivateFieldGet(this, _Output_id, \"f\")];\r\n    }\r\n    set freeze(value) {\r\n        __classPrivateFieldGet(this, _Output_sessionEngine, \"f\").outputsFreeze[__classPrivateFieldGet(this, _Output_id, \"f\")] = value;\r\n    }\r\n    get hidden() {\r\n        return __classPrivateFieldGet(this, _Output_hidden, \"f\");\r\n    }\r\n    set hidden(value) {\r\n        __classPrivateFieldSet(this, _Output_hidden, value, \"f\");\r\n    }\r\n    get id() {\r\n        return __classPrivateFieldGet(this, _Output_id, \"f\");\r\n    }\r\n    get material() {\r\n        return __classPrivateFieldGet(this, _Output_material, \"f\");\r\n    }\r\n    get msg() {\r\n        return __classPrivateFieldGet(this, _Output_msg, \"f\");\r\n    }\r\n    get name() {\r\n        return __classPrivateFieldGet(this, _Output_name, \"f\");\r\n    }\r\n    get node() {\r\n        return __classPrivateFieldGet(this, _Output_sessionEngine, \"f\").node.children.find(c => c.name === this.id);\r\n    }\r\n    get order() {\r\n        return __classPrivateFieldGet(this, _Output_order, \"f\");\r\n    }\r\n    set order(value) {\r\n        __classPrivateFieldSet(this, _Output_order, value, \"f\");\r\n    }\r\n    get status_collect() {\r\n        return __classPrivateFieldGet(this, _Output_status_collect, \"f\");\r\n    }\r\n    get status_computation() {\r\n        return __classPrivateFieldGet(this, _Output_status_computation, \"f\");\r\n    }\r\n    get tooltip() {\r\n        return __classPrivateFieldGet(this, _Output_tooltip, \"f\");\r\n    }\r\n    set tooltip(value) {\r\n        __classPrivateFieldSet(this, _Output_tooltip, value, \"f\");\r\n    }\r\n    get uid() {\r\n        return __classPrivateFieldGet(this, _Output_uid, \"f\");\r\n    }\r\n    get updateCallback() {\r\n        return __classPrivateFieldGet(this, _Output_updateCallback, \"f\");\r\n    }\r\n    set updateCallback(value) {\r\n        __classPrivateFieldSet(this, _Output_updateCallback, value, \"f\");\r\n    }\r\n    get version() {\r\n        return __classPrivateFieldGet(this, _Output_version, \"f\");\r\n    }\r\n    set version(value) {\r\n        __classPrivateFieldSet(this, _Output_version, value, \"f\");\r\n    }\r\n    // #endregion Public Getters And Setters (30)\r\n    // #region Public Methods (4)\r\n    triggerUpdateCallback(newNode, oldNode) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (__classPrivateFieldGet(this, _Output_updateCallback, \"f\"))\r\n                yield Promise.resolve(__classPrivateFieldGet(this, _Output_updateCallback, \"f\").call(this, newNode, oldNode));\r\n        });\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    updateOutput(newNode, oldNode) {\r\n        const outputDef = __classPrivateFieldGet(this, _Output_sessionEngine, \"f\").outputs[this.id];\r\n        this.updateOutputDefinition(outputDef);\r\n        // add chunk nodes\r\n        if (this.chunks && newNode) {\r\n            for (let i = 0; i < newNode.children.length; i++) {\r\n                for (let j = 0; j < this.chunks.length; j++) {\r\n                    this.chunks[j].node = newNode.children[i].children.find(child => child.name === this.chunks[j].id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    updateOutputContent(outputContent, preventUpdate = false, waitForViewportUpdate = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            __classPrivateFieldGet(this, _Output_sessionEngine, \"f\").outputs[this.id].content = outputContent;\r\n            __classPrivateFieldGet(this, _Output_sessionEngine, \"f\").outputs[this.id].version = __classPrivateFieldGet(this, _Output_uuidGenerator, \"f\").create();\r\n            if (!preventUpdate)\r\n                yield __classPrivateFieldGet(this, _Output_sessionEngine, \"f\").updateOutputs(undefined, waitForViewportUpdate);\r\n            return this.node;\r\n        });\r\n    }\r\n    updateOutputDefinition(outputDef) {\r\n        __classPrivateFieldSet(this, _Output_dependency, outputDef.dependency, \"f\");\r\n        __classPrivateFieldSet(this, _Output_uid, outputDef.uid, \"f\");\r\n        __classPrivateFieldSet(this, _Output_material, outputDef.material, \"f\");\r\n        __classPrivateFieldSet(this, _Output_chunks, outputDef.chunks, \"f\");\r\n        __classPrivateFieldSet(this, _Output_msg, outputDef.msg, \"f\");\r\n        if (__classPrivateFieldGet(this, _Output_msg, \"f\") !== undefined)\r\n            __classPrivateFieldGet(this, _Output_logger, \"f\").warn(`Output(${this.id}): ${__classPrivateFieldGet(this, _Output_msg, \"f\")}`);\r\n        __classPrivateFieldSet(this, _Output_bbmin, outputDef.bbmin, \"f\");\r\n        __classPrivateFieldSet(this, _Output_bbmax, outputDef.bbmax, \"f\");\r\n        __classPrivateFieldSet(this, _Output_status_computation, outputDef.status_computation, \"f\");\r\n        __classPrivateFieldSet(this, _Output_status_collect, outputDef.status_collect, \"f\");\r\n        __classPrivateFieldSet(this, _Output_content, outputDef.content, \"f\");\r\n        __classPrivateFieldSet(this, _Output_delay, outputDef.delay, \"f\");\r\n        __classPrivateFieldSet(this, _Output_version, outputDef.version, \"f\");\r\n        __classPrivateFieldSet(this, _Output_displayname, outputDef.displayname, \"f\");\r\n        __classPrivateFieldSet(this, _Output_order, outputDef.order, \"f\");\r\n        __classPrivateFieldSet(this, _Output_hidden, outputDef.hidden, \"f\");\r\n    }\r\n}\r\nexports.Output = Output;\r\n_Output_id = new WeakMap(), _Output_inputValidator = new WeakMap(), _Output_logger = new WeakMap(), _Output_name = new WeakMap(), _Output_sessionEngine = new WeakMap(), _Output_uuidGenerator = new WeakMap(), _Output_bbmax = new WeakMap(), _Output_bbmin = new WeakMap(), _Output_chunks = new WeakMap(), _Output_content = new WeakMap(), _Output_delay = new WeakMap(), _Output_dependency = new WeakMap(), _Output_displayname = new WeakMap(), _Output_hidden = new WeakMap(), _Output_material = new WeakMap(), _Output_msg = new WeakMap(), _Output_order = new WeakMap(), _Output_status_collect = new WeakMap(), _Output_status_computation = new WeakMap(), _Output_tooltip = new WeakMap(), _Output_uid = new WeakMap(), _Output_updateCallback = new WeakMap(), _Output_version = new WeakMap();\r\n//# sourceMappingURL=Output.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _Parameter_choices, _Parameter_converter, _Parameter_decimalplaces, _Parameter_defaultValue, _Parameter_defval, _Parameter_eventEngine, _Parameter_expression, _Parameter_format, _Parameter_group, _Parameter_id, _Parameter_inputValidator, _Parameter_logger, _Parameter_max, _Parameter_min, _Parameter_name, _Parameter_paramDef, _Parameter_sessionEngine, _Parameter_settings, _Parameter_structure, _Parameter_type, _Parameter_visualization, _Parameter_displayname, _Parameter_hidden, _Parameter_lastValidatedValue, _Parameter_order, _Parameter_sessionValue, _Parameter_tooltip, _Parameter_value;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Parameter = void 0;\r\nconst MimeTypeUtils = __importStar(require(\"@shapediver/viewer.utils.mime-type\"));\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst viewer_shared_types_1 = require(\"@shapediver/viewer.shared.types\");\r\nclass Parameter {\r\n    // #endregion Properties (28)\r\n    // #region Constructors (1)\r\n    constructor(paramDef, sessionEngine) {\r\n        // #region Properties (28)\r\n        _Parameter_choices.set(this, void 0);\r\n        _Parameter_converter.set(this, viewer_shared_services_1.Converter.instance);\r\n        _Parameter_decimalplaces.set(this, void 0);\r\n        _Parameter_defaultValue.set(this, void 0);\r\n        _Parameter_defval.set(this, void 0);\r\n        _Parameter_eventEngine.set(this, viewer_shared_services_1.EventEngine.instance);\r\n        _Parameter_expression.set(this, void 0);\r\n        _Parameter_format.set(this, void 0);\r\n        _Parameter_group.set(this, void 0);\r\n        _Parameter_id.set(this, void 0);\r\n        _Parameter_inputValidator.set(this, viewer_shared_services_1.InputValidator.instance);\r\n        _Parameter_logger.set(this, viewer_shared_services_1.Logger.instance);\r\n        _Parameter_max.set(this, void 0);\r\n        _Parameter_min.set(this, void 0);\r\n        _Parameter_name.set(this, void 0);\r\n        _Parameter_paramDef.set(this, void 0);\r\n        _Parameter_sessionEngine.set(this, void 0);\r\n        _Parameter_settings.set(this, void 0);\r\n        _Parameter_structure.set(this, void 0);\r\n        _Parameter_type.set(this, void 0);\r\n        _Parameter_visualization.set(this, void 0);\r\n        _Parameter_displayname.set(this, void 0);\r\n        _Parameter_hidden.set(this, false);\r\n        _Parameter_lastValidatedValue.set(this, void 0);\r\n        _Parameter_order.set(this, void 0);\r\n        _Parameter_sessionValue.set(this, void 0);\r\n        _Parameter_tooltip.set(this, void 0);\r\n        _Parameter_value.set(this, void 0);\r\n        __classPrivateFieldSet(this, _Parameter_sessionEngine, sessionEngine, \"f\");\r\n        __classPrivateFieldSet(this, _Parameter_paramDef, paramDef, \"f\");\r\n        __classPrivateFieldSet(this, _Parameter_id, paramDef.id, \"f\");\r\n        __classPrivateFieldSet(this, _Parameter_defval, paramDef.defval, \"f\");\r\n        __classPrivateFieldSet(this, _Parameter_name, paramDef.name, \"f\");\r\n        __classPrivateFieldSet(this, _Parameter_type, paramDef.type, \"f\");\r\n        if (paramDef.choices !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_choices, paramDef.choices, \"f\");\r\n        if (paramDef.decimalplaces !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_decimalplaces, +paramDef.decimalplaces, \"f\");\r\n        if (paramDef.expression !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_expression, paramDef.expression, \"f\");\r\n        if (paramDef.format !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_format, MimeTypeUtils.extendMimeTypes(paramDef.format), \"f\");\r\n        if (paramDef.min !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_min, +paramDef.min, \"f\");\r\n        if (paramDef.max !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_max, +paramDef.max, \"f\");\r\n        if (paramDef.visualization !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_visualization, paramDef.visualization, \"f\");\r\n        if (paramDef.structure !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_structure, paramDef.structure, \"f\");\r\n        if (paramDef.group !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_group, paramDef.group, \"f\");\r\n        if (paramDef.settings !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_settings, paramDef.settings, \"f\");\r\n        if (paramDef.tooltip !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_tooltip, paramDef.tooltip, \"f\");\r\n        if (paramDef.displayname !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_displayname, paramDef.displayname, \"f\");\r\n        if (paramDef.order !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_order, paramDef.order, \"f\");\r\n        if (paramDef.hidden !== undefined)\r\n            __classPrivateFieldSet(this, _Parameter_hidden, paramDef.hidden, \"f\");\r\n        if (__classPrivateFieldGet(this, _Parameter_type, \"f\") === viewer_shared_types_1.PARAMETER_TYPE.BOOL) {\r\n            __classPrivateFieldSet(this, _Parameter_defaultValue, (__classPrivateFieldGet(this, _Parameter_defval, \"f\") === 'true'), \"f\");\r\n        }\r\n        else if (__classPrivateFieldGet(this, _Parameter_type, \"f\") === viewer_shared_types_1.PARAMETER_TYPE.EVEN || __classPrivateFieldGet(this, _Parameter_type, \"f\") === viewer_shared_types_1.PARAMETER_TYPE.FLOAT || __classPrivateFieldGet(this, _Parameter_type, \"f\") === viewer_shared_types_1.PARAMETER_TYPE.INT || __classPrivateFieldGet(this, _Parameter_type, \"f\") === viewer_shared_types_1.PARAMETER_TYPE.ODD) {\r\n            __classPrivateFieldSet(this, _Parameter_defaultValue, +__classPrivateFieldGet(this, _Parameter_defval, \"f\"), \"f\");\r\n        }\r\n        else {\r\n            __classPrivateFieldSet(this, _Parameter_defaultValue, __classPrivateFieldGet(this, _Parameter_defval, \"f\"), \"f\");\r\n        }\r\n        if (__classPrivateFieldGet(this, _Parameter_type, \"f\") === viewer_shared_types_1.PARAMETER_TYPE.COLOR) {\r\n            this.convertColor = (color) => {\r\n                return __classPrivateFieldGet(this, _Parameter_converter, \"f\").toHexColor(color);\r\n            };\r\n        }\r\n        __classPrivateFieldSet(this, _Parameter_value, __classPrivateFieldGet(this, _Parameter_defaultValue, \"f\"), \"f\");\r\n        __classPrivateFieldSet(this, _Parameter_sessionValue, __classPrivateFieldGet(this, _Parameter_value, \"f\"), \"f\");\r\n        __classPrivateFieldSet(this, _Parameter_lastValidatedValue, __classPrivateFieldGet(this, _Parameter_value, \"f\"), \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (27)\r\n    get choices() {\r\n        return __classPrivateFieldGet(this, _Parameter_choices, \"f\");\r\n    }\r\n    get decimalplaces() {\r\n        return __classPrivateFieldGet(this, _Parameter_decimalplaces, \"f\");\r\n    }\r\n    get defval() {\r\n        return __classPrivateFieldGet(this, _Parameter_defval, \"f\");\r\n    }\r\n    get displayname() {\r\n        return __classPrivateFieldGet(this, _Parameter_displayname, \"f\");\r\n    }\r\n    set displayname(value) {\r\n        __classPrivateFieldSet(this, _Parameter_displayname, value, \"f\");\r\n    }\r\n    get expression() {\r\n        return __classPrivateFieldGet(this, _Parameter_expression, \"f\");\r\n    }\r\n    get format() {\r\n        return __classPrivateFieldGet(this, _Parameter_format, \"f\");\r\n    }\r\n    get group() {\r\n        return __classPrivateFieldGet(this, _Parameter_group, \"f\");\r\n    }\r\n    get hidden() {\r\n        return __classPrivateFieldGet(this, _Parameter_hidden, \"f\");\r\n    }\r\n    set hidden(value) {\r\n        __classPrivateFieldSet(this, _Parameter_hidden, value, \"f\");\r\n    }\r\n    get id() {\r\n        return __classPrivateFieldGet(this, _Parameter_id, \"f\");\r\n    }\r\n    get lastValidatedValue() {\r\n        return __classPrivateFieldGet(this, _Parameter_lastValidatedValue, \"f\");\r\n    }\r\n    get max() {\r\n        return __classPrivateFieldGet(this, _Parameter_max, \"f\");\r\n    }\r\n    get min() {\r\n        return __classPrivateFieldGet(this, _Parameter_min, \"f\");\r\n    }\r\n    get name() {\r\n        return __classPrivateFieldGet(this, _Parameter_name, \"f\");\r\n    }\r\n    get order() {\r\n        return __classPrivateFieldGet(this, _Parameter_order, \"f\");\r\n    }\r\n    set order(value) {\r\n        __classPrivateFieldSet(this, _Parameter_order, value, \"f\");\r\n    }\r\n    get sessionValue() {\r\n        return __classPrivateFieldGet(this, _Parameter_sessionValue, \"f\");\r\n    }\r\n    set sessionValue(value) {\r\n        __classPrivateFieldSet(this, _Parameter_sessionValue, value, \"f\");\r\n        // emit event\r\n        __classPrivateFieldGet(this, _Parameter_eventEngine, \"f\").emitEvent(viewer_shared_services_1.EVENTTYPE_PARAMETER.PARAMETER_SESSION_VALUE_CHANGED, {\r\n            sessionId: __classPrivateFieldGet(this, _Parameter_sessionEngine, \"f\").id,\r\n            parameterId: __classPrivateFieldGet(this, _Parameter_id, \"f\"),\r\n            value: value\r\n        });\r\n    }\r\n    get settings() {\r\n        return __classPrivateFieldGet(this, _Parameter_settings, \"f\");\r\n    }\r\n    get structure() {\r\n        return __classPrivateFieldGet(this, _Parameter_structure, \"f\");\r\n    }\r\n    get tooltip() {\r\n        return __classPrivateFieldGet(this, _Parameter_tooltip, \"f\");\r\n    }\r\n    set tooltip(value) {\r\n        __classPrivateFieldSet(this, _Parameter_tooltip, value, \"f\");\r\n    }\r\n    get type() {\r\n        return __classPrivateFieldGet(this, _Parameter_type, \"f\");\r\n    }\r\n    get value() {\r\n        return __classPrivateFieldGet(this, _Parameter_value, \"f\");\r\n    }\r\n    set value(value) {\r\n        __classPrivateFieldSet(this, _Parameter_value, value, \"f\");\r\n        // emit event\r\n        __classPrivateFieldGet(this, _Parameter_eventEngine, \"f\").emitEvent(viewer_shared_services_1.EVENTTYPE_PARAMETER.PARAMETER_VALUE_CHANGED, {\r\n            sessionId: __classPrivateFieldGet(this, _Parameter_sessionEngine, \"f\").id,\r\n            parameterId: __classPrivateFieldGet(this, _Parameter_id, \"f\"),\r\n            value: value\r\n        });\r\n        // if customizeOnParameterChange is true, customize the session\r\n        if (__classPrivateFieldGet(this, _Parameter_sessionEngine, \"f\").customizeOnParameterChange)\r\n            __classPrivateFieldGet(this, _Parameter_sessionEngine, \"f\").customize();\r\n    }\r\n    get visualization() {\r\n        return __classPrivateFieldGet(this, _Parameter_visualization, \"f\");\r\n    }\r\n    // #endregion Public Getters And Setters (27)\r\n    // #region Public Methods (4)\r\n    isValid(value, throwError) {\r\n        return (0, viewer_shared_services_1.isValid)(__classPrivateFieldGet(this, _Parameter_paramDef, \"f\"), value, throwError);\r\n    }\r\n    resetToDefaultValue() {\r\n        __classPrivateFieldSet(this, _Parameter_value, __classPrivateFieldGet(this, _Parameter_defaultValue, \"f\"), \"f\");\r\n    }\r\n    resetToSessionValue() {\r\n        __classPrivateFieldSet(this, _Parameter_value, this.sessionValue, \"f\");\r\n    }\r\n    stringify(val) {\r\n        const value = val !== undefined ? val : this.value;\r\n        return (0, viewer_shared_services_1.stringify)(__classPrivateFieldGet(this, _Parameter_paramDef, \"f\"), value);\r\n    }\r\n}\r\nexports.Parameter = Parameter;\r\n_Parameter_choices = new WeakMap(), _Parameter_converter = new WeakMap(), _Parameter_decimalplaces = new WeakMap(), _Parameter_defaultValue = new WeakMap(), _Parameter_defval = new WeakMap(), _Parameter_eventEngine = new WeakMap(), _Parameter_expression = new WeakMap(), _Parameter_format = new WeakMap(), _Parameter_group = new WeakMap(), _Parameter_id = new WeakMap(), _Parameter_inputValidator = new WeakMap(), _Parameter_logger = new WeakMap(), _Parameter_max = new WeakMap(), _Parameter_min = new WeakMap(), _Parameter_name = new WeakMap(), _Parameter_paramDef = new WeakMap(), _Parameter_sessionEngine = new WeakMap(), _Parameter_settings = new WeakMap(), _Parameter_structure = new WeakMap(), _Parameter_type = new WeakMap(), _Parameter_visualization = new WeakMap(), _Parameter_displayname = new WeakMap(), _Parameter_hidden = new WeakMap(), _Parameter_lastValidatedValue = new WeakMap(), _Parameter_order = new WeakMap(), _Parameter_sessionValue = new WeakMap(), _Parameter_tooltip = new WeakMap(), _Parameter_value = new WeakMap();\r\n//# sourceMappingURL=Parameter.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar _GumballParameter_sessionEngine;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GumballParameter = void 0;\r\nconst viewer_shared_types_1 = require(\"@shapediver/viewer.shared.types\");\r\nconst Parameter_1 = require(\"../Parameter\");\r\nclass GumballParameter extends Parameter_1.Parameter {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    constructor(paramDef, sessionEngine) {\r\n        super(paramDef, sessionEngine);\r\n        // #region Properties (1)\r\n        _GumballParameter_sessionEngine.set(this, void 0);\r\n        __classPrivateFieldSet(this, _GumballParameter_sessionEngine, sessionEngine, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (9)\r\n    get enableRotation() {\r\n        var _a;\r\n        return (_a = this.getGumballProperties()) === null || _a === void 0 ? void 0 : _a.enableRotation;\r\n    }\r\n    get enableScaling() {\r\n        var _a;\r\n        return (_a = this.getGumballProperties()) === null || _a === void 0 ? void 0 : _a.enableScaling;\r\n    }\r\n    get enableTranslation() {\r\n        var _a;\r\n        return (_a = this.getGumballProperties()) === null || _a === void 0 ? void 0 : _a.enableTranslation;\r\n    }\r\n    get hover() {\r\n        var _a;\r\n        return (_a = this.getGumballProperties()) === null || _a === void 0 ? void 0 : _a.hover;\r\n    }\r\n    get interactionType() {\r\n        return 'gumball';\r\n    }\r\n    get nameFilter() {\r\n        var _a;\r\n        return (_a = this.getGumballProperties()) === null || _a === void 0 ? void 0 : _a.nameFilter;\r\n    }\r\n    get scale() {\r\n        var _a;\r\n        return (_a = this.getGumballProperties()) === null || _a === void 0 ? void 0 : _a.scale;\r\n    }\r\n    get selectionColor() {\r\n        var _a;\r\n        return (_a = this.getGumballProperties()) === null || _a === void 0 ? void 0 : _a.selectionColor;\r\n    }\r\n    get space() {\r\n        var _a;\r\n        return (_a = this.getGumballProperties()) === null || _a === void 0 ? void 0 : _a.space;\r\n    }\r\n    // #endregion Public Getters And Setters (9)\r\n    // #region Private Methods (1)\r\n    getGumballProperties() {\r\n        const result = (0, viewer_shared_types_1.validateGumballParameterSettings)(this.settings);\r\n        if (result.success) {\r\n            return this.settings.props;\r\n        }\r\n    }\r\n}\r\nexports.GumballParameter = GumballParameter;\r\n_GumballParameter_sessionEngine = new WeakMap();\r\n//# sourceMappingURL=GumballParameter.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar _SelectionParameter_sessionEngine;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SelectionParameter = void 0;\r\nconst viewer_shared_types_1 = require(\"@shapediver/viewer.shared.types\");\r\nconst Parameter_1 = require(\"../Parameter\");\r\nclass SelectionParameter extends Parameter_1.Parameter {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    constructor(paramDef, sessionEngine) {\r\n        super(paramDef, sessionEngine);\r\n        // #region Properties (1)\r\n        _SelectionParameter_sessionEngine.set(this, void 0);\r\n        __classPrivateFieldSet(this, _SelectionParameter_sessionEngine, sessionEngine, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (6)\r\n    get hover() {\r\n        var _a;\r\n        return (_a = this.getSelectionProperties()) === null || _a === void 0 ? void 0 : _a.hover;\r\n    }\r\n    get interactionType() {\r\n        return 'selection';\r\n    }\r\n    get maximumSelection() {\r\n        var _a;\r\n        return (_a = this.getSelectionProperties()) === null || _a === void 0 ? void 0 : _a.maximumSelection;\r\n    }\r\n    get minimumSelection() {\r\n        var _a;\r\n        return (_a = this.getSelectionProperties()) === null || _a === void 0 ? void 0 : _a.minimumSelection;\r\n    }\r\n    get nameFilter() {\r\n        var _a;\r\n        return (_a = this.getSelectionProperties()) === null || _a === void 0 ? void 0 : _a.nameFilter;\r\n    }\r\n    get selectionColor() {\r\n        var _a;\r\n        return (_a = this.getSelectionProperties()) === null || _a === void 0 ? void 0 : _a.selectionColor;\r\n    }\r\n    // #endregion Public Getters And Setters (6)\r\n    // #region Private Methods (1)\r\n    getSelectionProperties() {\r\n        const result = (0, viewer_shared_types_1.validateSelectionParameterSettings)(this.settings);\r\n        if (result.success) {\r\n            return this.settings.props;\r\n        }\r\n    }\r\n}\r\nexports.SelectionParameter = SelectionParameter;\r\n_SelectionParameter_sessionEngine = new WeakMap();\r\n//# sourceMappingURL=SelectionParameter.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Export = exports.DrawingParameter = exports.GumballParameter = exports.SelectionParameter = exports.FileParameter = exports.Parameter = exports.Output = exports.SessionEngine = exports.SessionOutputData = exports.SessionData = void 0;\r\nconst DrawingParameter_1 = require(\"./implementation/dto/DrawingParameter\");\r\nObject.defineProperty(exports, \"DrawingParameter\", { enumerable: true, get: function () { return DrawingParameter_1.DrawingParameter; } });\r\nconst Export_1 = require(\"./implementation/dto/Export\");\r\nObject.defineProperty(exports, \"Export\", { enumerable: true, get: function () { return Export_1.Export; } });\r\nconst FileParameter_1 = require(\"./implementation/dto/FileParameter\");\r\nObject.defineProperty(exports, \"FileParameter\", { enumerable: true, get: function () { return FileParameter_1.FileParameter; } });\r\nconst GumballParameter_1 = require(\"./implementation/dto/interaction/GumballParameter\");\r\nObject.defineProperty(exports, \"GumballParameter\", { enumerable: true, get: function () { return GumballParameter_1.GumballParameter; } });\r\nconst Output_1 = require(\"./implementation/dto/Output\");\r\nObject.defineProperty(exports, \"Output\", { enumerable: true, get: function () { return Output_1.Output; } });\r\nconst Parameter_1 = require(\"./implementation/dto/Parameter\");\r\nObject.defineProperty(exports, \"Parameter\", { enumerable: true, get: function () { return Parameter_1.Parameter; } });\r\nconst SelectionParameter_1 = require(\"./implementation/dto/interaction/SelectionParameter\");\r\nObject.defineProperty(exports, \"SelectionParameter\", { enumerable: true, get: function () { return SelectionParameter_1.SelectionParameter; } });\r\nconst SessionData_1 = require(\"./implementation/SessionData\");\r\nObject.defineProperty(exports, \"SessionData\", { enumerable: true, get: function () { return SessionData_1.SessionData; } });\r\nconst SessionEngine_1 = require(\"./implementation/SessionEngine\");\r\nObject.defineProperty(exports, \"SessionEngine\", { enumerable: true, get: function () { return SessionEngine_1.SessionEngine; } });\r\nconst SessionOutputData_1 = require(\"./implementation/SessionOutputData\");\r\nObject.defineProperty(exports, \"SessionOutputData\", { enumerable: true, get: function () { return SessionOutputData_1.SessionOutputData; } });\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _ExportApi_export, _ExportApi_inputValidator, _ExportApi_logger;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ExportApi = void 0;\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nclass ExportApi {\r\n    // #endregion Properties (3)\r\n    // #region Constructors (1)\r\n    constructor(exportD) {\r\n        // #region Properties (3)\r\n        _ExportApi_export.set(this, void 0);\r\n        _ExportApi_inputValidator.set(this, viewer_shared_services_1.InputValidator.instance);\r\n        _ExportApi_logger.set(this, viewer_shared_services_1.Logger.instance);\r\n        __classPrivateFieldSet(this, _ExportApi_export, exportD, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (24)\r\n    get content() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").content;\r\n    }\r\n    get delay() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").delay;\r\n    }\r\n    get dependency() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").dependency;\r\n    }\r\n    get displayname() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").displayname;\r\n    }\r\n    set displayname(value) {\r\n        const scope = 'displayname';\r\n        __classPrivateFieldGet(this, _ExportApi_inputValidator, \"f\").validateAndError(`ExportApi.${scope}`, value, 'string', false);\r\n        __classPrivateFieldGet(this, _ExportApi_export, \"f\").displayname = value;\r\n        __classPrivateFieldGet(this, _ExportApi_logger, \"f\").debug(`ExportApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _ExportApi_export, \"f\").displayname}.`);\r\n    }\r\n    get filename() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").filename;\r\n    }\r\n    get group() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").group;\r\n    }\r\n    get hidden() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").hidden;\r\n    }\r\n    set hidden(value) {\r\n        const scope = 'hidden';\r\n        __classPrivateFieldGet(this, _ExportApi_inputValidator, \"f\").validateAndError(`ExportApi.${scope}`, value, 'boolean');\r\n        __classPrivateFieldGet(this, _ExportApi_export, \"f\").hidden = value;\r\n        __classPrivateFieldGet(this, _ExportApi_logger, \"f\").debug(`ExportApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _ExportApi_export, \"f\").hidden}.`);\r\n    }\r\n    get id() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").id;\r\n    }\r\n    get maxWaitTime() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").maxWaitTime;\r\n    }\r\n    set maxWaitTime(value) {\r\n        const scope = 'maxWaitTime';\r\n        __classPrivateFieldGet(this, _ExportApi_inputValidator, \"f\").validateAndError(`ExportApi.${scope}`, value, 'number');\r\n        __classPrivateFieldGet(this, _ExportApi_export, \"f\").maxWaitTime = value;\r\n        __classPrivateFieldGet(this, _ExportApi_logger, \"f\").debug(`ExportApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _ExportApi_export, \"f\").maxWaitTime}.`);\r\n    }\r\n    get msg() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").msg;\r\n    }\r\n    get name() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").name;\r\n    }\r\n    get order() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").order;\r\n    }\r\n    set order(value) {\r\n        const scope = 'order';\r\n        __classPrivateFieldGet(this, _ExportApi_inputValidator, \"f\").validateAndError(`ExportApi.${scope}`, value, 'number', false);\r\n        __classPrivateFieldGet(this, _ExportApi_export, \"f\").order = value;\r\n        __classPrivateFieldGet(this, _ExportApi_logger, \"f\").debug(`ExportApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _ExportApi_export, \"f\").order}.`);\r\n    }\r\n    get result() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").result;\r\n    }\r\n    get status_collect() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").status_collect;\r\n    }\r\n    get status_computation() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").status_computation;\r\n    }\r\n    get tooltip() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").tooltip;\r\n    }\r\n    set tooltip(value) {\r\n        const scope = 'tooltip';\r\n        __classPrivateFieldGet(this, _ExportApi_inputValidator, \"f\").validateAndError(`ExportApi.${scope}`, value, 'string', false);\r\n        __classPrivateFieldGet(this, _ExportApi_export, \"f\").tooltip = value;\r\n        __classPrivateFieldGet(this, _ExportApi_logger, \"f\").debug(`ExportApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _ExportApi_export, \"f\").tooltip}.`);\r\n    }\r\n    get type() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").type;\r\n    }\r\n    get uid() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").uid;\r\n    }\r\n    get version() {\r\n        return __classPrivateFieldGet(this, _ExportApi_export, \"f\").version;\r\n    }\r\n    // #endregion Public Getters And Setters (24)\r\n    // #region Public Methods (2)\r\n    request(parameters = {}) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const scope = 'request';\r\n            __classPrivateFieldGet(this, _ExportApi_inputValidator, \"f\").validateAndError(`ExportApi.${scope}`, parameters, 'object');\r\n            return __classPrivateFieldGet(this, _ExportApi_export, \"f\").request(parameters);\r\n        });\r\n    }\r\n    updateExport() {\r\n        __classPrivateFieldGet(this, _ExportApi_export, \"f\").updateExport();\r\n    }\r\n}\r\nexports.ExportApi = ExportApi;\r\n_ExportApi_export = new WeakMap(), _ExportApi_inputValidator = new WeakMap(), _ExportApi_logger = new WeakMap();\r\n//# sourceMappingURL=ExportApi.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _OutputApi_inputValidator, _OutputApi_logger, _OutputApi_output;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutputApi = void 0;\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst OutputApiData_1 = require(\"./data/OutputApiData\");\r\nclass OutputApi {\r\n    // #endregion Properties (3)\r\n    // #region Constructors (1)\r\n    constructor(output) {\r\n        // #region Properties (3)\r\n        _OutputApi_inputValidator.set(this, viewer_shared_services_1.InputValidator.instance);\r\n        _OutputApi_logger.set(this, viewer_shared_services_1.Logger.instance);\r\n        _OutputApi_output.set(this, void 0);\r\n        __classPrivateFieldSet(this, _OutputApi_output, output, \"f\");\r\n        __classPrivateFieldGet(this, _OutputApi_output, \"f\").updateCallback = (newNode) => {\r\n            if (newNode && newNode.data.findIndex(d => d instanceof OutputApiData_1.OutputApiData) === -1)\r\n                newNode.addData(new OutputApiData_1.OutputApiData(this));\r\n        };\r\n        __classPrivateFieldGet(this, _OutputApi_output, \"f\").updateCallback(this.node);\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (28)\r\n    get bbmax() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").bbmax;\r\n    }\r\n    get bbmin() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").bbmin;\r\n    }\r\n    get chunks() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").chunks;\r\n    }\r\n    get content() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").content;\r\n    }\r\n    get delay() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").delay;\r\n    }\r\n    get dependency() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").dependency;\r\n    }\r\n    get displayname() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").displayname;\r\n    }\r\n    set displayname(value) {\r\n        const scope = 'displayname';\r\n        __classPrivateFieldGet(this, _OutputApi_inputValidator, \"f\").validateAndError(`OutputApi.${scope}`, value, 'string', false);\r\n        __classPrivateFieldGet(this, _OutputApi_output, \"f\").displayname = value;\r\n        __classPrivateFieldGet(this, _OutputApi_logger, \"f\").debug(`OutputApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _OutputApi_output, \"f\").displayname}.`);\r\n    }\r\n    get format() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").format;\r\n    }\r\n    get freeze() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").freeze;\r\n    }\r\n    set freeze(value) {\r\n        const scope = 'freeze';\r\n        __classPrivateFieldGet(this, _OutputApi_inputValidator, \"f\").validateAndError(`OutputApi.${scope}`, value, 'boolean');\r\n        __classPrivateFieldGet(this, _OutputApi_output, \"f\").freeze = value;\r\n        __classPrivateFieldGet(this, _OutputApi_logger, \"f\").debug(`OutputApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _OutputApi_output, \"f\").freeze}.`);\r\n    }\r\n    get hidden() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").hidden;\r\n    }\r\n    set hidden(value) {\r\n        const scope = 'hidden';\r\n        __classPrivateFieldGet(this, _OutputApi_inputValidator, \"f\").validateAndError(`OutputApi.${scope}`, value, 'boolean');\r\n        __classPrivateFieldGet(this, _OutputApi_output, \"f\").hidden = value;\r\n        __classPrivateFieldGet(this, _OutputApi_logger, \"f\").debug(`OutputApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _OutputApi_output, \"f\").hidden}.`);\r\n    }\r\n    get id() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").id;\r\n    }\r\n    get material() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").material;\r\n    }\r\n    get msg() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").msg;\r\n    }\r\n    get name() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").name;\r\n    }\r\n    get node() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").node;\r\n    }\r\n    get order() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").order;\r\n    }\r\n    set order(value) {\r\n        const scope = 'order';\r\n        __classPrivateFieldGet(this, _OutputApi_inputValidator, \"f\").validateAndError(`OutputApi.${scope}`, value, 'number', false);\r\n        __classPrivateFieldGet(this, _OutputApi_output, \"f\").order = value;\r\n        __classPrivateFieldGet(this, _OutputApi_logger, \"f\").debug(`OutputApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _OutputApi_output, \"f\").order}.`);\r\n    }\r\n    get status_collect() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").status_collect;\r\n    }\r\n    get status_computation() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").status_computation;\r\n    }\r\n    get tooltip() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").tooltip;\r\n    }\r\n    set tooltip(value) {\r\n        const scope = 'tooltip';\r\n        __classPrivateFieldGet(this, _OutputApi_inputValidator, \"f\").validateAndError(`OutputApi.${scope}`, value, 'string', false);\r\n        __classPrivateFieldGet(this, _OutputApi_output, \"f\").tooltip = value;\r\n        __classPrivateFieldGet(this, _OutputApi_logger, \"f\").debug(`OutputApi.${scope}: ${scope} was updated to ${__classPrivateFieldGet(this, _OutputApi_output, \"f\").tooltip}.`);\r\n    }\r\n    get uid() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").uid;\r\n    }\r\n    get updateCallback() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").updateCallback;\r\n    }\r\n    set updateCallback(value) {\r\n        const scope = 'updateCallback';\r\n        if (value)\r\n            __classPrivateFieldGet(this, _OutputApi_inputValidator, \"f\").validateAndError(`OutputApi.${scope}`, value, 'function', false);\r\n        __classPrivateFieldGet(this, _OutputApi_output, \"f\").updateCallback = (newNode, oldNode) => __awaiter(this, void 0, void 0, function* () {\r\n            if (newNode && newNode.data.findIndex(d => d instanceof OutputApiData_1.OutputApiData) === -1)\r\n                newNode.addData(new OutputApiData_1.OutputApiData(this));\r\n            if (value)\r\n                yield Promise.resolve(value(newNode, oldNode));\r\n        });\r\n        __classPrivateFieldGet(this, _OutputApi_logger, \"f\").debug(`OutputApi.${scope}: ${scope} was updated to ${value}.`);\r\n    }\r\n    get version() {\r\n        return __classPrivateFieldGet(this, _OutputApi_output, \"f\").version;\r\n    }\r\n    // #endregion Public Getters And Setters (28)\r\n    // #region Public Methods (1)\r\n    updateOutputContent(outputContent, preventUpdate = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const scope = 'updateOutputContent';\r\n            __classPrivateFieldGet(this, _OutputApi_inputValidator, \"f\").validateAndError(`OutputApi.${scope}`, outputContent, 'array');\r\n            __classPrivateFieldGet(this, _OutputApi_inputValidator, \"f\").validateAndError(`OutputApi.${scope}`, preventUpdate, 'boolean');\r\n            return __classPrivateFieldGet(this, _OutputApi_output, \"f\").updateOutputContent(outputContent, preventUpdate);\r\n        });\r\n    }\r\n}\r\nexports.OutputApi = OutputApi;\r\n_OutputApi_inputValidator = new WeakMap(), _OutputApi_logger = new WeakMap(), _OutputApi_output = new WeakMap();\r\n//# sourceMappingURL=OutputApi.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _SessionApi_creationControlCenterSession, _SessionApi_exports, _SessionApi_gltfConverter, _SessionApi_inputValidator, _SessionApi_logger, _SessionApi_outputs, _SessionApi_parameters, _SessionApi_sessionEngine, _SessionApi_stateEngine;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionApi = void 0;\r\nconst viewer_creation_control_center_session_1 = require(\"@shapediver/viewer.creation-control-center.session\");\r\nconst viewer_session_engine_session_engine_1 = require(\"@shapediver/viewer.session-engine.session-engine\");\r\nconst DrawingParameterApi_1 = require(\"./parameter/DrawingParameterApi\");\r\nconst ExportApi_1 = require(\"./ExportApi\");\r\nconst FileParameterApi_1 = require(\"./parameter/FileParameterApi\");\r\nconst viewer_data_engine_gltf_converter_1 = require(\"@shapediver/viewer.data-engine.gltf-converter\");\r\nconst GumballParameterApi_1 = require(\"./parameter/GumballParameterApi\");\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst OutputApi_1 = require(\"./OutputApi\");\r\nconst ParameterApi_1 = require(\"./parameter/ParameterApi\");\r\nconst SelectionParameterApi_1 = require(\"./parameter/SelectionParameterApi\");\r\nconst SessionApiData_1 = require(\"./data/SessionApiData\");\r\nclass SessionApi {\r\n    // #endregion Properties (9)\r\n    // #region Constructors (1)\r\n    constructor(sessionEngine) {\r\n        // #region Properties (9)\r\n        _SessionApi_creationControlCenterSession.set(this, viewer_creation_control_center_session_1.CreationControlCenterSession.instance);\r\n        _SessionApi_exports.set(this, {});\r\n        _SessionApi_gltfConverter.set(this, viewer_data_engine_gltf_converter_1.GLTFConverter.instance);\r\n        _SessionApi_inputValidator.set(this, viewer_shared_services_1.InputValidator.instance);\r\n        _SessionApi_logger.set(this, viewer_shared_services_1.Logger.instance);\r\n        _SessionApi_outputs.set(this, {});\r\n        _SessionApi_parameters.set(this, {});\r\n        _SessionApi_sessionEngine.set(this, void 0);\r\n        _SessionApi_stateEngine.set(this, viewer_shared_services_1.StateEngine.instance);\r\n        __classPrivateFieldSet(this, _SessionApi_sessionEngine, sessionEngine, \"f\");\r\n        if (!__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").initialized)\r\n            throw new viewer_shared_services_1.ShapeDiverViewerSessionError('Session could not be initialized.');\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").updateCallback = (newNode) => {\r\n            if (!newNode)\r\n                return;\r\n            if (newNode.data.findIndex(d => d instanceof SessionApiData_1.SessionApiData) === -1)\r\n                newNode.addData(new SessionApiData_1.SessionApiData(this));\r\n        };\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").updateCallback(this.node, this.node);\r\n        for (const o in __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").outputs)\r\n            __classPrivateFieldGet(this, _SessionApi_outputs, \"f\")[o] = new OutputApi_1.OutputApi(__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").outputs[o]);\r\n        for (const e in __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").exports)\r\n            __classPrivateFieldGet(this, _SessionApi_exports, \"f\")[e] = new ExportApi_1.ExportApi(__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").exports[e]);\r\n        for (const p in __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters) {\r\n            if (__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters[p] instanceof viewer_session_engine_session_engine_1.FileParameter) {\r\n                __classPrivateFieldGet(this, _SessionApi_parameters, \"f\")[p] = new FileParameterApi_1.FileParameterApi(__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters[p]);\r\n            }\r\n            else if (__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters[p] instanceof viewer_session_engine_session_engine_1.SelectionParameter) {\r\n                __classPrivateFieldGet(this, _SessionApi_parameters, \"f\")[p] = new SelectionParameterApi_1.SelectionParameterApi(__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters[p]);\r\n            }\r\n            else if (__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters[p] instanceof viewer_session_engine_session_engine_1.GumballParameter) {\r\n                __classPrivateFieldGet(this, _SessionApi_parameters, \"f\")[p] = new GumballParameterApi_1.GumballParameterApi(__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters[p]);\r\n            }\r\n            else if (__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters[p] instanceof viewer_session_engine_session_engine_1.DrawingParameter) {\r\n                __classPrivateFieldGet(this, _SessionApi_parameters, \"f\")[p] = new DrawingParameterApi_1.DrawingParameterApi(__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters[p]);\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _SessionApi_parameters, \"f\")[p] = new ParameterApi_1.ParameterApi(__classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").parameters[p]);\r\n            }\r\n        }\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (30)\r\n    get automaticSceneUpdate() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").automaticSceneUpdate;\r\n    }\r\n    set automaticSceneUpdate(value) {\r\n        const scope = 'automaticSceneUpdate';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, value, 'boolean');\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").automaticSceneUpdate = value;\r\n        __classPrivateFieldGet(this, _SessionApi_logger, \"f\").debug(`SessionApi.${scope}: ${scope} was set to ${value}`);\r\n    }\r\n    get commitParameters() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").settingsEngine.general.commitParameters;\r\n    }\r\n    set commitParameters(value) {\r\n        const scope = 'commitParameters';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, value, 'boolean');\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").settingsEngine.general.commitParameters = value;\r\n        __classPrivateFieldGet(this, _SessionApi_logger, \"f\").debug(`SessionApi.${scope}: ${scope} was set to ${value}`);\r\n    }\r\n    get commitSettings() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").settingsEngine.general.commitSettings;\r\n    }\r\n    set commitSettings(value) {\r\n        const scope = 'commitSettings';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, value, 'boolean');\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").settingsEngine.general.commitSettings = value;\r\n        __classPrivateFieldGet(this, _SessionApi_logger, \"f\").debug(`SessionApi.${scope}: ${scope} was set to ${value}`);\r\n    }\r\n    get customizeOnParameterChange() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").customizeOnParameterChange;\r\n    }\r\n    set customizeOnParameterChange(value) {\r\n        const scope = 'customizeOnParameterChange';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, value, 'boolean');\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").customizeOnParameterChange = value;\r\n        __classPrivateFieldGet(this, _SessionApi_logger, \"f\").debug(`SessionApi.${scope}: ${scope} was set to ${value}`);\r\n    }\r\n    get excludeViewports() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").excludeViewports;\r\n    }\r\n    set excludeViewports(value) {\r\n        const scope = 'excludeViewports';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, value, 'stringArray');\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").excludeViewports = value;\r\n        __classPrivateFieldGet(this, _SessionApi_logger, \"f\").debug(`SessionApi.${scope}: ${scope} was set to ${value}`);\r\n    }\r\n    get exports() {\r\n        return __classPrivateFieldGet(this, _SessionApi_exports, \"f\");\r\n    }\r\n    get guid() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").guid;\r\n    }\r\n    get id() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").id;\r\n    }\r\n    get initialized() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").initialized;\r\n    }\r\n    get jwtToken() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").jwtToken;\r\n    }\r\n    get loadSdtf() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").loadSdtf;\r\n    }\r\n    set loadSdtf(value) {\r\n        const scope = 'loadSdtf';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, value, 'boolean');\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").loadSdtf = value;\r\n        __classPrivateFieldGet(this, _SessionApi_logger, \"f\").debug(`SessionApi.${scope}: ${scope} was set to ${value}`);\r\n    }\r\n    get modelState() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").modelState;\r\n    }\r\n    get modelViewUrl() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").modelViewUrl;\r\n    }\r\n    get node() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").node;\r\n    }\r\n    get outputs() {\r\n        return __classPrivateFieldGet(this, _SessionApi_outputs, \"f\");\r\n    }\r\n    get parameterDefaultValues() {\r\n        const parameterDefaultValues = {};\r\n        for (const key in this.parameters)\r\n            parameterDefaultValues[key] = this.parameters[key].defval;\r\n        return parameterDefaultValues;\r\n    }\r\n    get parameterSessionValues() {\r\n        const parameterSessionValues = {};\r\n        for (const key in this.parameters)\r\n            parameterSessionValues[key] = this.parameters[key].sessionValue;\r\n        return parameterSessionValues;\r\n    }\r\n    get parameterValues() {\r\n        const parameterValues = {};\r\n        for (const key in this.parameters)\r\n            parameterValues[key] = this.parameters[key].value;\r\n        return parameterValues;\r\n    }\r\n    get parameters() {\r\n        return __classPrivateFieldGet(this, _SessionApi_parameters, \"f\");\r\n    }\r\n    get refreshJwtToken() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").refreshJwtToken;\r\n    }\r\n    set refreshJwtToken(value) {\r\n        const scope = 'refreshJwtToken';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, value, 'function', false);\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").refreshJwtToken = value;\r\n        __classPrivateFieldGet(this, _SessionApi_logger, \"f\").debug(`SessionApi.${scope}: ${scope} was set to ${value}`);\r\n    }\r\n    get ticket() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").ticket;\r\n    }\r\n    get updateCallback() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").updateCallback;\r\n    }\r\n    set updateCallback(value) {\r\n        const scope = 'updateCallback';\r\n        if (value)\r\n            __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, value, 'function', false);\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").updateCallback = (newNode, oldNode) => __awaiter(this, void 0, void 0, function* () {\r\n            if (newNode.data.findIndex(d => d instanceof SessionApiData_1.SessionApiData) === -1)\r\n                newNode.addData(new SessionApiData_1.SessionApiData(this));\r\n            if (value)\r\n                yield Promise.resolve(value(newNode, oldNode));\r\n        });\r\n        __classPrivateFieldGet(this, _SessionApi_logger, \"f\").debug(`SessionApi.${scope}: ${scope} was updated to ${value}.`);\r\n    }\r\n    // #endregion Public Getters And Setters (30)\r\n    // #region Public Methods (31)\r\n    applySettings(response, sections) {\r\n        const scope = 'applySettings';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, response, 'object');\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, sections, 'object', false);\r\n        return __classPrivateFieldGet(this, _SessionApi_creationControlCenterSession, \"f\").applySettings(this.id, response, sections);\r\n    }\r\n    canGoBack() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").canGoBack();\r\n    }\r\n    canGoForward() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").canGoForward();\r\n    }\r\n    cancelCustomization() {\r\n        __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").cancelCustomization();\r\n    }\r\n    close() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return yield __classPrivateFieldGet(this, _SessionApi_creationControlCenterSession, \"f\").closeSessionEngine(this.id);\r\n        });\r\n    }\r\n    convertToGlTF(convertForAr = false) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            for (const r in __classPrivateFieldGet(this, _SessionApi_stateEngine, \"f\").viewportEngines)\r\n                (_a = __classPrivateFieldGet(this, _SessionApi_stateEngine, \"f\").viewportEngines[r]) === null || _a === void 0 ? void 0 : _a.update('SessionApi.convertToGlTF');\r\n            const result = yield __classPrivateFieldGet(this, _SessionApi_gltfConverter, \"f\").convert(this.node, convertForAr);\r\n            return new Blob([result], { type: 'application/octet-stream' });\r\n        });\r\n    }\r\n    createModelState(parameterValues, omitSessionParameterValues, image, data, arScene) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const scope = 'createModelState';\r\n            __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, parameterValues, 'object', false);\r\n            __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, omitSessionParameterValues, 'boolean', false);\r\n            return yield __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").createModelState(parameterValues, omitSessionParameterValues, image, data, arScene);\r\n        });\r\n    }\r\n    customize(parameterValues, force = false, waitForViewportUpdate = false) {\r\n        const scope = 'customize';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, parameterValues, 'object', false);\r\n        // if there are parameter values specified, we set them directly\r\n        // the validation happens in the setter of the ParameterApi\r\n        if (parameterValues)\r\n            for (const p in parameterValues)\r\n                this.parameters[p].value = parameterValues[p];\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, force, 'boolean', false);\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, waitForViewportUpdate, 'boolean', false);\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").customize(force, waitForViewportUpdate);\r\n    }\r\n    customizeParallel(parameterValues) {\r\n        const scope = 'customizeParallel';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, parameterValues, 'object');\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").customizeParallel(parameterValues);\r\n    }\r\n    customizeResult(parameterValues) {\r\n        const scope = 'customizeResult';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, parameterValues, 'object');\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").customizeParallel(parameterValues, false);\r\n    }\r\n    customizeWithModelState(modelState) {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").customizeWithModelState(modelState);\r\n    }\r\n    getExportById(id) {\r\n        const scope = 'getExportById';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, id, 'string');\r\n        return __classPrivateFieldGet(this, _SessionApi_exports, \"f\")[id];\r\n    }\r\n    getExportByName(name) {\r\n        const scope = 'getExportByName';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, name, 'string');\r\n        return Object.values(__classPrivateFieldGet(this, _SessionApi_exports, \"f\")).filter(e => e.name === name);\r\n    }\r\n    getExportByType(type) {\r\n        const scope = 'getExportByType';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, type, 'string');\r\n        return Object.values(__classPrivateFieldGet(this, _SessionApi_exports, \"f\")).filter(e => e.type === type);\r\n    }\r\n    getOutputByFormat(format) {\r\n        const scope = 'getOutputByFormat';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, format, 'string');\r\n        return Object.values(__classPrivateFieldGet(this, _SessionApi_outputs, \"f\")).filter(o => o.format.includes(format));\r\n    }\r\n    getOutputById(id) {\r\n        const scope = 'getOutputById';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, id, 'string');\r\n        return __classPrivateFieldGet(this, _SessionApi_outputs, \"f\")[id];\r\n    }\r\n    getOutputByName(name) {\r\n        const scope = 'getOutputByName';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, name, 'string');\r\n        return Object.values(__classPrivateFieldGet(this, _SessionApi_outputs, \"f\")).filter(o => o.name === name);\r\n    }\r\n    getParameterById(id) {\r\n        const scope = 'getParameterById';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, id, 'string');\r\n        return __classPrivateFieldGet(this, _SessionApi_parameters, \"f\")[id];\r\n    }\r\n    getParameterByName(name) {\r\n        const scope = 'getParameterByName';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, name, 'string');\r\n        return Object.values(__classPrivateFieldGet(this, _SessionApi_parameters, \"f\")).filter(p => p.name === name);\r\n    }\r\n    getParameterByType(type) {\r\n        const scope = 'getParameterByType';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, type, 'string');\r\n        return Object.values(__classPrivateFieldGet(this, _SessionApi_parameters, \"f\")).filter(p => p.type === type);\r\n    }\r\n    goBack() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").goBack();\r\n    }\r\n    goForward() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").goForward();\r\n    }\r\n    loadCachedOutputs(outputs) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return yield __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").loadCachedOutputsParallel(outputs);\r\n        });\r\n    }\r\n    requestExports(body, loadOutputs, maxWaitMsec) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const scope = 'requestExports';\r\n            __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, body, 'object');\r\n            __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, loadOutputs, 'boolean', false);\r\n            __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, maxWaitMsec, 'number', false);\r\n            return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").requestExports(body, loadOutputs, maxWaitMsec);\r\n        });\r\n    }\r\n    resetParameterValues(force = false, waitForViewportUpdate = false) {\r\n        const scope = 'resetParameterValues';\r\n        for (const p in this.parameters)\r\n            this.parameters[p].value = this.parameters[p].defval;\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, force, 'boolean', false);\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").customize(force, waitForViewportUpdate);\r\n    }\r\n    resetSettings(sections) {\r\n        const scope = 'applySettings';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, sections, 'object', false);\r\n        return __classPrivateFieldGet(this, _SessionApi_creationControlCenterSession, \"f\").resetSettings(this.id, sections);\r\n    }\r\n    saveDefaultParameterValues() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").saveDefaultParameterValues();\r\n    }\r\n    saveSettings(viewportId) {\r\n        const scope = 'saveDefaultParameterValues';\r\n        __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, viewportId, 'string', false);\r\n        return __classPrivateFieldGet(this, _SessionApi_creationControlCenterSession, \"f\").saveSettings(this.id, viewportId);\r\n    }\r\n    saveUiProperties() {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").saveUiProperties();\r\n    }\r\n    setJwtToken(value) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const scope = 'setJwtToken';\r\n            __classPrivateFieldGet(this, _SessionApi_inputValidator, \"f\").validateAndError(`SessionApi.${scope}`, value, 'string', false);\r\n            yield __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").setJwtToken(value);\r\n            __classPrivateFieldGet(this, _SessionApi_logger, \"f\").debug(`SessionApi.${scope}: ${scope} was set to ${value}`);\r\n            return;\r\n        });\r\n    }\r\n    updateOutputs(waitForViewportUpdate = false) {\r\n        return __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").updateOutputs(undefined, waitForViewportUpdate);\r\n    }\r\n    uploadFileParameters(values) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const fileParameters = values || {};\r\n            const fileParameterIds = yield __classPrivateFieldGet(this, _SessionApi_sessionEngine, \"f\").uploadFileParameters(fileParameters);\r\n            return fileParameterIds;\r\n        });\r\n    }\r\n}\r\nexports.SessionApi = SessionApi;\r\n_SessionApi_creationControlCenterSession = new WeakMap(), _SessionApi_exports = new WeakMap(), _SessionApi_gltfConverter = new WeakMap(), _SessionApi_inputValidator = new WeakMap(), _SessionApi_logger = new WeakMap(), _SessionApi_outputs = new WeakMap(), _SessionApi_parameters = new WeakMap(), _SessionApi_sessionEngine = new WeakMap(), _SessionApi_stateEngine = new WeakMap();\r\n//# sourceMappingURL=SessionApi.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _OutputApiData_api;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutputApiData = void 0;\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nclass OutputApiData extends viewer_shared_node_tree_1.AbstractTreeNodeData {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    /**\r\n     * Creates a OutputApi data node.\r\n     *\r\n     * @param _data the data as key- value pairs\r\n     * @param id the id\r\n     */\r\n    constructor(api, id, version) {\r\n        super(id, version);\r\n        // #region Properties (1)\r\n        _OutputApiData_api.set(this, void 0);\r\n        __classPrivateFieldSet(this, _OutputApiData_api, api, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (2)\r\n    get api() {\r\n        return __classPrivateFieldGet(this, _OutputApiData_api, \"f\");\r\n    }\r\n    set api(value) {\r\n        __classPrivateFieldSet(this, _OutputApiData_api, value, \"f\");\r\n    }\r\n    // #endregion Public Getters And Setters (2)\r\n    // #region Public Methods (1)\r\n    /**\r\n     * Clones the scene graph data.\r\n     */\r\n    clone() {\r\n        return new OutputApiData(this.api, this.id, this.version);\r\n    }\r\n}\r\nexports.OutputApiData = OutputApiData;\r\n_OutputApiData_api = new WeakMap();\r\n//# sourceMappingURL=OutputApiData.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _SessionApiData_api;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionApiData = void 0;\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nclass SessionApiData extends viewer_shared_node_tree_1.AbstractTreeNodeData {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    /**\r\n     * Creates a SessionApi data node.\r\n     *\r\n     * @param _data the data as key- value pairs\r\n     * @param id the id\r\n     */\r\n    constructor(api, id, version) {\r\n        super(id, version);\r\n        // #region Properties (1)\r\n        _SessionApiData_api.set(this, void 0);\r\n        __classPrivateFieldSet(this, _SessionApiData_api, api, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (2)\r\n    get api() {\r\n        return __classPrivateFieldGet(this, _SessionApiData_api, \"f\");\r\n    }\r\n    set api(value) {\r\n        __classPrivateFieldSet(this, _SessionApiData_api, value, \"f\");\r\n    }\r\n    // #endregion Public Getters And Setters (2)\r\n    // #region Public Methods (1)\r\n    /**\r\n     * Clones the scene graph data.\r\n     */\r\n    clone() {\r\n        return new SessionApiData(this.api, this.id, this.version);\r\n    }\r\n}\r\nexports.SessionApiData = SessionApiData;\r\n_SessionApiData_api = new WeakMap();\r\n//# sourceMappingURL=SessionApiData.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _DrawingParameterApi_parameter;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawingParameterApi = void 0;\r\nconst ParameterApi_1 = require(\"./ParameterApi\");\r\nclass DrawingParameterApi extends ParameterApi_1.ParameterApi {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    constructor(parameter) {\r\n        super(parameter);\r\n        // #region Properties (1)\r\n        _DrawingParameterApi_parameter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _DrawingParameterApi_parameter, parameter, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (2)\r\n    get geometry() {\r\n        return __classPrivateFieldGet(this, _DrawingParameterApi_parameter, \"f\").geometry;\r\n    }\r\n    get restrictions() {\r\n        return __classPrivateFieldGet(this, _DrawingParameterApi_parameter, \"f\").restrictions;\r\n    }\r\n}\r\nexports.DrawingParameterApi = DrawingParameterApi;\r\n_DrawingParameterApi_parameter = new WeakMap();\r\n//# sourceMappingURL=DrawingParameterApi.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _FileParameterApi_logger, _FileParameterApi_parameter;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FileParameterApi = void 0;\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst ParameterApi_1 = require(\"./ParameterApi\");\r\nclass FileParameterApi extends ParameterApi_1.ParameterApi {\r\n    // #endregion Properties (2)\r\n    // #region Constructors (1)\r\n    constructor(parameter) {\r\n        super(parameter);\r\n        // #region Properties (2)\r\n        _FileParameterApi_logger.set(this, viewer_shared_services_1.Logger.instance);\r\n        _FileParameterApi_parameter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _FileParameterApi_parameter, parameter, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Methods (2)\r\n    getFilename(fileId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return __classPrivateFieldGet(this, _FileParameterApi_parameter, \"f\").getFilename(fileId);\r\n        });\r\n    }\r\n    upload() {\r\n        return __classPrivateFieldGet(this, _FileParameterApi_parameter, \"f\").upload();\r\n    }\r\n}\r\nexports.FileParameterApi = FileParameterApi;\r\n_FileParameterApi_logger = new WeakMap(), _FileParameterApi_parameter = new WeakMap();\r\n//# sourceMappingURL=FileParameterApi.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _GumballParameterApi_parameter;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GumballParameterApi = void 0;\r\nconst ParameterApi_1 = require(\"./ParameterApi\");\r\nclass GumballParameterApi extends ParameterApi_1.ParameterApi {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    constructor(parameter) {\r\n        super(parameter);\r\n        // #region Properties (1)\r\n        _GumballParameterApi_parameter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _GumballParameterApi_parameter, parameter, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (9)\r\n    get enableRotation() {\r\n        return __classPrivateFieldGet(this, _GumballParameterApi_parameter, \"f\").enableRotation;\r\n    }\r\n    get enableScaling() {\r\n        return __classPrivateFieldGet(this, _GumballParameterApi_parameter, \"f\").enableScaling;\r\n    }\r\n    get enableTranslation() {\r\n        return __classPrivateFieldGet(this, _GumballParameterApi_parameter, \"f\").enableTranslation;\r\n    }\r\n    get hover() {\r\n        return __classPrivateFieldGet(this, _GumballParameterApi_parameter, \"f\").hover;\r\n    }\r\n    get interactionType() {\r\n        return __classPrivateFieldGet(this, _GumballParameterApi_parameter, \"f\").interactionType;\r\n    }\r\n    get nameFilter() {\r\n        return __classPrivateFieldGet(this, _GumballParameterApi_parameter, \"f\").nameFilter;\r\n    }\r\n    get scale() {\r\n        return __classPrivateFieldGet(this, _GumballParameterApi_parameter, \"f\").scale;\r\n    }\r\n    get selectionColor() {\r\n        return __classPrivateFieldGet(this, _GumballParameterApi_parameter, \"f\").selectionColor;\r\n    }\r\n    get space() {\r\n        return __classPrivateFieldGet(this, _GumballParameterApi_parameter, \"f\").space;\r\n    }\r\n}\r\nexports.GumballParameterApi = GumballParameterApi;\r\n_GumballParameterApi_parameter = new WeakMap();\r\n//# sourceMappingURL=GumballParameterApi.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _ParameterApi_inputValidator, _ParameterApi_logger, _ParameterApi_parameter;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ParameterApi = void 0;\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nclass ParameterApi {\r\n    // #endregion Properties (3)\r\n    // #region Constructors (1)\r\n    constructor(parameter) {\r\n        // #region Properties (3)\r\n        _ParameterApi_inputValidator.set(this, viewer_shared_services_1.InputValidator.instance);\r\n        _ParameterApi_logger.set(this, viewer_shared_services_1.Logger.instance);\r\n        _ParameterApi_parameter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _ParameterApi_parameter, parameter, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (25)\r\n    get choices() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").choices;\r\n    }\r\n    get decimalplaces() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").decimalplaces;\r\n    }\r\n    get defval() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").defval;\r\n    }\r\n    get displayname() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").displayname;\r\n    }\r\n    set displayname(value) {\r\n        const scope = 'displayname';\r\n        __classPrivateFieldGet(this, _ParameterApi_inputValidator, \"f\").validateAndError(`ParameterApi.${scope}`, value, 'string', false);\r\n        __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").displayname = value;\r\n        __classPrivateFieldGet(this, _ParameterApi_logger, \"f\").debug(`ParameterApi.${scope}: ${scope} was set to ${__classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").displayname}.`);\r\n    }\r\n    get expression() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").expression;\r\n    }\r\n    get format() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").format;\r\n    }\r\n    get group() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").group;\r\n    }\r\n    get hidden() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").hidden;\r\n    }\r\n    set hidden(value) {\r\n        const scope = 'hidden';\r\n        __classPrivateFieldGet(this, _ParameterApi_inputValidator, \"f\").validateAndError(`ParameterApi.${scope}`, value, 'boolean');\r\n        __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").hidden = value;\r\n        __classPrivateFieldGet(this, _ParameterApi_logger, \"f\").debug(`ParameterApi.${scope}: ${scope} was set to ${__classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").hidden}.`);\r\n    }\r\n    get id() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").id;\r\n    }\r\n    get max() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").max;\r\n    }\r\n    get min() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").min;\r\n    }\r\n    get name() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").name;\r\n    }\r\n    get order() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").order;\r\n    }\r\n    set order(value) {\r\n        const scope = 'order';\r\n        __classPrivateFieldGet(this, _ParameterApi_inputValidator, \"f\").validateAndError(`ParameterApi.${scope}`, value, 'number', false);\r\n        __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").order = value;\r\n        __classPrivateFieldGet(this, _ParameterApi_logger, \"f\").debug(`ParameterApi.${scope}: ${scope} was set to ${__classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").order}.`);\r\n    }\r\n    get sessionValue() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").sessionValue;\r\n    }\r\n    set sessionValue(value) {\r\n        const scope = 'sessionValue';\r\n        __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").sessionValue = value;\r\n        __classPrivateFieldGet(this, _ParameterApi_logger, \"f\").debug(`ParameterApi.${scope}: ${scope} was set to ${__classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").value}.`);\r\n    }\r\n    get settings() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").settings;\r\n    }\r\n    get structure() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").structure;\r\n    }\r\n    get tooltip() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").tooltip;\r\n    }\r\n    set tooltip(value) {\r\n        const scope = 'tooltip';\r\n        __classPrivateFieldGet(this, _ParameterApi_inputValidator, \"f\").validateAndError(`ParameterApi.${scope}`, value, 'string', false);\r\n        __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").tooltip = value;\r\n        __classPrivateFieldGet(this, _ParameterApi_logger, \"f\").debug(`ParameterApi.${scope}: ${scope} was set to ${__classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").tooltip}.`);\r\n    }\r\n    get type() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").type;\r\n    }\r\n    get value() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").value;\r\n    }\r\n    set value(value) {\r\n        const scope = 'value';\r\n        this.isValid(value, true);\r\n        __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").value = value;\r\n        __classPrivateFieldGet(this, _ParameterApi_logger, \"f\").debug(`ParameterApi.${scope}: ${scope} was set to ${__classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").value}.`);\r\n    }\r\n    get visualization() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").visualization;\r\n    }\r\n    // #endregion Public Getters And Setters (25)\r\n    // #region Public Methods (4)\r\n    isValid(value, throwError) {\r\n        const scope = 'isValid';\r\n        __classPrivateFieldGet(this, _ParameterApi_inputValidator, \"f\").validateAndError(`ParameterApi.${scope}`, throwError, 'boolean', false);\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").isValid(value, throwError);\r\n    }\r\n    resetToDefaultValue() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").resetToDefaultValue();\r\n    }\r\n    resetToSessionValue() {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").resetToSessionValue();\r\n    }\r\n    stringify(value) {\r\n        return __classPrivateFieldGet(this, _ParameterApi_parameter, \"f\").stringify(value);\r\n    }\r\n}\r\nexports.ParameterApi = ParameterApi;\r\n_ParameterApi_inputValidator = new WeakMap(), _ParameterApi_logger = new WeakMap(), _ParameterApi_parameter = new WeakMap();\r\n//# sourceMappingURL=ParameterApi.js.map","\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _SelectionParameterApi_parameter;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SelectionParameterApi = void 0;\r\nconst ParameterApi_1 = require(\"./ParameterApi\");\r\nclass SelectionParameterApi extends ParameterApi_1.ParameterApi {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    constructor(parameter) {\r\n        super(parameter);\r\n        // #region Properties (1)\r\n        _SelectionParameterApi_parameter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _SelectionParameterApi_parameter, parameter, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Getters And Setters (5)\r\n    get hover() {\r\n        return __classPrivateFieldGet(this, _SelectionParameterApi_parameter, \"f\").hover;\r\n    }\r\n    get interactionType() {\r\n        return __classPrivateFieldGet(this, _SelectionParameterApi_parameter, \"f\").interactionType;\r\n    }\r\n    get maximumSelection() {\r\n        return __classPrivateFieldGet(this, _SelectionParameterApi_parameter, \"f\").maximumSelection;\r\n    }\r\n    get minimumSelection() {\r\n        return __classPrivateFieldGet(this, _SelectionParameterApi_parameter, \"f\").minimumSelection;\r\n    }\r\n    get nameFilter() {\r\n        return __classPrivateFieldGet(this, _SelectionParameterApi_parameter, \"f\").nameFilter;\r\n    }\r\n    get selectionColor() {\r\n        return __classPrivateFieldGet(this, _SelectionParameterApi_parameter, \"f\").selectionColor;\r\n    }\r\n}\r\nexports.SelectionParameterApi = SelectionParameterApi;\r\n_SelectionParameterApi_parameter = new WeakMap();\r\n//# sourceMappingURL=SelectionParameterApi.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MaterialGemData = exports.MaterialSpecularGlossinessData = exports.MaterialShadowData = exports.MaterialUnlitData = exports.MaterialStandardData = exports.ShapeDiverResponseModelComputationStatus = exports.Sphere = exports.Box = exports.EVENTTYPE_TASK = exports.EVENTTYPE_DRAWING_TOOLS = exports.EVENTTYPE_GUMBALL = exports.EVENTTYPE_INTERACTION = exports.EVENTTYPE_VIEWPORT = exports.EVENTTYPE_SESSION = exports.EVENTTYPE_SCENE = exports.EVENTTYPE_RENDERING = exports.EVENTTYPE_PARAMETER = exports.EVENTTYPE_OUTPUT = exports.EVENTTYPE_CAMERA = exports.EVENTTYPE = exports.TASK_TYPE = exports.SESSION_SETTINGS_MODE = exports.SDTF_TYPEHINT = exports.TEXTURE_FILTERING = exports.TEXTURE_WRAPPING = exports.MATERIAL_TYPE = exports.MATERIAL_SHADING = exports.MATERIAL_ALPHA = exports.MATERIAL_SIDE = exports.PRIMITIVE_MODE = exports.LOGGING_LEVEL = exports.TAG3D_JUSTIFICATION = exports.PARAMETER_VISUALIZATION = exports.EXPORT_TYPE = exports.PARAMETER_TYPE = exports.TreeNode = exports.Tree = exports.version = exports.generalOptions = exports.sceneTree = exports.removeListener = exports.addListener = exports.sessions = exports.createSession = exports.OutputApiData = exports.SessionApiData = exports.IDrawingParameterJsonSchema = exports.IGumballParameterJsonSchema = exports.ISelectionParameterJsonSchema = exports.IInteractionParameterJsonSchema = void 0;\r\nexports.isViewerCameraError = exports.isViewerLightError = exports.isViewerViewportError = exports.isViewerSessionError = exports.isViewerSettingsError = exports.isViewerWebGLError = exports.isViewerEnvironmentMapError = exports.isViewerDataProcessingError = exports.isViewerUnknownError = exports.isViewerError = exports.ShapeDiverGeometryBackendResponseErrorType = exports.ShapeDiverGeometryBackendResponseError = exports.ShapeDiverGeometryBackendRequestError = exports.ShapeDiverGeometryBackendError = exports.ShapeDiverViewerDrawingToolsError = exports.ShapeDiverViewerInteractionError = exports.ShapeDiverViewerValidationError = exports.ShapeDiverViewerCameraError = exports.ShapeDiverViewerLightError = exports.ShapeDiverViewerArError = exports.ShapeDiverViewerUnknownError = exports.ShapeDiverViewerViewportError = exports.ShapeDiverViewerSessionError = exports.ShapeDiverViewerSettingsError = exports.ShapeDiverViewerWebGLError = exports.ShapeDiverViewerEnvironmentMapError = exports.ShapeDiverViewerDataProcessingError = exports.ShapeDiverViewerError = exports.ShapeDiverViewerErrorType = exports.SessionOutputData = exports.SessionData = exports.SdtfPrimitiveTypeGuard = exports.SDTFItemData = exports.SDTFAttributeData = exports.SDTFAttributesData = exports.SDTFOverviewData = exports.CustomData = exports.HTMLElementAnchorData = exports.HTMLElementAnchorImageData = exports.HTMLElementAnchorTextData = exports.HTMLElementAnchorCustomData = exports.MaterialVariantsData = exports.PrimitiveData = exports.AttributeData = exports.GeometryData = exports.AnimationData = exports.MapData = exports.MaterialBasicLineData = exports.MaterialMultiPointData = exports.MaterialPointData = void 0;\r\nexports.stringify = exports.isValid = exports.isViewerGeometryBackendResponseError = exports.isViewerGeometryBackendRequestError = exports.isViewerGeometryBackendGenericError = exports.isViewerGeometryBackendError = exports.isViewerDrawingToolsError = exports.isViewerInteractionError = exports.isViewerValidationError = exports.isARError = void 0;\r\nconst viewer_api_general_1 = require(\"@shapediver/viewer.api.general\");\r\nObject.defineProperty(exports, \"addListener\", { enumerable: true, get: function () { return viewer_api_general_1.addListener; } });\r\nObject.defineProperty(exports, \"generalOptions\", { enumerable: true, get: function () { return viewer_api_general_1.generalOptions; } });\r\nObject.defineProperty(exports, \"removeListener\", { enumerable: true, get: function () { return viewer_api_general_1.removeListener; } });\r\nObject.defineProperty(exports, \"sceneTree\", { enumerable: true, get: function () { return viewer_api_general_1.sceneTree; } });\r\nObject.defineProperty(exports, \"version\", { enumerable: true, get: function () { return viewer_api_general_1.version; } });\r\nconst viewer_shared_types_1 = require(\"@shapediver/viewer.shared.types\");\r\nObject.defineProperty(exports, \"AnimationData\", { enumerable: true, get: function () { return viewer_shared_types_1.AnimationData; } });\r\nObject.defineProperty(exports, \"AttributeData\", { enumerable: true, get: function () { return viewer_shared_types_1.AttributeData; } });\r\nObject.defineProperty(exports, \"CustomData\", { enumerable: true, get: function () { return viewer_shared_types_1.CustomData; } });\r\nObject.defineProperty(exports, \"GeometryData\", { enumerable: true, get: function () { return viewer_shared_types_1.GeometryData; } });\r\nObject.defineProperty(exports, \"HTMLElementAnchorCustomData\", { enumerable: true, get: function () { return viewer_shared_types_1.HTMLElementAnchorCustomData; } });\r\nObject.defineProperty(exports, \"HTMLElementAnchorData\", { enumerable: true, get: function () { return viewer_shared_types_1.HTMLElementAnchorData; } });\r\nObject.defineProperty(exports, \"HTMLElementAnchorImageData\", { enumerable: true, get: function () { return viewer_shared_types_1.HTMLElementAnchorImageData; } });\r\nObject.defineProperty(exports, \"HTMLElementAnchorTextData\", { enumerable: true, get: function () { return viewer_shared_types_1.HTMLElementAnchorTextData; } });\r\nObject.defineProperty(exports, \"IDrawingParameterJsonSchema\", { enumerable: true, get: function () { return viewer_shared_types_1.IDrawingParameterJsonSchema; } });\r\nObject.defineProperty(exports, \"IGumballParameterJsonSchema\", { enumerable: true, get: function () { return viewer_shared_types_1.IGumballParameterJsonSchema; } });\r\nObject.defineProperty(exports, \"IInteractionParameterJsonSchema\", { enumerable: true, get: function () { return viewer_shared_types_1.IInteractionParameterJsonSchema; } });\r\nObject.defineProperty(exports, \"ISelectionParameterJsonSchema\", { enumerable: true, get: function () { return viewer_shared_types_1.ISelectionParameterJsonSchema; } });\r\nObject.defineProperty(exports, \"MapData\", { enumerable: true, get: function () { return viewer_shared_types_1.MapData; } });\r\nObject.defineProperty(exports, \"MATERIAL_ALPHA\", { enumerable: true, get: function () { return viewer_shared_types_1.MATERIAL_ALPHA; } });\r\nObject.defineProperty(exports, \"MATERIAL_SHADING\", { enumerable: true, get: function () { return viewer_shared_types_1.MATERIAL_SHADING; } });\r\nObject.defineProperty(exports, \"MATERIAL_SIDE\", { enumerable: true, get: function () { return viewer_shared_types_1.MATERIAL_SIDE; } });\r\nObject.defineProperty(exports, \"MATERIAL_TYPE\", { enumerable: true, get: function () { return viewer_shared_types_1.MATERIAL_TYPE; } });\r\nObject.defineProperty(exports, \"MaterialBasicLineData\", { enumerable: true, get: function () { return viewer_shared_types_1.MaterialBasicLineData; } });\r\nObject.defineProperty(exports, \"MaterialGemData\", { enumerable: true, get: function () { return viewer_shared_types_1.MaterialGemData; } });\r\nObject.defineProperty(exports, \"MaterialMultiPointData\", { enumerable: true, get: function () { return viewer_shared_types_1.MaterialMultiPointData; } });\r\nObject.defineProperty(exports, \"MaterialPointData\", { enumerable: true, get: function () { return viewer_shared_types_1.MaterialPointData; } });\r\nObject.defineProperty(exports, \"MaterialShadowData\", { enumerable: true, get: function () { return viewer_shared_types_1.MaterialShadowData; } });\r\nObject.defineProperty(exports, \"MaterialSpecularGlossinessData\", { enumerable: true, get: function () { return viewer_shared_types_1.MaterialSpecularGlossinessData; } });\r\nObject.defineProperty(exports, \"MaterialStandardData\", { enumerable: true, get: function () { return viewer_shared_types_1.MaterialStandardData; } });\r\nObject.defineProperty(exports, \"MaterialUnlitData\", { enumerable: true, get: function () { return viewer_shared_types_1.MaterialUnlitData; } });\r\nObject.defineProperty(exports, \"MaterialVariantsData\", { enumerable: true, get: function () { return viewer_shared_types_1.MaterialVariantsData; } });\r\nObject.defineProperty(exports, \"PARAMETER_TYPE\", { enumerable: true, get: function () { return viewer_shared_types_1.PARAMETER_TYPE; } });\r\nObject.defineProperty(exports, \"PARAMETER_VISUALIZATION\", { enumerable: true, get: function () { return viewer_shared_types_1.PARAMETER_VISUALIZATION; } });\r\nObject.defineProperty(exports, \"PRIMITIVE_MODE\", { enumerable: true, get: function () { return viewer_shared_types_1.PRIMITIVE_MODE; } });\r\nObject.defineProperty(exports, \"PrimitiveData\", { enumerable: true, get: function () { return viewer_shared_types_1.PrimitiveData; } });\r\nObject.defineProperty(exports, \"SDTF_TYPEHINT\", { enumerable: true, get: function () { return viewer_shared_types_1.SDTF_TYPEHINT; } });\r\nObject.defineProperty(exports, \"SDTFAttributeData\", { enumerable: true, get: function () { return viewer_shared_types_1.SDTFAttributeData; } });\r\nObject.defineProperty(exports, \"SDTFAttributesData\", { enumerable: true, get: function () { return viewer_shared_types_1.SDTFAttributesData; } });\r\nObject.defineProperty(exports, \"SDTFItemData\", { enumerable: true, get: function () { return viewer_shared_types_1.SDTFItemData; } });\r\nObject.defineProperty(exports, \"SDTFOverviewData\", { enumerable: true, get: function () { return viewer_shared_types_1.SDTFOverviewData; } });\r\nObject.defineProperty(exports, \"SdtfPrimitiveTypeGuard\", { enumerable: true, get: function () { return viewer_shared_types_1.SdtfPrimitiveTypeGuard; } });\r\nObject.defineProperty(exports, \"TASK_TYPE\", { enumerable: true, get: function () { return viewer_shared_types_1.TASK_TYPE; } });\r\nObject.defineProperty(exports, \"TEXTURE_FILTERING\", { enumerable: true, get: function () { return viewer_shared_types_1.TEXTURE_FILTERING; } });\r\nObject.defineProperty(exports, \"TEXTURE_WRAPPING\", { enumerable: true, get: function () { return viewer_shared_types_1.TEXTURE_WRAPPING; } });\r\nconst viewer_shared_math_1 = require(\"@shapediver/viewer.shared.math\");\r\nObject.defineProperty(exports, \"Box\", { enumerable: true, get: function () { return viewer_shared_math_1.Box; } });\r\nObject.defineProperty(exports, \"Sphere\", { enumerable: true, get: function () { return viewer_shared_math_1.Sphere; } });\r\nconst main_1 = require(\"./main\");\r\nObject.defineProperty(exports, \"createSession\", { enumerable: true, get: function () { return main_1.createSession; } });\r\nObject.defineProperty(exports, \"sessions\", { enumerable: true, get: function () { return main_1.sessions; } });\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nObject.defineProperty(exports, \"EVENTTYPE\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_CAMERA\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_CAMERA; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_DRAWING_TOOLS\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_DRAWING_TOOLS; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_GUMBALL\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_GUMBALL; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_INTERACTION\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_INTERACTION; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_OUTPUT\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_OUTPUT; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_PARAMETER\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_PARAMETER; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_RENDERING\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_RENDERING; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_SCENE\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_SCENE; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_SESSION\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_SESSION; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_TASK\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_TASK; } });\r\nObject.defineProperty(exports, \"EVENTTYPE_VIEWPORT\", { enumerable: true, get: function () { return viewer_shared_services_1.EVENTTYPE_VIEWPORT; } });\r\nObject.defineProperty(exports, \"isARError\", { enumerable: true, get: function () { return viewer_shared_services_1.isARError; } });\r\nObject.defineProperty(exports, \"isValid\", { enumerable: true, get: function () { return viewer_shared_services_1.isValid; } });\r\nObject.defineProperty(exports, \"isViewerCameraError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerCameraError; } });\r\nObject.defineProperty(exports, \"isViewerDataProcessingError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerDataProcessingError; } });\r\nObject.defineProperty(exports, \"isViewerDrawingToolsError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerDrawingToolsError; } });\r\nObject.defineProperty(exports, \"isViewerEnvironmentMapError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerEnvironmentMapError; } });\r\nObject.defineProperty(exports, \"isViewerError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerError; } });\r\nObject.defineProperty(exports, \"isViewerGeometryBackendError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerGeometryBackendError; } });\r\nObject.defineProperty(exports, \"isViewerGeometryBackendGenericError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerGeometryBackendGenericError; } });\r\nObject.defineProperty(exports, \"isViewerGeometryBackendRequestError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerGeometryBackendRequestError; } });\r\nObject.defineProperty(exports, \"isViewerGeometryBackendResponseError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerGeometryBackendResponseError; } });\r\nObject.defineProperty(exports, \"isViewerInteractionError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerInteractionError; } });\r\nObject.defineProperty(exports, \"isViewerLightError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerLightError; } });\r\nObject.defineProperty(exports, \"isViewerSessionError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerSessionError; } });\r\nObject.defineProperty(exports, \"isViewerSettingsError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerSettingsError; } });\r\nObject.defineProperty(exports, \"isViewerUnknownError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerUnknownError; } });\r\nObject.defineProperty(exports, \"isViewerValidationError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerValidationError; } });\r\nObject.defineProperty(exports, \"isViewerViewportError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerViewportError; } });\r\nObject.defineProperty(exports, \"isViewerWebGLError\", { enumerable: true, get: function () { return viewer_shared_services_1.isViewerWebGLError; } });\r\nObject.defineProperty(exports, \"LOGGING_LEVEL\", { enumerable: true, get: function () { return viewer_shared_services_1.LOGGING_LEVEL; } });\r\nObject.defineProperty(exports, \"SESSION_SETTINGS_MODE\", { enumerable: true, get: function () { return viewer_shared_services_1.SESSION_SETTINGS_MODE; } });\r\nObject.defineProperty(exports, \"ShapeDiverGeometryBackendError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverGeometryBackendError; } });\r\nObject.defineProperty(exports, \"ShapeDiverGeometryBackendRequestError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverGeometryBackendRequestError; } });\r\nObject.defineProperty(exports, \"ShapeDiverGeometryBackendResponseError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverGeometryBackendResponseError; } });\r\nObject.defineProperty(exports, \"ShapeDiverGeometryBackendResponseErrorType\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverGeometryBackendResponseErrorType; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerArError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerArError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerCameraError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerCameraError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerDataProcessingError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerDataProcessingError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerDrawingToolsError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerDrawingToolsError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerEnvironmentMapError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerEnvironmentMapError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerErrorType\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerErrorType; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerInteractionError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerInteractionError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerLightError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerLightError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerSessionError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerSessionError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerSettingsError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerSettingsError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerUnknownError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerUnknownError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerValidationError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerValidationError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerViewportError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerViewportError; } });\r\nObject.defineProperty(exports, \"ShapeDiverViewerWebGLError\", { enumerable: true, get: function () { return viewer_shared_services_1.ShapeDiverViewerWebGLError; } });\r\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return viewer_shared_services_1.stringify; } });\r\nconst viewer_data_engine_shared_types_1 = require(\"@shapediver/viewer.data-engine.shared-types\");\r\nObject.defineProperty(exports, \"TAG3D_JUSTIFICATION\", { enumerable: true, get: function () { return viewer_data_engine_shared_types_1.TAG3D_JUSTIFICATION; } });\r\nconst viewer_session_engine_session_engine_1 = require(\"@shapediver/viewer.session-engine.session-engine\");\r\nObject.defineProperty(exports, \"SessionData\", { enumerable: true, get: function () { return viewer_session_engine_session_engine_1.SessionData; } });\r\nObject.defineProperty(exports, \"SessionOutputData\", { enumerable: true, get: function () { return viewer_session_engine_session_engine_1.SessionOutputData; } });\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nObject.defineProperty(exports, \"Tree\", { enumerable: true, get: function () { return viewer_shared_node_tree_1.Tree; } });\r\nObject.defineProperty(exports, \"TreeNode\", { enumerable: true, get: function () { return viewer_shared_node_tree_1.TreeNode; } });\r\nconst OutputApiData_1 = require(\"./implementation/data/OutputApiData\");\r\nObject.defineProperty(exports, \"OutputApiData\", { enumerable: true, get: function () { return OutputApiData_1.OutputApiData; } });\r\nconst SessionApiData_1 = require(\"./implementation/data/SessionApiData\");\r\nObject.defineProperty(exports, \"SessionApiData\", { enumerable: true, get: function () { return SessionApiData_1.SessionApiData; } });\r\nconst sdk_geometry_api_sdk_v2_1 = require(\"@shapediver/sdk.geometry-api-sdk-v2\");\r\nObject.defineProperty(exports, \"ShapeDiverResponseModelComputationStatus\", { enumerable: true, get: function () { return sdk_geometry_api_sdk_v2_1.ShapeDiverResponseModelComputationStatus; } });\r\nconst sdk_geometry_api_sdk_v2_2 = require(\"@shapediver/sdk.geometry-api-sdk-v2\");\r\nObject.defineProperty(exports, \"EXPORT_TYPE\", { enumerable: true, get: function () { return sdk_geometry_api_sdk_v2_2.ShapeDiverResponseExportDefinitionType; } });\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.createSession = exports.sessions = void 0;\r\nconst viewer_creation_control_center_session_1 = require(\"@shapediver/viewer.creation-control-center.session\");\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst SessionApi_1 = require(\"./implementation/SessionApi\");\r\nconst viewer_api_general_1 = require(\"@shapediver/viewer.api.general\");\r\nconst creationControlCenterSession = viewer_creation_control_center_session_1.CreationControlCenterSession.instance;\r\nconst inputValidator = viewer_shared_services_1.InputValidator.instance;\r\nconst logger = viewer_shared_services_1.Logger.instance;\r\n/**\r\n * The sessions that are currently being used.\r\n */\r\nexports.sessions = {};\r\n// Whenever a session or viewport is added or removed, this update is called.\r\ncreationControlCenterSession.updateSessions = (sessionEngines) => {\r\n    for (const s in sessionEngines)\r\n        if (!exports.sessions[s])\r\n            exports.sessions[s] = new SessionApi_1.SessionApi(sessionEngines[s]);\r\n    for (const s in exports.sessions)\r\n        if (!sessionEngines[s])\r\n            delete exports.sessions[s];\r\n};\r\n/**\r\n * Create and initialize a session with a model hosted on a\r\n * {@link https://help.shapediver.com/doc/Geometry-Backend.1863942173.html|ShapeDiver Geometry Backend},\r\n * using the provided ticket/guid and modelViewUrl.\r\n * Returns a session api object allowing to control the session.\r\n *\r\n * A JWT can be specified for authorizing the API calls to the Geometry Backend.\r\n * The model's settings on the Geometry Backend might require a JWT to be provided.\r\n *\r\n * By default the outputs of the model for its default parameter values will be loaded.\r\n *\r\n * An optional identifier for the session can be provided. This identifier can be used to retrieve the\r\n * api object from {@link sessions}. In case no identifier is provided, a unique one will be generated.\r\n *\r\n * @param properties.ticket The ticket for direct embedding of the model represented by the session. This identifies the model on the Geometry Backend. If no ticket was provided, a {@link guid} has to be provided instead.\r\n * @param properties.guid The geometry backend model id (guid). This identifies the model on the Geometry Backend. A {@link jwtToken} is needed for authentication. If no guid was provided, a {@link ticket} has to be provided instead.\r\n * @param properties.modelViewUrl The modelViewUrl of the {@link https://help.shapediver.com/doc/Geometry-Backend.1863942173.html|ShapeDiver Geometry Backend} hosting the model.\r\n * @param properties.jwtToken The JWT to use for authorizing the API calls to the Geometry Backend.\r\n * @param properties.id The unique identifier to use for the session.\r\n * @param properties.waitForOutputs Option to wait for the outputs to be loaded, or return immediately after creation of the session. (default: true)\r\n * @param properties.loadOutputs Option to load the outputs, or not load them until the first call of {@link ISession.customize}. (default: true)\r\n * @param properties.loadSdtf Option to load the SDTF data. The data is not loaded by default as it can be quite large. (default: false)\r\n * @param properties.excludeViewports Option to exclude some viewports from the start. Can be accessed via {@link ISession.excludeViewports}.\r\n * @param properties.initialParameterValues The initial set of parameter values to use. Map from parameter id to parameter value. The default value will be used for any parameter not specified.\r\n * @param properties.allowOutputLoading Option to allow the outputs to be loaded, or to prevent them from being loaded. (default: true)\r\n * @param properties.modelStateId The optional model state id to use for the session. If not provided, no model state will be loaded.\r\n * @param properties.modelStateValidationMode The optional model state validation mode to use for the session. If not provided, the default validation mode of the Geometry SDK will be used.\r\n * @returns\r\n */\r\nconst createSession = (properties) => __awaiter(void 0, void 0, void 0, function* () {\r\n    (0, viewer_api_general_1.showConsoleMessage)();\r\n    logger.debug(`createSession: Creating and initializing session with properties ${JSON.stringify(properties)}.`);\r\n    // input validation\r\n    inputValidator.validateAndError('createSession', properties, 'object');\r\n    inputValidator.validateAndError('createSession', properties.ticket, 'string', false);\r\n    inputValidator.validateAndError('createSession', properties.guid, 'string', false);\r\n    inputValidator.validateAndError('createSession', properties.modelViewUrl, 'string');\r\n    inputValidator.validateAndError('createSession', properties.jwtToken, 'string', false);\r\n    inputValidator.validateAndError('createSession', properties.id, 'string', false);\r\n    inputValidator.validateAndError('createSession', properties.waitForOutputs, 'boolean', false);\r\n    inputValidator.validateAndError('createSession', properties.loadOutputs, 'boolean', false);\r\n    inputValidator.validateAndError('createSession', properties.loadSdtf, 'boolean', false);\r\n    inputValidator.validateAndError('createSession', properties.excludeViewports, 'stringArray', false);\r\n    inputValidator.validateAndError('createSession', properties.initialParameterValues, 'object', false);\r\n    inputValidator.validateAndError('createSession', properties.allowOutputLoading, 'boolean', false);\r\n    inputValidator.validateAndError('createSession', properties.modelStateId, 'string', false);\r\n    inputValidator.validateAndError('createSession', properties.modelStateValidationMode, 'boolean', false);\r\n    if (properties.initialParameterValues)\r\n        for (const p in properties.initialParameterValues)\r\n            inputValidator.validateAndError('createSession', properties.initialParameterValues[p], 'string');\r\n    // we either expect a ticket or guid + jwtToken, error if we get both\r\n    if (properties.ticket !== undefined && properties.guid !== undefined)\r\n        throw new viewer_shared_services_1.ShapeDiverViewerSessionError('createSession: A ticket and a guid were provided for the session creation. Please only provide one or the other. The session was not created.');\r\n    // we either expect a ticket or guid + jwtToken, error if we get none\r\n    if (properties.ticket === undefined && properties.guid === undefined)\r\n        throw new viewer_shared_services_1.ShapeDiverViewerSessionError('createSession: Neither a ticket nor a guid were provided for the session creation. Please provide one or the other. The session was not created.');\r\n    // we either expect a guid + jwtToken, error if the jwtToken is missing\r\n    if (properties.guid !== undefined && properties.jwtToken === undefined)\r\n        throw new viewer_shared_services_1.ShapeDiverViewerSessionError('createSession: When creating a session with a guid, a jwtToken is required, please provide one. The session was not created.');\r\n    if (properties.waitForOutputs === undefined)\r\n        properties.waitForOutputs = true;\r\n    if (properties.loadOutputs === undefined)\r\n        properties.loadOutputs = true;\r\n    const sessionEngine = yield creationControlCenterSession.createSessionEngine(properties);\r\n    exports.sessions[sessionEngine.id] = new SessionApi_1.SessionApi(sessionEngine);\r\n    return exports.sessions[sessionEngine.id];\r\n});\r\nexports.createSession = createSession;\r\n//# sourceMappingURL=main.js.map"],"names":[],"sourceRoot":""}